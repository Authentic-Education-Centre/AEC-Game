<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂçéËØ≠ËØçÊ±áËØ≠Èü≥Â≠¶‰π†Á≥ªÁªü</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            text-align: center;
        }
        .page-indicator {
            font-size: 20px;
            color: #666;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            padding: 15px;
            border-radius: 25px;
            color: #333;
            font-weight: bold;
        }
        .vocab-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            padding: 50px;
            margin: 30px 0;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        .vocab-number {
            font-size: 24px;
            margin-bottom: 20px;
            color: #ffeb3b;
            font-weight: bold;
        }
        .vocab-word {
            font-size: 60px;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .vocab-pinyin {
            font-size: 36px;
            margin-bottom: 30px;
            color: #ffeb3b;
            font-style: italic;
            font-weight: bold;
        }
        .vocab-meaning {
            font-size: 22px;
            line-height: 1.8;
            background: rgba(255,255,255,0.15);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        .chinese-meaning {
            color: #e8f5e8;
            margin-bottom: 20px;
            border-left: 4px solid #4CAF50;
            padding-left: 20px;
        }
        .english-meaning {
            color: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding-left: 20px;
        }
        .audio-controls {
            margin: 30px 0;
        }
        .audio-btn {
            background: linear-gradient(45deg, #ff6b6b, #ffa726);
            color: white;
            border: none;
            padding: 20px 30px;
            margin: 10px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
            transition: all 0.3s;
        }
        .audio-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 107, 107, 0.4);
        }
        .audio-btn:active {
            transform: translateY(0);
        }
        .audio-btn.playing {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .navigation {
            margin: 30px 0;
        }
        .nav-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 15px 25px;
            margin: 0 10px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .nav-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        .start-game-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 25px 50px;
            border-radius: 50px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.3);
            transition: all 0.3s;
            margin: 20px;
        }
        .start-game-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(76, 175, 80, 0.4);
        }
        
        /* Ê∏∏ÊàèÊ†∑Âºè */
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #2196F3);
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        .question-box {
            background: #f8f9fa;
            border-left: 5px solid #007bff;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: left;
        }
        .chinese-sentence {
            font-size: 18px;
            color: #d32f2f;
            margin-bottom: 10px;
            font-weight: bold;
        }
        .english-sentence {
            font-size: 16px;
            color: #1976d2;
            font-weight: bold;
        }
        .option-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            line-height: 1.4;
        }
        .option-btn:hover {
            border-color: #007bff;
            background: #e3f2fd;
        }
        .option-btn.correct {
            background: #e8f5e8;
            border-color: #4CAF50;
            color: #2e7d32;
        }
        .option-btn.incorrect {
            background: #ffebee;
            border-color: #f44336;
            color: #c62828;
        }
        .result-box {
            text-align: center;
            padding: 30px;
            margin: 20px 0;
            border-radius: 15px;
            font-size: 18px;
        }
        .success {
            background: #e8f5e8;
            border: 2px solid #4CAF50;
            color: #2e7d32;
        }
        .error {
            background: #ffebee;
            border: 2px solid #f44336;
            color: #c62828;
        }
        .celebration {
            font-size: 60px;
            margin: 10px 0;
            animation: bounce 1s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        .final-score {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
        }
        .hidden { display: none; }
    </style>
</head>
<body>
    <!-- Â≠¶‰π†È°µÈù¢ -->
    <div id="learning-section" class="container">
        <div class="page-indicator" id="page-indicator">
            Á¨¨ 1 È°µ Page 1 / 10
        </div>
        
        <div class="vocab-display">
            <div class="vocab-number" id="vocab-number">1.</div>
            <div class="vocab-word" id="vocab-word">ÂäûÊ≥ï</div>
            <div class="vocab-pinyin" id="vocab-pinyin">b√†n f«é</div>
            
            <!-- ÈöêËóèÁöÑÊÑèÊÄùÂå∫Âüü -->
            <div class="vocab-meaning chinese-meaning" id="chinese-meaning" style="display: none;">
                Â§ÑÁêÜ‰∫ãÊÉÖÊàñËß£ÂÜ≥ÈóÆÈ¢òÁöÑÊñπÊ≥ï
            </div>
            <div class="vocab-meaning english-meaning" id="english-meaning" style="display: none;">
                means; method; way (of doing something)
            </div>
            
            <!-- ÊòæÁ§∫ÊÑèÊÄùÁöÑÊåâÈíÆ -->
            <div id="meaning-buttons" style="margin: 20px 0;">
                <button class="audio-btn" onclick="showChineseMeaning()" id="show-chinese-btn" style="background: linear-gradient(45deg, #e91e63, #ad1457);">
                    üëÅÔ∏è ÊòæÁ§∫‰∏≠ÊñáÊÑèÊÄù Show Chinese Meaning
                </button>
                <button class="audio-btn" onclick="showEnglishMeaning()" id="show-english-btn" style="background: linear-gradient(45deg, #3f51b5, #283593);">
                    üëÅÔ∏è ÊòæÁ§∫Ëã±ÊñáÊÑèÊÄù Show English Meaning
                </button>
            </div>
        </div>
        
        <div class="audio-controls">
            <button class="audio-btn" id="read-word-btn" onclick="readWord()">
                üîä ËØªËØçËØ≠ Read Word
            </button>
            <button class="audio-btn" id="read-chinese-btn" onclick="readChineseMeaning()">
                üîä ËØª‰∏≠ÊñáÊÑèÊÄù Read Chinese Meaning
            </button>
            <button class="audio-btn" id="read-english-btn" onclick="readEnglishMeaning()">
                üîä ËØªËã±ÊñáÊÑèÊÄù Read English Meaning
            </button>
        </div>
        
        <div class="navigation">
            <button class="nav-btn" id="prev-btn" onclick="prevPage()" disabled>
                ‚¨ÖÔ∏è ‰∏ä‰∏ÄÈ°µ Previous
            </button>
            <button class="nav-btn" id="next-btn" onclick="nextPage()">
                ‰∏ã‰∏ÄÈ°µ Next ‚û°Ô∏è
            </button>
        </div>
        
        <div id="game-ready" style="display: none;">
            <div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px solid #4CAF50;">
                <h3 style="color: #2e7d32; margin: 0 0 10px 0;">üéâ Â≠¶‰π†ÂÆåÊàêÔºÅLearning Complete!</h3>
                <p style="color: #2e7d32; margin: 0;">Áé∞Âú®ÂèØ‰ª•ÂºÄÂßãÁªÉ‰π†Ê∏∏Êàè‰∫ÜÔºÅNow you can start the practice game!</p>
            </div>
            <button class="start-game-btn" onclick="startGame()">
                üéÆ ÂºÄÂßãÁªÉ‰π†Ê∏∏Êàè Start Practice Game
            </button>
        </div>
    </div>

    <!-- Ê∏∏ÊàèÈÉ®ÂàÜ -->
    <div id="game-section" class="container hidden">
        <h1 style="color: #333; margin-bottom: 30px;">
            üéØ ÂçéËØ≠ËØçÊ±áÁªÉ‰π†Ê∏∏Êàè Chinese Vocabulary Game
        </h1>
        
        <div id="game-area">
            <!-- ËøõÂ∫¶Êù° -->
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span>ËøõÂ∫¶ Progress</span>
                <span id="progress-text">1/10</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 10%"></div>
            </div>
            
            <!-- ÂàÜÊï∞ -->
            <div style="text-align: right; margin-bottom: 20px; font-size: 16px; background: #fff3cd; padding: 10px; border-radius: 5px; border: 1px solid #ffeaa7;">
                üèÖ ÂæóÂàÜ Score: <span id="current-score">0</span>/10
            </div>
            
            <!-- È¢òÁõÆ -->
            <div class="question-box">
                <h3 id="question-number">Á¨¨ 1 È¢ò Question 1</h3>
                <div class="chinese-sentence" id="chinese-text">Âá†‰∏™Â≠©Â≠êÂú®‰∏ÄÊ£µÂ§ßÊ†ë‰∏ãÊãçÁêÉÔºå‰∏Ä‰∏™‰∏ç______ÔºåÁöÆÁêÉË∑≥Ëøõ‰∏ÄÊ£µÂ§ßÊ†ëÁöÑÊ†ëÊ¥ûÈáåÂéª‰∫Ü„ÄÇ</div>
                <div class="english-sentence" id="english-text">Several children were bouncing a ball under a big tree. One of them wasn't ______ and the ball bounced into a hollow in the tree.</div>
            </div>
            
            <!-- ÈÄâÈ°π -->
            <div style="margin: 20px 0;">
                <button class="option-btn" onclick="selectAnswer(0)">A) <span id="option-0">ËÅ™Êòé (c≈çng m√≠ng)</span></button>
                <button class="option-btn" onclick="selectAnswer(1)">B) <span id="option-1">Â∞èÂøÉ (xi«éo xƒ´n)</span></button>
                <button class="option-btn" onclick="selectAnswer(2)">C) <span id="option-2">ÁùÄÊÄ• (zh√°o j√≠)</span></button>
            </div>
            
            <!-- ÁªìÊûúÊòæÁ§∫ -->
            <div id="result-area" style="display: none;"></div>
            
            <!-- ‰∏ã‰∏ÄÈ¢òÊåâÈíÆ -->
            <div style="text-align: center;">
                <button class="nav-btn" id="next-question-btn" onclick="nextQuestion()" style="display: none;">
                    ‰∏ã‰∏ÄÈ¢ò Next Question üöÄ
                </button>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="nav-btn" onclick="backToLearning()">üìñ ËøîÂõûÂ≠¶‰π† Back to Learning</button>
            </div>
        </div>
        
        <!-- ÊúÄÁªàÁªìÊûú -->
        <div id="final-result" style="display: none;"></div>
    </div>

    <script>
        // ËØçÊ±áÊï∞ÊçÆ
        const vocabularyData = [
            {
                word: "ÂäûÊ≥ï",
                pinyin: "b√†n f«é",
                chineseMeaning: "Â§ÑÁêÜ‰∫ãÊÉÖÊàñËß£ÂÜ≥ÈóÆÈ¢òÁöÑÊñπÊ≥ï",
                englishMeaning: "means; method; way (of doing something)"
            },
            {
                word: "ËÑëÁ≠ã",
                pinyin: "n«éo jƒ´n",
                chineseMeaning: "ÊåáÊÄùÁª¥„ÄÅËÆ∞ÂøÜÁ≠âËÉΩÂäõÔºå‰πüÊåá‰∫∫ÁöÑÊÄùÊÉ≥Êàñ‰∏ªÊÑè",
                englishMeaning: "brains; mind"
            },
            {
                word: "ÊµÆ",
                pinyin: "f√∫",
                chineseMeaning: "Âõ†ÊØîÈáçÂ∞èËÄåÊºÇÂú®Ê∂≤‰ΩìÊàñÊ∞î‰ΩìË°®Èù¢ÁöÑÁä∂ÊÄÅ",
                englishMeaning: "to float"
            },
            {
                word: "Ê†ëÊ¥û",
                pinyin: "sh√π d√≤ng",
                chineseMeaning: "Ê†ëÂπ≤‰∏äÂΩ¢ÊàêÁöÑÂçäÂºÄÊîæÂ≠îÁ©¥ÔºåÂèØË¢´Âä®Áâ©‰ΩúÂ∑¢",
                englishMeaning: "tree hollow"
            },
            {
                word: "ÁùÄÊÄ•",
                pinyin: "zh√°o j√≠",
                chineseMeaning: "ÊÄ•Ë∫Å„ÄÅÂøÉ‰∏≠‰∏çÂÆâÔºå‰πüÊúâËµ∂Á¥ß‰πãÊÑè",
                englishMeaning: "to be anxious; to worry"
            },
            {
                word: "ÊÉÖÂΩ¢",
                pinyin: "q√≠ng x√≠ng",
                chineseMeaning: "‰∫ãÊÉÖÁöÑÊ†∑Â≠ê„ÄÅÊÉÖÂÜµÊàñÁä∂ÊÄÅ",
                englishMeaning: "situation; condition; circumstances"
            },
            {
                word: "Â∞èÂøÉ",
                pinyin: "xi«éo xƒ´n",
                chineseMeaning: "ÁïôÁ•û„ÄÅË∞®ÊÖé„ÄÅÁªÜÂøÉ",
                englishMeaning: "careful; to take care; caution"
            },
            {
                word: "Ê†ëÊûù",
                pinyin: "sh√π zhƒ´",
                chineseMeaning: "Ê†ëÊú®ÁöÑÊûùÊù°",
                englishMeaning: "branch (of a tree); twig"
            },
            {
                word: "ËÅ™Êòé",
                pinyin: "c≈çng m√≠ng",
                chineseMeaning: "Êô∫ÂäõÂèëËææÔºåÁêÜËß£ËÉΩÂäõÂº∫ÔºåÊú∫Êïè",
                englishMeaning: "intelligent; clever; bright; smart"
            },
            {
                word: "Êèê",
                pinyin: "t√≠",
                chineseMeaning: "ÂûÇÊâãÊãøÁùÄÊúâÁéØÊàñÊääÁöÑ‰∏úË•øÔºõ‰πüÊåáÊèêËµ∑„ÄÅÊèêÂá∫",
                englishMeaning: "to carry (hanging down with the hand); to lift; to raise; to bring up"
            }
        ];

        // Ê∏∏ÊàèÊï∞ÊçÆ
        const questions = [
            {
                chinese: "Âá†‰∏™Â≠©Â≠êÂú®‰∏ÄÊ£µÂ§ßÊ†ë‰∏ãÊãçÁêÉÔºå‰∏Ä‰∏™‰∏ç______ÔºåÁöÆÁêÉË∑≥Ëøõ‰∏ÄÊ£µÂ§ßÊ†ëÁöÑÊ†ëÊ¥ûÈáåÂéª‰∫Ü„ÄÇ",
                english: "Several children were bouncing a ball under a big tree. One of them wasn't ______ and the ball bounced into a hollow in the tree.",
                options: [
                    { chinese: "ËÅ™Êòé (c≈çng m√≠ng)", english: "intelligent; clever", isCorrect: false },
                    { chinese: "Â∞èÂøÉ (xi«éo xƒ´n)", english: "careful; caution", isCorrect: true },
                    { chinese: "ÁùÄÊÄ• (zh√°o j√≠)", english: "anxious; worry", isCorrect: false }
                ],
                correct: 1
            },
            {
                chinese: "Âá†‰∏™Â≠©Â≠êÂú®‰∏ÄÊ£µÂ§ßÊ†ë‰∏ãÊãçÁêÉÔºå‰∏Ä‰∏™‰∏çÂ∞èÂøÉÔºåÁöÆÁêÉË∑≥Ëøõ‰∏ÄÊ£µÂ§ßÊ†ëÁöÑ______ÈáåÂéª‰∫Ü„ÄÇ",
                english: "Several children were bouncing a ball under a big tree. One of them wasn't careful and the ball bounced into a ______ in the tree.",
                options: [
                    { chinese: "Ê†ëÊûù (sh√π zhƒ´)", english: "branch; twig", isCorrect: false },
                    { chinese: "Ê†ëÊ¥û (sh√π d√≤ng)", english: "tree hollow", isCorrect: true },
                    { chinese: "ËÑëÁ≠ã (n«éo jƒ´n)", english: "brains; mind", isCorrect: false }
                ],
                correct: 1
            },
            {
                chinese: "Â§ßÂÆ∂Âæà______Ôºå‰∫âÁùÄÊääÊâã‰º∏ËøõÊ†ëÊ¥ûÈáåÂéªÊãøÁêÉ„ÄÇ",
                english: "They all got ______ and took turns reaching into the hole for the ball.",
                options: [
                    { chinese: "ËÅ™Êòé (c≈çng m√≠ng)", english: "intelligent; clever", isCorrect: false },
                    { chinese: "Â∞èÂøÉ (xi«éo xƒ´n)", english: "careful; caution", isCorrect: false },
                    { chinese: "ÁùÄÊÄ• (zh√°o j√≠)", english: "anxious; worry", isCorrect: true }
                ],
                correct: 2
            },
            {
                chinese: "Êúâ‰∫∫ÊâæÊù•‰∏ÄÊ†π______Ôºå‰º∏ËøõÊ†ëÊ¥ûÈáåÂéªÊãøÁêÉ„ÄÇ",
                english: "Someone fetched a ______ and tried to hook the ball.",
                options: [
                    { chinese: "Ê†ëÊûù (sh√π zhƒ´)", english: "branch; twig", isCorrect: true },
                    { chinese: "Ê†ëÊ¥û (sh√π d√≤ng)", english: "tree hollow", isCorrect: false },
                    { chinese: "ÂäûÊ≥ï (b√†n f«é)", english: "method; way", isCorrect: false }
                ],
                correct: 0
            },
            {
                chinese: "ÂèØÊòØÁêÉÂ§™Êªë‰∫ÜÔºå‰πüÊ≤°Êúâ______ÊääÂÆÉÊãø‰∏äÊù•„ÄÇ",
                english: "But it was too slippery and they still had no ______ to retrieve it.",
                options: [
                    { chinese: "ÊÉÖÂΩ¢ (q√≠ng x√≠ng)", english: "situation; condition", isCorrect: false },
                    { chinese: "ÂäûÊ≥ï (b√†n f«é)", english: "method; way", isCorrect: true },
                    { chinese: "ËÑëÁ≠ã (n«éo jƒ´n)", english: "brains; mind", isCorrect: false }
                ],
                correct: 1
            },
            {
                chinese: "ÂçéÂõΩÊòØ‰∏™______ÁöÑÂ≠©Â≠êÔºåÂπ≥Êó∂ÊúÄÁà±Âä®ËÑëÁ≠ã„ÄÇ",
                english: "Hua Guo was a ______ child who liked to use his brain.",
                options: [
                    { chinese: "Â∞èÂøÉ (xi«éo xƒ´n)", english: "careful; caution", isCorrect: false },
                    { chinese: "ÁùÄÊÄ• (zh√°o j√≠)", english: "anxious; worry", isCorrect: false },
                    { chinese: "ËÅ™Êòé (c≈çng m√≠ng)", english: "intelligent; clever", isCorrect: true }
                ],
                correct: 2
            },
            {
                chinese: "ÂçéÂõΩÊòØ‰∏™ËÅ™ÊòéÁöÑÂ≠©Â≠êÔºåÂπ≥Êó∂ÊúÄÁà±Âä®______„ÄÇ",
                english: "Hua Guo was a clever child who liked to use his ______.",
                options: [
                    { chinese: "ËÑëÁ≠ã (n«éo jƒ´n)", english: "brains; mind", isCorrect: true },
                    { chinese: "Ê†ëÊûù (sh√π zhƒ´)", english: "branch; twig", isCorrect: false },
                    { chinese: "ÂäûÊ≥ï (b√†n f«é)", english: "method; way", isCorrect: false }
                ],
                correct: 0
            },
            {
                chinese: "‰ªñÁúãÂà∞ËøôÁßç______ÔºåÂè™ËßÅ‰ªñÁúºÁè†Â≠ê‰∏ÄËΩ¨ÔºåÂ∞±ÊÉ≥Âà∞ÂäûÊ≥ï‰∫Ü„ÄÇ",
                english: "When he saw the ______, his eyes turned and he thought of an idea.",
                options: [
                    { chinese: "Ê†ëÊ¥û (sh√π d√≤ng)", english: "tree hollow", isCorrect: false },
                    { chinese: "ÊÉÖÂΩ¢ (q√≠ng x√≠ng)", english: "situation; condition", isCorrect: true },
                    { chinese: "ÁùÄÊÄ• (zh√°o j√≠)", english: "anxious; worry", isCorrect: false }
                ],
                correct: 1
            },
            {
                chinese: "‰ªñË∑ëÂõûÂÆ∂ÂéªÔºå‰∏ç‰πÖÔºå______Êù•‰∫Ü‰∏ÄÊ°∂Ê∞¥„ÄÇ",
                english: "He ran home and soon came back ______ a bucket of water.",
                options: [
                    { chinese: "ÊµÆ (f√∫)", english: "to float", isCorrect: false },
                    { chinese: "Êèê (t√≠)", english: "to carry; to lift", isCorrect: true },
                    { chinese: "Â∞èÂøÉ (xi«éo xƒ´n)", english: "careful; caution", isCorrect: false }
                ],
                correct: 1
            },
            {
                chinese: "‰ªñÊääÊ∞¥ÂÄíËøõÊ†ëÊ¥ûÈáåÔºåÁöÆÁêÉ______‰∫Ü‰∏äÊù•Ôºå‰ªñÂ∞±ËΩªÊòìÂú∞Â∞±ÊãøÂà∞ÁêÉ‰∫Ü„ÄÇ",
                english: "He poured the water into the tree hollow. The ball ______ up, and he easily picked it up.",
                options: [
                    { chinese: "Êèê (t√≠)", english: "to carry; to lift", isCorrect: false },
                    { chinese: "ÊµÆ (f√∫)", english: "to float", isCorrect: true },
                    { chinese: "ËÅ™Êòé (c≈çng m√≠ng)", english: "intelligent; clever", isCorrect: false }
                ],
                correct: 1
            }
        ];

        // Â≠¶‰π†È°µÈù¢ÂèòÈáè
        let currentPage = 0;
        let chineseMeaningShown = false; // Ë∑üË∏™‰∏≠ÊñáÊÑèÊÄùÊòØÂê¶Â∑≤ÊòæÁ§∫
        let englishMeaningShown = false; // Ë∑üË∏™Ëã±ÊñáÊÑèÊÄùÊòØÂê¶Â∑≤ÊòæÁ§∫
        
        // Ê∏∏ÊàèÂèòÈáè
        let currentQuestion = 0;
        let score = 0;
        let answered = false;
        let attempts = 0; // Ê∑ªÂä†Â∞ùËØïÊ¨°Êï∞
        const maxAttempts = 2; // ÊØèÈ¢òÊúÄÂ§ö2Ê¨°Êú∫‰ºö
        let consecutiveWrong = 0; // ËøûÁª≠Á≠îÈîôÁöÑÈ¢òÊï∞

        const celebrationIcons = ['üéâ', 'üåü', 'üéà', 'ü¶Ñ', 'üåà', 'üê∞', 'üê±', 'üéä', 'üí´', 'üèÜ', 'üëè', 'üòä', 'üéÅ', 'üöÄ', 'ü¶ã', 'üå∏'];
        const encouragementMessages = ['Â§™Ê£í‰∫ÜÔºÅ', '‰Ω†ÁúüËÅ™ÊòéÔºÅ', 'ÂÅöÂæóÂæàÂ•ΩÔºÅ', 'ÁªßÁª≠Âä†Ê≤πÔºÅ', 'Amazing!', 'Well done!', 'Excellent!', '‰Ω†ÊòØÊúÄÊ£íÁöÑÔºÅ'];
        const correctSounds = ['Â§™Ê£í‰∫ÜÔºÅ', '‰Ω†ÁúüËÅ™ÊòéÔºÅ', 'ÂÅöÂæóÂæàÂ•ΩÔºÅ', 'ÁªßÁª≠Âä†Ê≤πÔºÅ', 'ÂæàÊ£íÔºÅ', 'Â§™ÂéâÂÆ≥‰∫ÜÔºÅ', 'Á≠îÂØπ‰∫ÜÔºÅ'];
        const incorrectSounds = ['ÂÜçÊù•‰∏ÄÊ¨°', 'Âä†Ê≤π', '‰∏çË¶ÅÁÅ∞ÂøÉÔºåÂÜç‰∏ÄÊ¨°', 'ÁªßÁª≠Âä™Âäõ', 'Ê≤°ÂÖ≥Á≥ªÔºåÂÜçËØïËØï', 'Âä†Ê≤πÔºå‰Ω†ÂèØ‰ª•ÁöÑÔºÅ'];

        // ÂÆåÊï¥‰ΩúÊñáÔºàÊåâÂè•Â≠êÂàÜÂâ≤‰æø‰∫éÈ´ò‰∫ÆÔºâ
        const fullStorySegments = [
            "Âá†‰∏™Â≠©Â≠êÂú®‰∏ÄÊ£µÂ§ßÊ†ë‰∏ãÊãçÁêÉÔºå‰∏Ä‰∏™‰∏çÂ∞èÂøÉÔºåÁöÆÁêÉË∑≥Ëøõ‰∏ÄÊ£µÂ§ßÊ†ëÁöÑÊ†ëÊ¥ûÈáåÂéª‰∫Ü„ÄÇ",
            "Â§ßÂÆ∂ÂæàÁùÄÊÄ•Ôºå‰∫âÁùÄÊääÊâã‰º∏ËøõÊ†ëÊ¥ûÈáåÂéªÊãøÁêÉ„ÄÇ",
            "ÂèØÊòØÔºå‰ªñ‰ª¨ÁöÑÊâãÂ§™Áü≠‰∫ÜÔºåÊ≤°Êúâ‰∫∫ËÉΩÊääÁöÆÁêÉÊãø‰∏äÊù•„ÄÇ",
            "Êúâ‰∫∫ÊâæÊù•‰∏ÄÊ†πÊ†ëÊûùÔºå‰º∏ËøõÊ†ëÊ¥ûÈáåÂéªÊãøÁêÉÔºåÂèØÊòØÁêÉÂ§™Êªë‰∫ÜÔºå‰πüÊ≤°ÊúâÂäûÊ≥ïÊääÂÆÉÊãø‰∏äÊù•„ÄÇ",
            "Â§ßÂÆ∂ÊÄ•ÂæóÂø´Âì≠Âá∫Êù•‰∫Ü„ÄÇ",
            "ÂçéÂõΩÊòØ‰∏™ËÅ™ÊòéÁöÑÂ≠©Â≠êÔºåÂπ≥Êó∂ÊúÄÁà±Âä®ËÑëÁ≠ã„ÄÇ",
            "‰ªñÁúãÂà∞ËøôÁßçÊÉÖÂΩ¢ÔºåÂè™ËßÅ‰ªñÁúºÁè†Â≠ê‰∏ÄËΩ¨ÔºåÂ∞±ÊÉ≥Âà∞ÂäûÊ≥ï‰∫Ü„ÄÇ",
            "‰ªñË∑ëÂõûÂÆ∂ÂéªÔºå‰∏ç‰πÖÔºåÊèêÊù•‰∫Ü‰∏ÄÊ°∂Ê∞¥„ÄÇ",
            "‰ªñÊääÊ∞¥ÂÄíËøõÊ†ëÊ¥ûÈáåÔºåÁöÆÁêÉÊµÆ‰∫Ü‰∏äÊù•Ôºå‰ªñÂ∞±ËΩªÊòìÂú∞Â∞±ÊãøÂà∞ÁêÉ‰∫Ü„ÄÇ"
        ];

        const fullStoryEnglishSegments = [
            "Several children were bouncing a ball under a big tree.",
            "One of them wasn't careful and the ball bounced into a hollow in the tree.",
            "They all got anxious and took turns reaching into the hole for the ball, but their arms were too short and nobody could get it out.",
            "Someone fetched a tree branch and tried to hook the ball, but it was too slippery and they still had no way to retrieve it.",
            "The children were so worried that they were almost in tears.",
            "Hua Guo was a clever child who liked to use his brain.",
            "When he saw the situation, his eyes turned and he thought of an idea.",
            "He ran home and soon came back carrying a bucket of water.",
            "He poured the water into the tree hollow.",
            "The ball floated up, and he easily picked it up."
        ];

        // ËØ≠Èü≥ÂêàÊàêÂäüËÉΩÔºà‰ºòÂåñÁâàÔºâ
        function speak(text, lang = 'zh-CN') {
            return new Promise((resolve) => {
                if ('speechSynthesis' in window) {
                    // ÂÅúÊ≠¢ÂΩìÂâçÊí≠Êîæ
                    speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = lang;
                    utterance.rate = 0.8; // Â≠¶‰π†Êó∂Á®çÊÖ¢ÔºåÊïÖ‰∫ãÊúóËØªÊó∂‰ºöÁâπÂà´Ë∞ÉÊï¥
                    utterance.volume = 1;
                    
                    // ÂØπ‰∫é‰∏≠ÊñáÔºåÂ∞ùËØïÈÄâÊã©‰∏≠ÊñáËØ≠Èü≥
                    if (lang === 'zh-CN') {
                        const voices = speechSynthesis.getVoices();
                        const chineseVoice = voices.find(voice => 
                            voice.lang.includes('zh') || 
                            voice.name.includes('Chinese') ||
                            voice.name.includes('‰∏≠Êñá')
                        );
                        if (chineseVoice) {
                            utterance.voice = chineseVoice;
                        }
                    }
                    
                    utterance.onend = () => {
                        resolve();
                    };
                    
                    utterance.onerror = () => {
                        resolve();
                    };
                    
                    speechSynthesis.speak(utterance);
                } else {
                    alert('Êä±Ê≠âÔºåÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅËØ≠Èü≥ÂäüËÉΩ„ÄÇSorry, your browser doesn\'t support speech synthesis.');
                    resolve();
                }
            });
        }

        // ÊïÖ‰∫ãÊúóËØª‰∏ìÁî®ËØ≠Èü≥ÂáΩÊï∞ÔºàÊ≠£Â∏∏ËØ≠ÈÄüÔºâ
        function speakStory(text, lang = 'zh-CN') {
            return new Promise((resolve) => {
                if ('speechSynthesis' in window) {
                    speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = lang;
                    utterance.rate = 1.0; // Ê≠£Â∏∏ËØ≠ÈÄü
                    utterance.volume = 1;
                    
                    if (lang === 'zh-CN') {
                        const voices = speechSynthesis.getVoices();
                        const chineseVoice = voices.find(voice => 
                            voice.lang.includes('zh') || 
                            voice.name.includes('Chinese') ||
                            voice.name.includes('‰∏≠Êñá')
                        );
                        if (chineseVoice) {
                            utterance.voice = chineseVoice;
                        }
                    }
                    
                    utterance.onend = () => {
                        resolve();
                    };
                    
                    utterance.onerror = () => {
                        resolve();
                    };
                    
                    speechSynthesis.speak(utterance);
                } else {
                    resolve();
                }
            });
        }

        // ÊúóËØªÂäüËÉΩÔºàÂàÜÂºÄËØªÔºåÈÅøÂÖçÊãºÈü≥ÈóÆÈ¢òÔºâ
        async function readWord() {
            const btn = document.getElementById('read-word-btn');
            btn.classList.add('playing');
            
            const vocab = vocabularyData[currentPage];
            // Âè™ËØª‰∏≠ÊñáËØçËØ≠Ôºå‰∏çËØªÊãºÈü≥
            await speak(vocab.word, 'zh-CN');
            
            btn.classList.remove('playing');
        }

        async function readChineseMeaning() {
            const btn = document.getElementById('read-chinese-btn');
            btn.classList.add('playing');
            
            const vocab = vocabularyData[currentPage];
            await speak(vocab.chineseMeaning, 'zh-CN');
            
            btn.classList.remove('playing');
        }

        async function readEnglishMeaning() {
            const btn = document.getElementById('read-english-btn');
            btn.classList.add('playing');
            
            const vocab = vocabularyData[currentPage];
            await speak(vocab.englishMeaning, 'en-US');
            
            btn.classList.remove('playing');
        }

        // Â≠¶‰π†ÂäüËÉΩ
        // ÊòæÁ§∫Âπ∂ÊúóËØª‰∏≠ÊñáÊÑèÊÄù
        async function showChineseMeaning() {
            const chineseMeaning = document.getElementById('chinese-meaning');
            const btn = document.getElementById('show-chinese-btn');
            const vocab = vocabularyData[currentPage];
            
            // ÊòæÁ§∫ÊÑèÊÄù
            chineseMeaning.style.display = 'block';
            
            // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
            btn.style.background = 'linear-gradient(45deg, #4CAF50, #45a049)';
            btn.textContent = 'üîä Ê≠£Âú®ÊúóËØª‰∏≠ÊñáÊÑèÊÄù...';
            btn.disabled = true;
            
            // ÊúóËØª‰∏≠ÊñáÊÑèÊÄù
            await speak(vocab.chineseMeaning, 'zh-CN');
            
            // ÊúóËØªÂÆåÊàêÂêéÊõ¥Êñ∞ÊåâÈíÆÂíåÁä∂ÊÄÅ
            btn.textContent = '‚úÖ Â∑≤ÊòæÁ§∫Âπ∂ÊúóËØª‰∏≠ÊñáÊÑèÊÄù';
            chineseMeaningShown = true;
            updateNextButtonState();
        }

        // ÊòæÁ§∫Âπ∂ÊúóËØªËã±ÊñáÊÑèÊÄù
        async function showEnglishMeaning() {
            const englishMeaning = document.getElementById('english-meaning');
            const btn = document.getElementById('show-english-btn');
            const vocab = vocabularyData[currentPage];
            
            // ÊòæÁ§∫ÊÑèÊÄù
            englishMeaning.style.display = 'block';
            
            // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
            btn.style.background = 'linear-gradient(45deg, #4CAF50, #45a049)';
            btn.textContent = 'üîä Reading English Meaning...';
            btn.disabled = true;
            
            // ÊúóËØªËã±ÊñáÊÑèÊÄù
            await speak(vocab.englishMeaning, 'en-US');
            
            // ÊúóËØªÂÆåÊàêÂêéÊõ¥Êñ∞ÊåâÈíÆÂíåÁä∂ÊÄÅ
            btn.textContent = '‚úÖ Â∑≤ÊòæÁ§∫Âπ∂ÊúóËØªËã±ÊñáÊÑèÊÄù';
            englishMeaningShown = true;
            updateNextButtonState();
        }

        // Êõ¥Êñ∞‰∏ã‰∏ÄÈ°µÊåâÈíÆÁä∂ÊÄÅ
        function updateNextButtonState() {
            const nextBtn = document.getElementById('next-btn');
            const gameReadyDiv = document.getElementById('game-ready');
            
            if (chineseMeaningShown && englishMeaningShown) {
                // ‰∏§‰∏™ÊÑèÊÄùÈÉΩÂ∑≤ÊòæÁ§∫ÔºåÂèØ‰ª•ËøõÂÖ•‰∏ã‰∏ÄÈ°µ
                if (currentPage === vocabularyData.length - 1) {
                    nextBtn.style.display = 'none';
                    gameReadyDiv.style.display = 'block';
                } else {
                    nextBtn.style.display = 'inline-block';
                    nextBtn.disabled = false;
                    nextBtn.style.background = '#007bff';
                    nextBtn.textContent = '‰∏ã‰∏ÄÈ°µ Next ‚û°Ô∏è';
                }
            } else {
                // ËøòÊúâÊÑèÊÄùÊú™ÊòæÁ§∫ÔºåÁ¶ÅÁî®‰∏ã‰∏ÄÈ°µÊåâÈíÆ
                nextBtn.disabled = true;
                nextBtn.style.background = '#ccc';
                nextBtn.textContent = 'ËØ∑ÂÖàÊü•Áúã‰∏§‰∏™ÊÑèÊÄù Please check both meanings first';
                gameReadyDiv.style.display = 'none';
            }
        }

        function loadVocabPage() {
            const vocab = vocabularyData[currentPage];
            
            document.getElementById('vocab-number').textContent = `${currentPage + 1}.`;
            document.getElementById('vocab-word').textContent = vocab.word;
            document.getElementById('vocab-pinyin').textContent = vocab.pinyin;
            document.getElementById('chinese-meaning').textContent = vocab.chineseMeaning;
            document.getElementById('english-meaning').textContent = vocab.englishMeaning;
            
            // ÈáçÁΩÆÊÑèÊÄùÊòæÁ§∫Áä∂ÊÄÅ
            document.getElementById('chinese-meaning').style.display = 'none';
            document.getElementById('english-meaning').style.display = 'none';
            chineseMeaningShown = false;
            englishMeaningShown = false;
            
            // ÈáçÁΩÆÊåâÈíÆÁä∂ÊÄÅ
            const showChineseBtn = document.getElementById('show-chinese-btn');
            const showEnglishBtn = document.getElementById('show-english-btn');
            
            showChineseBtn.style.background = 'linear-gradient(45deg, #e91e63, #ad1457)';
            showChineseBtn.textContent = 'üëÅÔ∏è ÊòæÁ§∫‰∏≠ÊñáÊÑèÊÄù Show Chinese Meaning';
            showChineseBtn.disabled = false;
            
            showEnglishBtn.style.background = 'linear-gradient(45deg, #3f51b5, #283593)';
            showEnglishBtn.textContent = 'üëÅÔ∏è ÊòæÁ§∫Ëã±ÊñáÊÑèÊÄù Show English Meaning';
            showEnglishBtn.disabled = false;
            
            document.getElementById('page-indicator').textContent = `Á¨¨ ${currentPage + 1} È°µ Page ${currentPage + 1} / 10`;
            
            // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
            document.getElementById('prev-btn').disabled = currentPage === 0;
            
            // Ë∞ÉÁî®Êõ¥Êñ∞‰∏ã‰∏ÄÈ°µÊåâÈíÆÁä∂ÊÄÅÔºàÈªòËÆ§Á¶ÅÁî®Ôºâ
            updateNextButtonState();
        }

        function prevPage() {
            if (currentPage > 0) {
                currentPage--;
                loadVocabPage();
            }
        }

        function nextPage() {
            if (currentPage < vocabularyData.length - 1) {
                currentPage++;
                loadVocabPage();
            }
        }

        function showSection(sectionId) {
            document.getElementById('learning-section').classList.add('hidden');
            document.getElementById('game-section').classList.add('hidden');
            document.getElementById(sectionId).classList.remove('hidden');
        }

        function backToLearning() {
            // ÈáçÁΩÆÊ∏∏ÊàèÁä∂ÊÄÅ
            currentQuestion = 0;
            score = 0;
            answered = false;
            attempts = 0;
            consecutiveWrong = 0;
            document.getElementById('game-area').style.display = 'block';
            document.getElementById('final-result').style.display = 'none';
            showSection('learning-section');
        }

        // Ê∏∏ÊàèÂäüËÉΩ
        function startGame() {
            currentQuestion = 0;
            score = 0;
            answered = false;
            attempts = 0;
            consecutiveWrong = 0;
            showSection('game-section');
            document.getElementById('game-area').style.display = 'block';
            document.getElementById('final-result').style.display = 'none';
            loadQuestion();
        }

        function loadQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('question-number').textContent = `Á¨¨ ${currentQuestion + 1} È¢ò Question ${currentQuestion + 1}`;
            document.getElementById('chinese-text').textContent = q.chinese;
            document.getElementById('english-text').textContent = q.english;
            
            for (let i = 0; i < 3; i++) {
                const optionElement = document.getElementById(`option-${i}`);
                optionElement.innerHTML = `
                    <div style="font-weight: bold; margin-bottom: 5px;">${q.options[i].chinese}</div>
                    <div style="font-size: 14px; color: #666; font-style: italic;">${q.options[i].english}</div>
                `;
            }
            
            // Êõ¥Êñ∞ËøõÂ∫¶
            document.getElementById('progress-text').textContent = `${currentQuestion + 1}/10`;
            document.getElementById('progress-fill').style.width = `${((currentQuestion + 1) / 10) * 100}%`;
            document.getElementById('current-score').textContent = score;
            
            // ÈáçÁΩÆÊåâÈíÆÁä∂ÊÄÅ
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                btn.className = 'option-btn';
                btn.disabled = false;
            });
            
            document.getElementById('result-area').style.display = 'none';
            document.getElementById('next-question-btn').style.display = 'none';
            answered = false;
            attempts = 0; // ÈáçÁΩÆÂ∞ùËØïÊ¨°Êï∞
        }

        function selectAnswer(selected) {
            if (answered) return;
            
            attempts++;
            const q = questions[currentQuestion];
            const isCorrect = selected === q.correct;
            
            if (isCorrect) {
                // Á≠îÂØπ‰∫Ü
                answered = true;
                score++;
                consecutiveWrong = 0; // ÈáçÁΩÆËøûÁª≠ÈîôËØØËÆ°Êï∞
                const buttons = document.querySelectorAll('.option-btn');
                buttons.forEach(btn => btn.disabled = true);
                buttons[q.correct].classList.add('correct');
                
                const randomIcon = celebrationIcons[Math.floor(Math.random() * celebrationIcons.length)];
                const randomMessage = encouragementMessages[Math.floor(Math.random() * encouragementMessages.length)];
                const randomSound = correctSounds[Math.floor(Math.random() * correctSounds.length)];
                
                // Êí≠ÊîæÊàêÂäüÂ£∞Èü≥
                speak(randomSound, 'zh-CN');
                
                const resultArea = document.getElementById('result-area');
                resultArea.innerHTML = `
                    <div class="result-box success">
                        <div class="celebration">${randomIcon}</div>
                        <div style="font-size: 24px; font-weight: bold; margin: 10px 0;">${randomMessage}</div>
                        <div>Á≠îÂØπ‰∫ÜÔºÅCorrect! ${attempts === 1 ? '‰∏ÄÊ¨°Â∞±ÂØπ‰∫ÜÔºÅ' : 'Á¨¨‰∫åÊ¨°Á≠îÂØπ‰∫ÜÔºÅ'}</div>
                    </div>
                `;
                resultArea.style.display = 'block';
                
                // ÊòæÁ§∫‰∏ã‰∏ÄÈ¢òÊåâÈíÆ
                const nextBtn = document.getElementById('next-question-btn');
                if (currentQuestion < questions.length - 1) {
                    nextBtn.textContent = '‰∏ã‰∏ÄÈ¢ò Next Question üöÄ';
                } else {
                    nextBtn.textContent = 'Êü•ÁúãÁªìÊûú See Results üéØ';
                }
                nextBtn.style.display = 'block';
                
            } else {
                // Á≠îÈîô‰∫Ü
                const buttons = document.querySelectorAll('.option-btn');
                buttons[selected].classList.add('incorrect');
                
                if (attempts < maxAttempts) {
                    // ËøòÊúâÊú∫‰ºöÔºåÊòæÁ§∫ÈºìÂä±‰ø°ÊÅØÂíåÂÜçËØï‰∏ÄÊ¨°ÊåâÈíÆ
                    const randomSound = incorrectSounds[Math.floor(Math.random() * incorrectSounds.length)];
                    speak(randomSound, 'zh-CN');
                    
                    const resultArea = document.getElementById('result-area');
                    resultArea.innerHTML = `
                        <div class="result-box error">
                            <div style="font-size: 40px; margin: 10px 0;">üí™</div>
                            <div style="font-weight: bold; margin: 10px 0;">Ê≤°ÂÖ≥Á≥ªÔºÅËøòÊúâ‰∏ÄÊ¨°Êú∫‰ºöÔºÅ</div>
                            <div style="margin: 15px 0;">Don't worry! You have one more chance!</div>
                            <button class="nav-btn" onclick="tryAgain()" style="background: #ff9800; margin-top: 15px;">
                                üîÑ ÂÜçËØï‰∏ÄÊ¨° Try Again
                            </button>
                        </div>
                    `;
                    resultArea.style.display = 'block';
                    
                    // Á¶ÅÁî®Â∑≤ÈÄâÊã©ÁöÑÈîôËØØÁ≠îÊ°à
                    buttons[selected].disabled = true;
                    
                } else {
                    // ‰∏§Ê¨°ÈÉΩÁ≠îÈîô‰∫Ü
                    answered = true;
                    consecutiveWrong++; // Â¢ûÂä†ËøûÁª≠ÈîôËØØËÆ°Êï∞
                    buttons.forEach(btn => btn.disabled = true);
                    buttons[q.correct].classList.add('correct');
                    
                    // Ê£ÄÊü•ÊòØÂê¶ËøûÁª≠ÈîôËØØ3È¢ò
                    if (consecutiveWrong >= 3) {
                        speak('ËøûÁª≠Á≠îÈîô‰∏âÈ¢òÔºåËÆ©Êàë‰ª¨ÈáçÊñ∞ÂºÄÂßãÂ≠¶‰π†ÂêßÔºÅ', 'zh-CN');
                        
                        const resultArea = document.getElementById('result-area');
                        resultArea.innerHTML = `
                            <div class="result-box error">
                                <div style="font-size: 40px; margin: 10px 0;">üòÖ</div>
                                <div style="font-weight: bold; margin: 10px 0; color: #ff5722;">ËøûÁª≠Á≠îÈîô‰∏âÈ¢ò‰∫ÜÔºÅ</div>
                                <div style="margin: 15px 0;">ËÆ©Êàë‰ª¨ÈáçÊñ∞Â≠¶‰π†Ëøô‰∫õËØçÊ±áÂêßÔºÅ<br>Let's review these vocabulary words again!</div>
                                <button class="nav-btn" onclick="restartGame()" style="background: #ff5722; margin-top: 15px;">
                                    üîÑ ÈáçÊñ∞ÂºÄÂßãÊ∏∏Êàè Restart Game
                                </button>
                            </div>
                        `;
                        resultArea.style.display = 'block';
                        return;
                    }
                    
                    speak('Ê≤°ÂÖ≥Á≥ªÔºåÊàë‰ª¨Êù•ÁúãÁúãÊ≠£Á°ÆÁ≠îÊ°àÂêß', 'zh-CN');
                    
                    const correctAnswer = q.options[q.correct];
                    const resultArea = document.getElementById('result-area');
                    resultArea.innerHTML = `
                        <div class="result-box error">
                            <div style="font-size: 40px; margin: 10px 0;">ü§î</div>
                            <div style="font-weight: bold; margin: 10px 0;">Ê≤°ÂÖ≥Á≥ªÔºåÊàë‰ª¨Â≠¶Âà∞‰∫ÜÊñ∞Áü•ËØÜÔºÅ</div>
                            <div>Ê≠£Á°ÆÁ≠îÊ°àÊòØÔºöCorrect answer is: 
                                <div style="margin-top: 10px; padding: 10px; background: rgba(76, 175, 80, 0.1); border-radius: 8px;">
                                    <strong>${correctAnswer.chinese}</strong><br>
                                    <span style="font-size: 14px; color: #666; font-style: italic;">${correctAnswer.english}</span>
                                </div>
                            </div>
                        </div>
                    `;
                    resultArea.style.display = 'block';
                    
                    // ÊòæÁ§∫‰∏ã‰∏ÄÈ¢òÊåâÈíÆ
                    const nextBtn = document.getElementById('next-question-btn');
                    if (currentQuestion < questions.length - 1) {
                        nextBtn.textContent = '‰∏ã‰∏ÄÈ¢ò Next Question üöÄ';
                    } else {
                        nextBtn.textContent = 'Êü•ÁúãÁªìÊûú See Results üéØ';
                    }
                    nextBtn.style.display = 'block';
                }
            }
            
            document.getElementById('current-score').textContent = score;
        }

        // ÈáçÊñ∞ÂºÄÂßãÊ∏∏ÊàèÂáΩÊï∞
        function restartGame() {
            currentQuestion = 0;
            score = 0;
            answered = false;
            attempts = 0;
            consecutiveWrong = 0;
            document.getElementById('result-area').style.display = 'none';
            loadQuestion();
        }

        function tryAgain() {
            // ÈáçÁΩÆÁªìÊûúÂå∫ÂüüÔºåËÆ©Â≠©Â≠êÂèØ‰ª•ÂÜçÈÄâÊã©
            document.getElementById('result-area').style.display = 'none';
            
            // ÈáçÊñ∞ÂêØÁî®Êú™Ë¢´Á¶ÅÁî®ÁöÑÊåâÈíÆ
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                if (!btn.disabled) {
                    btn.classList.remove('incorrect');
                }
            });
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion();
            } else {
                showFinalResult();
            }
        }

        function showFinalResult() {
            const percentage = Math.round((score / questions.length) * 100);
            let icon, message, stars;
            
            if (percentage >= 80) {
                icon = 'üèÜ';
                message = 'üéâ Â§™Ê£í‰∫ÜÔºÅ‰Ω†ÊòØÂçéËØ≠Â∞èÂ§©ÊâçÔºÅ Excellent! You\'re a Chinese vocabulary star! üéâ';
                stars = '‚≠ê'.repeat(5);
            } else if (percentage >= 60) {
                icon = 'üåü';
                message = 'üëè ÂÅöÂæóÂæàÂ•ΩÔºÅÁªßÁª≠Âä†Ê≤πÔºÅ Well done! Keep it up! üëè';
                stars = '‚≠ê'.repeat(Math.floor(percentage / 20));
            } else {
                icon = 'üéà';
                message = 'üí™ ÁªßÁª≠ÁªÉ‰π†Ôºå‰Ω†‰ºöË∂äÊù•Ë∂äÊ£íÔºÅ Keep practicing, you\'ll get better! üí™';
                stars = '‚≠ê'.repeat(Math.max(1, Math.floor(percentage / 20)));
            }
            
            document.getElementById('game-area').style.display = 'none';
            document.getElementById('final-result').innerHTML = `
                <div class="final-score">
                    <div style="font-size: 80px; margin: 20px 0;">${icon}</div>
                    <h2 style="margin: 20px 0;">Ê∏∏ÊàèÂÆåÊàêÔºÅGame Complete!</h2>
                    <div style="font-size: 40px; margin: 20px 0;">${stars}</div>
                    <div style="font-size: 24px; margin: 15px 0;">‰Ω†ÁöÑÂæóÂàÜ Your Score: ${score}/${questions.length}</div>
                    <div style="font-size: 20px; margin: 15px 0;">Ê≠£Á°ÆÁéá Accuracy: ${percentage}%</div>
                    <div style="font-size: 18px; margin: 25px 0; background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px;">
                        ${message}
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 15px; margin: 25px 0; border: 2px solid rgba(255,255,255,0.3);">
                        <h3 style="margin: 0 0 15px 0; color: #ffeb3b;">üìñ Âê¨ÂÆåÊï¥ÊïÖ‰∫ã Listen to Full Story</h3>
                        <p style="margin: 0 0 15px 0; font-size: 16px;">Áé∞Âú®Êù•Âê¨Âê¨Ëøô‰∏™ËÅ™ÊòéÁöÑÂçéÂõΩÂ¶Ç‰ΩïÂèñÁêÉÁöÑÂÆåÊï¥ÊïÖ‰∫ãÂêßÔºÅ</p>
                        
                        <!-- ‰∏≠ÊñáÊïÖ‰∫ãÊñáÂ≠óÂå∫Âüü -->
                        <div id="chinese-story-area" style="display: none; background: rgba(255,255,255,0.9); padding: 20px; border-radius: 10px; margin: 15px 0; color: #333; text-align: left; line-height: 2;">
                            <h4 style="color: #d32f2f; margin: 0 0 15px 0;">üìñ ‰∏≠ÊñáÊïÖ‰∫ã Chinese Story</h4>
                            <div id="chinese-story-text" style="font-size: 18px;">
                                ${fullStorySegments.map((segment, index) => 
                                    `<span id="chinese-segment-${index}" style="transition: all 0.3s ease;">${segment}</span>`
                                ).join('')}
                            </div>
                        </div>
                        
                        <!-- Ëã±ÊñáÊïÖ‰∫ãÊñáÂ≠óÂå∫Âüü -->
                        <div id="english-story-area" style="display: none; background: rgba(255,255,255,0.9); padding: 20px; border-radius: 10px; margin: 15px 0; color: #333; text-align: left; line-height: 2;">
                            <h4 style="color: #1976d2; margin: 0 0 15px 0;">üìñ Ëã±ÊñáÊïÖ‰∫ã English Story</h4>
                            <div id="english-story-text" style="font-size: 18px;">
                                ${fullStoryEnglishSegments.map((segment, index) => 
                                    `<span id="english-segment-${index}" style="transition: all 0.3s ease;">${segment}</span>`
                                ).join(' ')}
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                            <button class="nav-btn" onclick="readFullStoryChinese()" id="chinese-story-btn" style="background: #ff6b6b; flex: 1; min-width: 140px;">
                                üîä ËØª‰∏≠ÊñáÊïÖ‰∫ã Read Chinese Story
                            </button>
                            <button class="nav-btn" onclick="readFullStoryEnglish()" id="english-story-btn" style="background: #4CAF50; flex: 1; min-width: 140px;">
                                üîä ËØªËã±ÊñáÊïÖ‰∫ã Read English Story
                            </button>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                        <button class="nav-btn" onclick="startGame()" style="margin: 5px;">üîÑ ÂÜçÁé©‰∏ÄÊ¨° Play Again</button>
                        <button class="nav-btn" onclick="backToLearning()" style="margin: 5px;">üìñ ËøîÂõûÂ≠¶‰π† Back to Learning</button>
                    </div>
                </div>
            `;
            document.getElementById('final-result').style.display = 'block';
        }

        // ËØªÂÆåÊï¥‰∏≠ÊñáÊïÖ‰∫ãÔºàÂ∏¶È´ò‰∫ÆÔºåÊ≠£Â∏∏ËØ≠ÈÄüÊåâÂè•Â≠êÔºâ
        async function readFullStoryChinese() {
            const btn = document.getElementById('chinese-story-btn');
            const storyArea = document.getElementById('chinese-story-area');
            
            // ÊòæÁ§∫ÊïÖ‰∫ãÊñáÂ≠ó
            storyArea.style.display = 'block';
            
            btn.style.background = '#45a049';
            btn.textContent = 'üîä Ê≠£Âú®ÊúóËØª‰∏≠ÊñáÊïÖ‰∫ã...';
            btn.disabled = true;
            
            // ÈáçÁΩÆÊâÄÊúâÊÆµËêΩÊ†∑Âºè
            resetHighlight('chinese');
            
            // ÈÄêÂè•ÊúóËØªÂπ∂È´ò‰∫Æ
            for (let i = 0; i < fullStorySegments.length; i++) {
                // È´ò‰∫ÆÂΩìÂâçÂè•Â≠ê
                highlightSegment('chinese', i, true);
                
                // ‰ª•Ê≠£Â∏∏ËØ≠ÈÄüÊúóËØªÂΩìÂâçÂè•Â≠ê
                await speakStory(fullStorySegments[i], 'zh-CN');
                
                // ÂèñÊ∂àÈ´ò‰∫Æ
                highlightSegment('chinese', i, false);
                
                // Áü≠ÊöÇÂÅúÈ°ø
                await new Promise(resolve => setTimeout(resolve, 300));
            }
            
            btn.style.background = '#ff6b6b';
            btn.textContent = 'üîä ËØª‰∏≠ÊñáÊïÖ‰∫ã Read Chinese Story';
            btn.disabled = false;
        }

        // ËØªÂÆåÊï¥Ëã±ÊñáÊïÖ‰∫ãÔºàÂ∏¶È´ò‰∫ÆÔºåÊ≠£Â∏∏ËØ≠ÈÄüÊåâÂè•Â≠êÔºâ
        async function readFullStoryEnglish() {
            const btn = document.getElementById('english-story-btn');
            const storyArea = document.getElementById('english-story-area');
            
            // ÊòæÁ§∫ÊïÖ‰∫ãÊñáÂ≠ó
            storyArea.style.display = 'block';
            
            btn.style.background = '#388e3c';
            btn.textContent = 'üîä Reading English Story...';
            btn.disabled = true;
            
            // ÈáçÁΩÆÊâÄÊúâÊÆµËêΩÊ†∑Âºè
            resetHighlight('english');
            
            // ÈÄêÂè•ÊúóËØªÂπ∂È´ò‰∫Æ
            for (let i = 0; i < fullStoryEnglishSegments.length; i++) {
                // È´ò‰∫ÆÂΩìÂâçÂè•Â≠ê
                highlightSegment('english', i, true);
                
                // ‰ª•Ê≠£Â∏∏ËØ≠ÈÄüÊúóËØªÂΩìÂâçÂè•Â≠ê
                await speakStory(fullStoryEnglishSegments[i], 'en-US');
                
                // ÂèñÊ∂àÈ´ò‰∫Æ
                highlightSegment('english', i, false);
                
                // Áü≠ÊöÇÂÅúÈ°ø
                await new Promise(resolve => setTimeout(resolve, 300));
            }
            
            btn.style.background = '#4CAF50';
            btn.textContent = 'üîä ËØªËã±ÊñáÊïÖ‰∫ã Read English Story';
            btn.disabled = false;
        }

        // È´ò‰∫ÆÊåáÂÆöÊÆµËêΩ
        function highlightSegment(language, index, highlight) {
            const segmentId = `${language}-segment-${index}`;
            const element = document.getElementById(segmentId);
            
            if (element) {
                if (highlight) {
                    element.style.backgroundColor = language === 'chinese' ? '#ffeb3b' : '#81c784';
                    element.style.color = '#333';
                    element.style.fontWeight = 'bold';
                    element.style.padding = '2px 4px';
                    element.style.borderRadius = '4px';
                    element.style.boxShadow = '0 2px 4px rgba(0,0,0,0.2)';
                } else {
                    element.style.backgroundColor = 'transparent';
                    element.style.color = '#333';
                    element.style.fontWeight = 'normal';
                    element.style.padding = '0';
                    element.style.borderRadius = '0';
                    element.style.boxShadow = 'none';
                }
            }
        }

        // ÈáçÁΩÆÊâÄÊúâÊÆµËêΩÈ´ò‰∫Æ
        function resetHighlight(language) {
            const segments = language === 'chinese' ? fullStorySegments : fullStoryEnglishSegments;
            for (let i = 0; i < segments.length; i++) {
                highlightSegment(language, i, false);
            }
        }

        // ÂàùÂßãÂåñ - Á≠âÂæÖËØ≠Èü≥Â∫ìÂä†ËΩΩ
        window.addEventListener('load', () => {
            // Á°Æ‰øùËØ≠Èü≥Â∫ìÂä†ËΩΩÂÆåÊàê
            if ('speechSynthesis' in window) {
                speechSynthesis.getVoices();
                // ÁõëÂê¨ËØ≠Èü≥Â∫ìÂä†ËΩΩÂÆåÊàê‰∫ã‰ª∂
                speechSynthesis.onvoiceschanged = () => {
                    console.log('ËØ≠Èü≥Â∫ìÂä†ËΩΩÂÆåÊàê');
                };
            }
            loadVocabPage();
        });
    </script>
</body>
</html>