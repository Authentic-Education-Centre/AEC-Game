<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Learning Complete - Comprehensive 12-Chapter Educational Game</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root">
        <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif;">
            <div style="text-align: center;">
                <div style="border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 2s linear infinite; margin: 0 auto 20px;"></div>
                <p>Loading Chinese Learning Complete...</p>
            </div>
        </div>
        <style>
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        </style>
    </div>

    <script type="text/babel">
        const { useState } = React;

        const ChineseLearningCompleteApp = () => {
          const [currentChapter, setCurrentChapter] = useState('menu');
          const [currentPhase, setCurrentPhase] = useState('learning');
          const [currentWordIndex, setCurrentWordIndex] = useState(0);
          const [viewedChinese, setViewedChinese] = useState(false);
          const [viewedEnglish, setViewedEnglish] = useState(false);
          const [gameAnswers, setGameAnswers] = useState({});
          const [wrongCount, setWrongCount] = useState(0);
          const [currentQuestion, setCurrentQuestion] = useState(0);
          const [gameCompleted, setGameCompleted] = useState(false);
          const [readingLanguage, setReadingLanguage] = useState('');
          const [currentSentence, setCurrentSentence] = useState(-1);
          const [isReading, setIsReading] = useState(false);

          // All 12 chapters with complete data
          const chaptersData = {
            chapter1: {
              vocabulary: [
                { word: '办法', pinyin: 'bàn fǎ', chinese: '处理事情或解决问题的方法', english: 'way; method; solution' },
                { word: '脑筋', pinyin: 'nǎo jīn', chinese: '思维和理解能力；想法', english: 'brain; mind; ideas' },
                { word: '浮', pinyin: 'fú', chinese: '漂在水面上，不下沉', english: 'to float' },
                { word: '树洞', pinyin: 'shù dòng', chinese: '树干上的空洞', english: 'tree hollow' },
                { word: '着急', pinyin: 'zháo jí', chinese: '心里紧张，不安', english: 'anxious; worried' },
                { word: '情形', pinyin: 'qíng xíng', chinese: '事情的状况或样子', english: 'situation; condition' },
                { word: '小心', pinyin: 'xiǎo xīn', chinese: '注意，谨慎，不粗心', english: 'careful; cautious' },
                { word: '树枝', pinyin: 'shù zhī', chinese: '树上的枝条', english: 'tree branch' },
                { word: '聪明', pinyin: 'cōng míng', chinese: '头脑灵活，理解力强', english: 'clever; smart' },
                { word: '提', pinyin: 'tí', chinese: '用手拿着（垂下的东西）', english: 'to carry (by hand); to lift' }
              ],
              gameQuestions: [
                { 
                  text: '一个不___，皮球跳进一棵大树的树洞里去了。', 
                  english: 'One of them was not ___, and the ball bounced into a tree hollow.',
                  answer: '小心', 
                  answerEnglish: 'careful',
                  options: ['聪明', '小心', '着急', '办法'],
                  optionsEnglish: ['clever', 'careful', 'anxious', 'method']
                },
                { 
                  text: '皮球跳进一棵大树的___里去了。', 
                  english: 'The ball bounced into a ___ of a big tree.',
                  answer: '树洞', 
                  answerEnglish: 'tree hollow',
                  options: ['树枝', '情形', '树洞', '脑筋'],
                  optionsEnglish: ['tree branch', 'situation', 'tree hollow', 'brain']
                },
                { 
                  text: '大家很___，争着把手伸进树洞里去拿球。', 
                  english: 'Everyone became ___ and tried to reach into the hole to get the ball.',
                  answer: '着急', 
                  answerEnglish: 'anxious',
                  options: ['小心', '聪明', '浮', '着急'],
                  optionsEnglish: ['careful', 'clever', 'float', 'anxious']
                },
                { 
                  text: '有人找来一根___，伸进树洞里去拿球。', 
                  english: 'Someone brought a ___ and tried to reach the ball.',
                  answer: '树枝', 
                  answerEnglish: 'tree branch',
                  options: ['树枝', '树洞', '办法', '提'],
                  optionsEnglish: ['tree branch', 'tree hollow', 'method', 'carry']
                },
                { 
                  text: '也没有___把它拿上来。', 
                  english: 'They still had no ___ to get it out.',
                  answer: '办法', 
                  answerEnglish: 'solution',
                  options: ['情形', '脑筋', '浮', '办法'],
                  optionsEnglish: ['situation', 'brain', 'float', 'solution']
                }
              ],
              chineseSentences: [
                '几个孩子在一棵大树下拍球，一个不小心，皮球跳进一棵大树的树洞里去了。',
                '大家很着急，争着把手伸进树洞里去拿球。',
                '可是，他们的手太短了，没有人能把皮球拿上来。',
                '有人找来一根树枝，伸进树洞里去拿球，可是球太滑了，也没有办法把它拿上来。',
                '大家急得快哭出来了。',
                '华国是个聪明的孩子，平时最爱动脑筋。',
                '他看到这种情形，只见他眼珠子一转，就想到办法了。',
                '他跑回家去，不久，提来了一桶水。',
                '他把水倒进树洞里，皮球浮了上来。',
                '他就轻易地拿到球了。'
              ],
              englishSentences: [
                'A few children were playing with a ball under a big tree. One of them was not careful, and the ball bounced into a tree hollow.',
                'Everyone became anxious and tried to reach into the hole to get the ball.',
                'But their arms were too short—no one could get the ball out.',
                'Someone brought a tree branch and tried to reach the ball, but it was too slippery, and they still had no solution.',
                'The children were about to cry.',
                'Hua Guo was a clever child who loved using his brain.',
                'When he saw the situation, his eyes turned and he came up with an idea.',
                'He ran home, and soon carried a bucket of water.',
                'He poured the water into the tree hollow, and the ball floated up.',
                'He easily picked it up.'
              ]
            },
            chapter2: {
              vocabulary: [
                { word: '骄傲', pinyin: 'jiāo ào', chinese: '看不起别人；也可指感到自豪', english: 'arrogant / proud' },
                { word: '学习', pinyin: 'xué xí', chinese: '通过读书或练习来获得知识或技能', english: 'to study / to learn' },
                { word: '回家', pinyin: 'huí jiā', chinese: '从外面返回自己的家里', english: 'to go home' },
                { word: '参加', pinyin: 'cān jiā', chinese: '参与活动或组织', english: 'to participate / to join' },
                { word: '篮球', pinyin: 'lán qiú', chinese: '一种用手拍打球并投进篮筐的运动', english: 'basketball' },
                { word: '帮助', pinyin: 'bāng zhù', chinese: '协助别人解决困难或完成任务', english: 'to help / to assist' },
                { word: '比赛', pinyin: 'bǐ sài', chinese: '为争取胜利而进行的竞赛活动', english: 'competition / match' },
                { word: '同班', pinyin: 'tóng bān', chinese: '在同一个班级', english: 'same class' },
                { word: '高兴', pinyin: 'gāo xìng', chinese: '心情愉快，快乐', english: 'happy / glad' },
                { word: '要好', pinyin: 'yào hǎo', chinese: '感情好，关系亲密', english: 'close (in relationship) / good friends' }
              ],
              gameQuestions: [
                { 
                  text: '我有很多朋友,文锦和我最___。', 
                  english: 'I have many friends, and Wen Jin and I are the ___.',
                  answer: '要好', 
                  answerEnglish: 'closest',
                  options: ['骄傲', '要好', '高兴', '帮助'],
                  optionsEnglish: ['arrogant', 'closest', 'happy', 'help']
                },
                { 
                  text: '我们是___同学', 
                  english: 'We are ___ classmates',
                  answer: '同班', 
                  answerEnglish: 'same class',
                  options: ['比赛', '篮球', '同班', '参加'],
                  optionsEnglish: ['competition', 'basketball', 'same class', 'participate']
                },
                { 
                  text: '经常一起上学,一起___。', 
                  english: 'We often go to school and ___ together.',
                  answer: '回家', 
                  answerEnglish: 'go home',
                  options: ['学习', '回家', '参加', '篮球'],
                  optionsEnglish: ['study', 'go home', 'participate', 'basketball']
                },
                { 
                  text: '文锦常常___我做功课。', 
                  english: 'Wen Jin often ___ me with homework.',
                  answer: '帮助', 
                  answerEnglish: 'helps',
                  options: ['骄傲', '高兴', '帮助', '比赛'],
                  optionsEnglish: ['proud', 'happy', 'helps', 'compete']
                },
                { 
                  text: '我们一起___篮球比赛。', 
                  english: 'We ___ in basketball competitions together.',
                  answer: '参加', 
                  answerEnglish: 'participate',
                  options: ['学习', '回家', '参加', '骄傲'],
                  optionsEnglish: ['study', 'go home', 'participate', 'proud']
                }
              ],
              chineseSentences: [
                '我有很多朋友，文锦和我最要好。',
                '我们是同班同学，经常一起上学，一起回家。',
                '文锦常常帮助我做功课，我也帮助他学习。',
                '我们都很喜欢打篮球，经常一起参加比赛。',
                '虽然有时会输，但我们从不骄傲，也不灰心。',
                '有这样的好朋友，我感到很高兴。'
              ],
              englishSentences: [
                'I have many friends, and Wen Jin and I are the closest.',
                'We are classmates in the same class, often going to school and going home together.',
                'Wen Jin often helps me with homework, and I also help him study.',
                'We both love playing basketball and often participate in competitions together.',
                'Although we sometimes lose, we are never arrogant, nor do we get discouraged.',
                'Having such a good friend makes me very happy.'
              ]
            },
            chapter3: {
              vocabulary: [
                { word: '舒服', pinyin: 'shū fu', chinese: '感到轻松自在，没有不适', english: 'comfortable' },
                { word: '奔', pinyin: 'bēn', chinese: '快速地跑向某个方向', english: 'to rush; to run quickly' },
                { word: '温暖', pinyin: 'wēn nuǎn', chinese: '温和暖和；也比喻令人感到关爱', english: 'warm; warmth' },
                { word: '棉被', pinyin: 'mián bèi', chinese: '用棉花做的被子', english: 'quilt; cotton blanket' },
                { word: '幸福', pinyin: 'xìng fú', chinese: '生活美好，心里满足', english: 'happy; blissful' },
                { word: '照顾', pinyin: 'zhào gù', chinese: '关心、帮助他人生活起居', english: 'to take care of' },
                { word: '连忙', pinyin: 'lián máng', chinese: '立刻，赶快做某事', english: 'promptly; at once' },
                { word: '年幼', pinyin: 'nián yòu', chinese: '年纪小，年龄还小', english: 'young; little' },
                { word: '未曾', pinyin: 'wèi céng', chinese: '以前从来没有', english: 'never before' },
                { word: '软弱', pinyin: 'ruǎn ruò', chinese: '身体没有力气或性格不坚强', english: 'weak; frail' }
              ],
              gameQuestions: [
                { 
                  text: '小汪躺在软软的草地上觉得很___。', 
                  english: 'Little Wang lying on the soft grass felt very ___.',
                  answer: '舒服', 
                  answerEnglish: 'comfortable',
                  options: ['舒服', '温暖', '幸福', '软弱'],
                  optionsEnglish: ['comfortable', 'warm', 'happy', 'weak']
                },
                { 
                  text: '小汪看到主人回来，___过去迎接。', 
                  english: 'When Little Wang saw his owner return, he ___ over to greet them.',
                  answer: '奔', 
                  answerEnglish: 'rushed',
                  options: ['奔', '照顾', '连忙', '未曾'],
                  optionsEnglish: ['rushed', 'took care', 'promptly', 'never']
                },
                { 
                  text: '主人给小汪盖上___，让它感到温暖。', 
                  english: 'The owner covered Little Wang with a ___, making it feel warm.',
                  answer: '棉被', 
                  answerEnglish: 'quilt',
                  options: ['棉被', '温暖', '舒服', '幸福'],
                  optionsEnglish: ['quilt', 'warmth', 'comfort', 'happiness']
                },
                { 
                  text: '小汪___没有这样幸福过。', 
                  english: 'Little Wang had ___ been this happy before.',
                  answer: '未曾', 
                  answerEnglish: 'never',
                  options: ['连忙', '未曾', '年幼', '软弱'],
                  optionsEnglish: ['promptly', 'never', 'young', 'weak']
                },
                { 
                  text: '主人很用心地___小汪。', 
                  english: 'The owner very carefully ___ Little Wang.',
                  answer: '照顾', 
                  answerEnglish: 'took care of',
                  options: ['照顾', '奔', '连忙', '温暖'],
                  optionsEnglish: ['took care of', 'rushed', 'promptly', 'warmed']
                }
              ],
              chineseSentences: [
                '小汪是一只年幼的小狗，身体软弱，需要人照顾。',
                '以前它未曾有过温暖的家，总是在街上流浪。',
                '现在它有了一个好主人，连忙奔过去表达感谢。',
                '主人给它准备了舒服的小床和温暖的棉被。',
                '小汪躺在软软的床上，感到前所未有的幸福。',
                '有人关心和照顾的感觉真是太好了。'
              ],
              englishSentences: [
                'Little Wang is a young puppy, physically weak and needing care.',
                'Before, it had never had a warm home and was always wandering the streets.',
                'Now it has a good owner and promptly rushes over to express gratitude.',
                'The owner prepared a comfortable little bed and warm quilt for it.',
                'Little Wang lying on the soft bed felt unprecedented happiness.',
                'The feeling of having someone care for and look after you is wonderful.'
              ]
            },
            chapter4: {
              vocabulary: [
                { word: '轻松', pinyin: 'qīng sōng', chinese: '没有压力，自在舒适', english: 'relaxed; easy' },
                { word: '抄写', pinyin: 'chāo xiě', chinese: '照着原文把文字写下来', english: 'to copy; to transcribe' },
                { word: '完成', pinyin: 'wán chéng', chinese: '做好，做完', english: 'to complete; to finish' },
                { word: '努力', pinyin: 'nǔ lì', chinese: '用心用力去做', english: 'to work hard; effort' },
                { word: '马虎', pinyin: 'mǎ hu', chinese: '做事不细心，草率', english: 'careless; casual' },
                { word: '检查', pinyin: 'jiǎn chá', chinese: '为了发现问题而察看', english: 'to check; to examine' },
                { word: '错误', pinyin: 'cuò wù', chinese: '不正确的事物或行为', english: 'mistake; error' },
                { word: '细心', pinyin: 'xì xīn', chinese: '用心仔细，不粗心', english: 'careful; attentive' },
                { word: '改正', pinyin: 'gǎi zhèng', chinese: '把错的改为对的', english: 'to correct; to rectify' },
                { word: '习惯', pinyin: 'xí guàn', chinese: '经常做而形成的行为方式', english: 'habit; custom' }
              ],
              gameQuestions: [
                { 
                  text: '明明总是很___地完成作业。', 
                  english: 'Ming Ming always completes homework very ___.',
                  answer: '细心', 
                  answerEnglish: 'carefully',
                  options: ['马虎', '轻松', '细心', '错误'],
                  optionsEnglish: ['carelessly', 'easily', 'carefully', 'wrongly']
                },
                { 
                  text: '他从不___地对待学习。', 
                  english: 'He never treats studying ___.',
                  answer: '马虎', 
                  answerEnglish: 'carelessly',
                  options: ['努力', '细心', '马虎', '完成'],
                  optionsEnglish: ['hard', 'carefully', 'carelessly', 'completely']
                },
                { 
                  text: '写完作业后，明明会___一遍。', 
                  english: 'After finishing homework, Ming Ming will ___ it once.',
                  answer: '检查', 
                  answerEnglish: 'check',
                  options: ['抄写', '检查', '改正', '轻松'],
                  optionsEnglish: ['copy', 'check', 'correct', 'relax']
                },
                { 
                  text: '发现___后，他会立刻改正。', 
                  english: 'After discovering ___, he will correct them immediately.',
                  answer: '错误', 
                  answerEnglish: 'mistakes',
                  options: ['习惯', '努力', '错误', '完成'],
                  optionsEnglish: ['habits', 'effort', 'mistakes', 'completion']
                },
                { 
                  text: '认真学习已经成为明明的___。', 
                  english: 'Studying seriously has become Ming Ming\'s ___.',
                  answer: '习惯', 
                  answerEnglish: 'habit',
                  options: ['错误', '习惯', '轻松', '抄写'],
                  optionsEnglish: ['mistake', 'habit', 'ease', 'copying']
                }
              ],
              chineseSentences: [
                '明明是个认真的学生，从不马虎对待学习。',
                '每天放学后，他都会努力完成所有作业。',
                '写字时，他总是很细心，一笔一画都不马虎。',
                '完成作业后，明明还会仔细检查一遍。',
                '发现错误时，他会立刻改正，从不觉得轻松了事。',
                '这种认真的态度已经成为明明的好习惯。'
              ],
              englishSentences: [
                'Ming Ming is a serious student who never treats studying carelessly.',
                'Every day after school, he works hard to complete all his homework.',
                'When writing, he is always very careful, not being careless with any stroke.',
                'After completing homework, Ming Ming will carefully check it once more.',
                'When he finds mistakes, he corrects them immediately, never taking it lightly.',
                'This serious attitude has become Ming Ming\'s good habit.'
              ]
            },
            chapter5: {
              vocabulary: [
                { word: '季节', pinyin: 'jì jié', chinese: '一年中的春、夏、秋、冬', english: 'season' },
                { word: '炎热', pinyin: 'yán rè', chinese: '非常热', english: 'hot; sweltering' },
                { word: '凉爽', pinyin: 'liáng shuǎng', chinese: '清凉而舒适', english: 'cool and refreshing' },
                { word: '寒冷', pinyin: 'hán lěng', chinese: '温度很低，很冷', english: 'cold; freezing' },
                { word: '温和', pinyin: 'wēn hé', chinese: '不热也不冷，适中', english: 'mild; temperate' },
                { word: '绿叶', pinyin: 'lǜ yè', chinese: '绿色的叶子', english: 'green leaves' },
                { word: '花朵', pinyin: 'huā duǒ', chinese: '花的总称', english: 'flowers; blossoms' },
                { word: '果实', pinyin: 'guǒ shí', chinese: '植物的果子', english: 'fruit' },
                { word: '雪花', pinyin: 'xuě huā', chinese: '雪的结晶体', english: 'snowflakes' },
                { word: '变化', pinyin: 'biàn huà', chinese: '改变，不同', english: 'change; transformation' }
              ],
              gameQuestions: [
                { 
                  text: '一年有四个___：春、夏、秋、冬。', 
                  english: 'A year has four ___: spring, summer, autumn, winter.',
                  answer: '季节', 
                  answerEnglish: 'seasons',
                  options: ['季节', '变化', '花朵', '果实'],
                  optionsEnglish: ['seasons', 'changes', 'flowers', 'fruits']
                },
                { 
                  text: '春天气候___，很舒服。', 
                  english: 'Spring weather is ___, very comfortable.',
                  answer: '温和', 
                  answerEnglish: 'mild',
                  options: ['炎热', '寒冷', '温和', '凉爽'],
                  optionsEnglish: ['hot', 'cold', 'mild', 'cool']
                },
                { 
                  text: '夏天天气___，需要多喝水。', 
                  english: 'Summer weather is ___, need to drink more water.',
                  answer: '炎热', 
                  answerEnglish: 'hot',
                  options: ['温和', '凉爽', '炎热', '寒冷'],
                  optionsEnglish: ['mild', 'cool', 'hot', 'cold']
                },
                { 
                  text: '秋天天气___，很适合外出。', 
                  english: 'Autumn weather is ___, very suitable for going out.',
                  answer: '凉爽', 
                  answerEnglish: 'cool',
                  options: ['炎热', '凉爽', '寒冷', '温和'],
                  optionsEnglish: ['hot', 'cool', 'cold', 'mild']
                },
                { 
                  text: '冬天会下___，很美丽。', 
                  english: 'In winter ___ fall, very beautiful.',
                  answer: '雪花', 
                  answerEnglish: 'snowflakes',
                  options: ['花朵', '绿叶', '果实', '雪花'],
                  optionsEnglish: ['flowers', 'green leaves', 'fruits', 'snowflakes']
                }
              ],
              chineseSentences: [
                '一年有四个美丽的季节，每个季节都有不同的特色。',
                '春天气候温和，到处开满了美丽的花朵。',
                '夏天天气炎热，树木长满了茂密的绿叶。',
                '秋天天气凉爽，树上结满了香甜的果实。',
                '冬天天气寒冷，天空飘洒着洁白的雪花。',
                '四季的变化让大自然更加美丽动人。'
              ],
              englishSentences: [
                'A year has four beautiful seasons, each with different characteristics.',
                'Spring has mild weather, with beautiful flowers blooming everywhere.',
                'Summer is hot, with trees full of lush green leaves.',
                'Autumn is cool and refreshing, with trees bearing sweet fruits.',
                'Winter is cold, with white snowflakes falling from the sky.',
                'The changes of the four seasons make nature even more beautiful.'
              ]
            },
            chapter6: {
              vocabulary: [
                { word: '交通', pinyin: 'jiāo tōng', chinese: '人和物的流动运输', english: 'traffic; transportation' },
                { word: '安全', pinyin: 'ān quán', chinese: '没有危险，不受伤害', english: 'safe; safety' },
                { word: '遵守', pinyin: 'zūn shǒu', chinese: '按照规定去做', english: 'to obey; to follow' },
                { word: '规则', pinyin: 'guī zé', chinese: '规定的准则', english: 'rules; regulations' },
                { word: '红灯', pinyin: 'hóng dēng', chinese: '红色的交通信号灯', english: 'red light' },
                { word: '绿灯', pinyin: 'lǜ dēng', chinese: '绿色的交通信号灯', english: 'green light' },
                { word: '人行道', pinyin: 'rén xíng dào', chinese: '专供行人走的道路', english: 'sidewalk; pedestrian path' },
                { word: '斑马线', pinyin: 'bān mǎ xiàn', chinese: '人行横道的标志线', english: 'zebra crossing; crosswalk' },
                { word: '小心', pinyin: 'xiǎo xīn', chinese: '注意，谨慎', english: 'careful; cautious' },
                { word: '危险', pinyin: 'wēi xiǎn', chinese: '有可能发生灾难或不幸', english: 'dangerous; danger' }
              ],
              gameQuestions: [
                { 
                  text: '过马路时要遵守___规则。', 
                  english: 'When crossing the road, we must follow ___ rules.',
                  answer: '交通', 
                  answerEnglish: 'traffic',
                  options: ['交通', '危险', '安全', '小心'],
                  optionsEnglish: ['traffic', 'danger', 'safety', 'careful']
                },
                { 
                  text: '看到___不能过马路。', 
                  english: 'When seeing ___, we cannot cross the road.',
                  answer: '红灯', 
                  answerEnglish: 'red light',
                  options: ['绿灯', '红灯', '斑马线', '人行道'],
                  optionsEnglish: ['green light', 'red light', 'crosswalk', 'sidewalk']
                },
                { 
                  text: '行人应该走___。', 
                  english: 'Pedestrians should walk on the ___.',
                  answer: '人行道', 
                  answerEnglish: 'sidewalk',
                  options: ['斑马线', '人行道', '规则', '绿灯'],
                  optionsEnglish: ['crosswalk', 'sidewalk', 'rules', 'green light']
                },
                { 
                  text: '过马路要走___。', 
                  english: 'When crossing the road, use the ___.',
                  answer: '斑马线', 
                  answerEnglish: 'crosswalk',
                  options: ['人行道', '红灯', '斑马线', '交通'],
                  optionsEnglish: ['sidewalk', 'red light', 'crosswalk', 'traffic']
                },
                { 
                  text: '遵守交通规则是为了___。', 
                  english: 'Following traffic rules is for ___.',
                  answer: '安全', 
                  answerEnglish: 'safety',
                  options: ['危险', '小心', '安全', '遵守'],
                  optionsEnglish: ['danger', 'caution', 'safety', 'obedience']
                }
              ],
              chineseSentences: [
                '交通安全非常重要，每个人都要遵守交通规则。',
                '红灯停，绿灯行，这是最基本的交通规则。',
                '行人要走人行道，不能在马路上乱跑。',
                '过马路时要走斑马线，还要小心看左右。',
                '开车的叔叔阿姨也要小心驾驶，避免危险。',
                '只有大家都遵守规则，道路才会更安全。'
              ],
              englishSentences: [
                'Traffic safety is very important, everyone must follow traffic rules.',
                'Red light stop, green light go - these are the most basic traffic rules.',
                'Pedestrians should walk on sidewalks, not run around on the road.',
                'When crossing the road, use crosswalks and carefully look left and right.',
                'Drivers should also drive carefully to avoid danger.',
                'Only when everyone follows the rules will roads be safer.'
              ]
            },
            chapter7: {
              vocabulary: [
                { word: '健康', pinyin: 'jiàn kāng', chinese: '身体和精神状况良好', english: 'healthy; health' },
                { word: '锻炼', pinyin: 'duàn liàn', chinese: '通过体力活动增强体质', english: 'to exercise; to work out' },
                { word: '营养', pinyin: 'yíng yǎng', chinese: '生物体吸收的有益物质', english: 'nutrition; nutritious' },
                { word: '蔬菜', pinyin: 'shū cài', chinese: '可以食用的植物', english: 'vegetables' },
                { word: '水果', pinyin: 'shuǐ guǒ', chinese: '植物的果实，可以食用', english: 'fruit' },
                { word: '睡眠', pinyin: 'shuì mián', chinese: '生物的休息状态', english: 'sleep' },
                { word: '充足', pinyin: 'chōng zú', chinese: '足够，不缺少', english: 'sufficient; adequate' },
                { word: '疲劳', pinyin: 'pí láo', chinese: '身体或精神感到累', english: 'tired; fatigue' },
                { word: '精神', pinyin: 'jīng shén', chinese: '人的意识和思维活动', english: 'spirit; energy' },
                { word: '习惯', pinyin: 'xí guàn', chinese: '长期形成的行为方式', english: 'habit' }
              ],
              gameQuestions: [
                { 
                  text: '每天要适当___，保持身体健康。', 
                  english: 'Exercise appropriately every day to maintain ___.',
                  answer: '锻炼', 
                  answerEnglish: 'exercise',
                  options: ['睡眠', '锻炼', '疲劳', '精神'],
                  optionsEnglish: ['sleep', 'exercise', 'fatigue', 'spirit']
                },
                { 
                  text: '要多吃___和水果。', 
                  english: 'Eat more ___ and fruits.',
                  answer: '蔬菜', 
                  answerEnglish: 'vegetables',
                  options: ['蔬菜', '营养', '习惯', '健康'],
                  optionsEnglish: ['vegetables', 'nutrition', 'habits', 'health']
                },
                { 
                  text: '___的睡眠对身体很重要。', 
                  english: '___ sleep is very important for the body.',
                  answer: '充足', 
                  answerEnglish: 'Sufficient',
                  options: ['疲劳', '充足', '精神', '营养'],
                  optionsEnglish: ['tired', 'sufficient', 'energetic', 'nutritious']
                },
                { 
                  text: '良好的生活___有益健康。', 
                  english: 'Good living ___ are beneficial to health.',
                  answer: '习惯', 
                  answerEnglish: 'habits',
                  options: ['睡眠', '锻炼', '习惯', '水果'],
                  optionsEnglish: ['sleep', 'exercise', 'habits', 'fruits']
                },
                { 
                  text: '均衡的___能让身体更强壮。', 
                  english: 'Balanced ___ can make the body stronger.',
                  answer: '营养', 
                  answerEnglish: 'nutrition',
                  options: ['疲劳', '营养', '精神', '蔬菜'],
                  optionsEnglish: ['fatigue', 'nutrition', 'spirit', 'vegetables']
                }
              ],
              chineseSentences: [
                '健康的生活方式对每个人都很重要。',
                '我们要每天适当锻炼，增强身体素质。',
                '饮食要均衡，多吃蔬菜和水果补充营养。',
                '充足的睡眠能让我们精神饱满，不会疲劳。',
                '早睡早起，规律作息是好习惯。',
                '只有身体健康，我们才能更好地学习和生活。'
              ],
              englishSentences: [
                'A healthy lifestyle is important for everyone.',
                'We should exercise appropriately every day to strengthen our physical fitness.',
                'Diet should be balanced, eating more vegetables and fruits for nutrition.',
                'Sufficient sleep keeps us energetic and prevents fatigue.',
                'Going to bed early and getting up early with regular schedules are good habits.',
                'Only with good health can we better study and live.'
              ]
            },
            chapter8: {
              vocabulary: [
                { word: '环境', pinyin: 'huán jìng', chinese: '周围的条件和情况', english: 'environment' },
                { word: '保护', pinyin: 'bǎo hù', chinese: '尽力照顾，使不受伤害', english: 'to protect' },
                { word: '污染', pinyin: 'wū rǎn', chinese: '使变得不干净', english: 'pollution; to pollute' },
                { word: '垃圾', pinyin: 'lā jī', chinese: '废弃的东西', english: 'garbage; trash' },
                { word: '分类', pinyin: 'fēn lèi', chinese: '按照种类分开', english: 'to classify; classification' },
                { word: '回收', pinyin: 'huí shōu', chinese: '重新收集利用', english: 'to recycle' },
                { word: '节约', pinyin: 'jiē yuē', chinese: '节省，不浪费', english: 'to save; to economize' },
                { word: '资源', pinyin: 'zī yuán', chinese: '可以利用的财富', english: 'resources' },
                { word: '绿化', pinyin: 'lǜ huà', chinese: '种植花草树木', english: 'greening; landscaping' },
                { word: '责任', pinyin: 'zé rèn', chinese: '应该承担的任务', english: 'responsibility; duty' }
              ],
              gameQuestions: [
                { 
                  text: '我们要___地球环境。', 
                  english: 'We must ___ the Earth\'s environment.',
                  answer: '保护', 
                  answerEnglish: 'protect',
                  options: ['污染', '保护', '分类', '回收'],
                  optionsEnglish: ['pollute', 'protect', 'classify', 'recycle']
                },
                { 
                  text: '___要按类别分开放置。', 
                  english: '___ should be separated by category.',
                  answer: '垃圾', 
                  answerEnglish: 'Garbage',
                  options: ['垃圾', '资源', '绿化', '责任'],
                  optionsEnglish: ['garbage', 'resources', 'greening', 'responsibility']
                },
                { 
                  text: '可以___的物品不要扔掉。', 
                  english: 'Items that can be ___ should not be thrown away.',
                  answer: '回收', 
                  answerEnglish: 'recycled',
                  options: ['污染', '分类', '回收', '节约'],
                  optionsEnglish: ['polluted', 'classified', 'recycled', 'saved']
                },
                { 
                  text: '我们要___用水用电。', 
                  english: 'We should ___ water and electricity.',
                  answer: '节约', 
                  answerEnglish: 'save',
                  options: ['节约', '污染', '浪费', '保护'],
                  optionsEnglish: ['save', 'pollute', 'waste', 'protect']
                },
                { 
                  text: '爱护环境是每个人的___。', 
                  english: 'Caring for the environment is everyone\'s ___.',
                  answer: '责任', 
                  answerEnglish: 'responsibility',
                  options: ['绿化', '资源', '责任', '分类'],
                  optionsEnglish: ['greening', 'resources', 'responsibility', 'classification']
                }
              ],
              chineseSentences: [
                '保护环境是每个人的责任，我们要从小事做起。',
                '不要随便扔垃圾，要做好垃圾分类。',
                '可以回收的物品要分开放置，重复利用。',
                '我们要节约用水用电，不浪费资源。',
                '多参与绿化活动，种植花草树木。',
                '只有大家一起努力，环境才会变得更美好。'
              ],
              englishSentences: [
                'Protecting the environment is everyone\'s responsibility, we should start with small things.',
                'Don\'t litter randomly, we should properly sort garbage.',
                'Recyclable items should be separated for reuse.',
                'We should save water and electricity, not waste resources.',
                'Participate more in greening activities, planting flowers, grass and trees.',
                'Only when everyone works together will the environment become better.'
              ]
            },
            chapter9: {
              vocabulary: [
                { word: '科技', pinyin: 'kē jì', chinese: '科学技术', english: 'science and technology' },
                { word: '发明', pinyin: 'fā míng', chinese: '创造出新的事物', english: 'to invent; invention' },
                { word: '电脑', pinyin: 'diàn nǎo', chinese: '计算机', english: 'computer' },
                { word: '网络', pinyin: 'wǎng luò', chinese: '互相连接的系统', english: 'network; internet' },
                { word: '信息', pinyin: 'xìn xī', chinese: '消息和知识', english: 'information' },
                { word: '方便', pinyin: 'fāng biàn', chinese: '便利，容易', english: 'convenient' },
                { word: '快速', pinyin: 'kuài sù', chinese: '速度很快', english: 'fast; rapid' },
                { word: '沟通', pinyin: 'gōu tōng', chinese: '交流思想和感情', english: 'to communicate' },
                { word: '进步', pinyin: 'jìn bù', chinese: '向前发展', english: 'progress; to progress' },
                { word: '未来', pinyin: 'wèi lái', chinese: '将来的时间', english: 'future' }
              ],
              gameQuestions: [
                { 
                  text: '现代___让生活更方便。', 
                  english: 'Modern ___ makes life more convenient.',
                  answer: '科技', 
                  answerEnglish: 'technology',
                  options: ['科技', '发明', '信息', '未来'],
                  optionsEnglish: ['technology', 'invention', 'information', 'future']
                },
                { 
                  text: '___是现代重要的学习工具。', 
                  english: '___ is an important learning tool in modern times.',
                  answer: '电脑', 
                  answerEnglish: 'Computer',
                  options: ['网络', '电脑', '信息', '沟通'],
                  optionsEnglish: ['network', 'computer', 'information', 'communication']
                },
                { 
                  text: '通过___我们可以获得各种信息。', 
                  english: 'Through the ___ we can get various information.',
                  answer: '网络', 
                  answerEnglish: 'internet',
                  options: ['电脑', '网络', '方便', '快速'],
                  optionsEnglish: ['computer', 'internet', 'convenience', 'speed']
                },
                { 
                  text: '科技让人们___地交流。', 
                  english: 'Technology allows people to communicate ___.',
                  answer: '方便', 
                  answerEnglish: 'conveniently',
                  options: ['快速', '方便', '进步', '未来'],
                  optionsEnglish: ['quickly', 'conveniently', 'progressively', 'futuristically']
                },
                { 
                  text: '人类的___离不开科技发展。', 
                  english: 'Human ___ cannot be separated from technological development.',
                  answer: '进步', 
                  answerEnglish: 'progress',
                  options: ['发明', '沟通', '进步', '信息'],
                  optionsEnglish: ['invention', 'communication', 'progress', 'information']
                }
              ],
              chineseSentences: [
                '科技的发展改变了我们的生活方式。',
                '许多有用的发明让我们的生活更方便。',
                '电脑和网络帮助我们快速获得信息。',
                '现代科技让人们的沟通变得简单快速。',
                '科学技术的进步推动着社会发展。',
                '未来的科技发展将带来更多惊喜。'
              ],
              englishSentences: [
                'The development of technology has changed our way of life.',
                'Many useful inventions make our lives more convenient.',
                'Computers and networks help us get information quickly.',
                'Modern technology makes communication simple and fast.',
                'Progress in science and technology drives social development.',
                'Future technological development will bring more surprises.'
              ]
            },
            chapter10: {
              vocabulary: [
                { word: '文化', pinyin: 'wén huà', chinese: '人类的精神财富', english: 'culture' },
                { word: '传统', pinyin: 'chuán tǒng', chinese: '世代相传的思想、行为', english: 'tradition; traditional' },
                { word: '节日', pinyin: 'jié rì', chinese: '纪念意义的日子', english: 'festival; holiday' },
                { word: '庆祝', pinyin: 'qìng zhù', chinese: '为高兴的事举行活动', english: 'to celebrate' },
                { word: '习俗', pinyin: 'xí sú', chinese: '传统的风俗习惯', english: 'custom; tradition' },
                { word: '团圆', pinyin: 'tuán yuán', chinese: '全家人聚在一起', english: 'reunion; to reunite' },
                { word: '祝福', pinyin: 'zhù fú', chinese: '表示良好的愿望', english: 'blessing; to bless' },
                { word: '礼物', pinyin: 'lǐ wù', chinese: '表示心意的东西', english: 'gift; present' },
                { word: '快乐', pinyin: 'kuài lè', chinese: '高兴，愉快', english: 'happy; joy' },
                { word: '意义', pinyin: 'yì yì', chinese: '价值和作用', english: 'meaning; significance' }
              ],
              gameQuestions: [
                { 
                  text: '春节是中国最重要的___节日。', 
                  english: 'Spring Festival is China\'s most important ___ festival.',
                  answer: '传统', 
                  answerEnglish: 'traditional',
                  options: ['文化', '传统', '快乐', '意义'],
                  optionsEnglish: ['cultural', 'traditional', 'happy', 'meaningful']
                },
                { 
                  text: '春节时全家人___在一起很快乐。', 
                  english: 'During Spring Festival, the whole family ___ together happily.',
                  answer: '团圆', 
                  answerEnglish: 'reunites',
                  options: ['庆祝', '团圆', '祝福', '习俗'],
                  optionsEnglish: ['celebrate', 'reunites', 'bless', 'custom']
                },
                { 
                  text: '人们会互相送___表示关心。', 
                  english: 'People give each other ___ to show care.',
                  answer: '礼物', 
                  answerEnglish: 'gifts',
                  options: ['节日', '礼物', '文化', '意义'],
                  optionsEnglish: ['festivals', 'gifts', 'culture', 'meaning']
                },
                { 
                  text: '每个节日都有特殊的___。', 
                  english: 'Each festival has special ___.',
                  answer: '习俗', 
                  answerEnglish: 'customs',
                  options: ['习俗', '庆祝', '团圆', '祝福'],
                  optionsEnglish: ['customs', 'celebration', 'reunion', 'blessing']
                },
                { 
                  text: '节日的___在于传承文化。', 
                  english: 'The ___ of festivals lies in passing on culture.',
                  answer: '意义', 
                  answerEnglish: 'significance',
                  options: ['快乐', '礼物', '意义', '传统'],
                  optionsEnglish: ['happiness', 'gifts', 'significance', 'tradition']
                }
              ],
              chineseSentences: [
                '中国有着悠久的文化传统，节日文化丰富多彩。',
                '春节是中国最重要的传统节日，全家人会团圆庆祝。',
                '中秋节时，人们会赏月、吃月饼，表达对家人的思念。',
                '端午节有吃粽子、赛龙舟的习俗。',
                '每个节日都有它特殊的意义和传统习俗。',
                '这些节日让我们感受到文化的魅力和家庭的温暖。'
              ],
              englishSentences: [
                'China has a long cultural tradition with rich and colorful festival culture.',
                'Spring Festival is China\'s most important traditional festival, when families reunite to celebrate.',
                'During the Mid-Autumn Festival, people admire the moon and eat mooncakes to express longing for family.',
                'The Dragon Boat Festival has customs of eating zongzi and dragon boat racing.',
                'Each festival has its special meaning and traditional customs.',
                'These festivals let us feel the charm of culture and the warmth of family.'
              ]
            },
            chapter11: {
              vocabulary: [
                { word: '梦想', pinyin: 'mèng xiǎng', chinese: '渴望实现的愿望', english: 'dream; aspiration' },
                { word: '努力', pinyin: 'nǔ lì', chinese: '用心用力去做', english: 'to work hard; effort' },
                { word: '坚持', pinyin: 'jiān chí', chinese: '持续不断地做', english: 'to persist; to persevere' },
                { word: '困难', pinyin: 'kùn nán', chinese: '不容易解决的问题', english: 'difficulty; difficult' },
                { word: '挑战', pinyin: 'tiǎo zhàn', chinese: '有难度的任务', english: 'challenge; to challenge' },
                { word: '成功', pinyin: 'chéng gōng', chinese: '达到预期的目标', english: 'success; to succeed' },
                { word: '失败', pinyin: 'shī bài', chinese: '没有达到目标', english: 'failure; to fail' },
                { word: '勇气', pinyin: 'yǒng qì', chinese: '面对困难的胆量', english: 'courage; bravery' },
                { word: '信心', pinyin: 'xìn xīn', chinese: '对成功的把握', english: 'confidence' },
                { word: '目标', pinyin: 'mù biāo', chinese: '想要达到的结果', english: 'goal; target' }
              ],
              gameQuestions: [
                { 
                  text: '每个人都应该有自己的___。', 
                  english: 'Everyone should have their own ___.',
                  answer: '梦想', 
                  answerEnglish: 'dreams',
                  options: ['梦想', '困难', '失败', '挑战'],
                  optionsEnglish: ['dreams', 'difficulties', 'failures', 'challenges']
                },
                { 
                  text: '要实现梦想就必须___学习。', 
                  english: 'To realize dreams, we must study ___.',
                  answer: '努力', 
                  answerEnglish: 'hard',
                  options: ['困难', '努力', '失败', '挑战'],
                  optionsEnglish: ['difficult', 'hard', 'fail', 'challenge']
                },
                { 
                  text: '遇到___不要放弃。', 
                  english: 'Don\'t give up when encountering ___.',
                  answer: '困难', 
                  answerEnglish: 'difficulties',
                  options: ['成功', '困难', '信心', '目标'],
                  optionsEnglish: ['success', 'difficulties', 'confidence', 'goals']
                },
                { 
                  text: '要有___面对挑战。', 
                  english: 'We need ___ to face challenges.',
                  answer: '勇气', 
                  answerEnglish: 'courage',
                  options: ['失败', '勇气', '困难', '挑战'],
                  optionsEnglish: ['failure', 'courage', 'difficulty', 'challenge']
                },
                { 
                  text: '___是成功的关键。', 
                  english: '___ is the key to success.',
                  answer: '坚持', 
                  answerEnglish: 'Persistence',
                  options: ['失败', '困难', '坚持', '挑战'],
                  optionsEnglish: ['failure', 'difficulty', 'persistence', 'challenge']
                }
              ],
              chineseSentences: [
                '每个人心中都有自己的梦想和目标。',
                '实现梦想需要付出努力和汗水。',
                '在追求梦想的路上，我们会遇到各种困难和挑战。',
                '即使失败了，也不要失去信心和勇气。',
                '只要坚持不懈，梦想总会实现的。',
                '成功属于那些永不放弃的人。'
              ],
              englishSentences: [
                'Everyone has their own dreams and goals in their heart.',
                'Realizing dreams requires effort and hard work.',
                'On the path to pursuing dreams, we will encounter various difficulties and challenges.',
                'Even if we fail, we should not lose confidence and courage.',
                'As long as we persist, dreams will eventually come true.',
                'Success belongs to those who never give up.'
              ]
            },
            chapter12: {
              vocabulary: [
                { word: '世界', pinyin: 'shì jiè', chinese: '地球上所有的地方', english: 'world' },
                { word: '和平', pinyin: 'hé píng', chinese: '没有战争，安宁', english: 'peace; peaceful' },
                { word: '友谊', pinyin: 'yǒu yì', chinese: '朋友间的感情', english: 'friendship' },
                { word: '合作', pinyin: 'hé zuò', chinese: '一起工作，共同努力', english: 'cooperation; to cooperate' },
                { word: '理解', pinyin: 'lǐ jiě', chinese: '明白，懂得', english: 'to understand; understanding' },
                { word: '尊重', pinyin: 'zūn zhòng', chinese: '敬重，重视', english: 'to respect; respect' },
                { word: '差异', pinyin: 'chā yì', chinese: '不同之处', english: 'difference; distinction' },
                { word: '包容', pinyin: 'bāo róng', chinese: '宽容，接纳', english: 'tolerance; to tolerate' },
                { word: '沟通', pinyin: 'gōu tōng', chinese: '交流思想和感情', english: 'to communicate; communication' },
                { word: '未来', pinyin: 'wèi lái', chinese: '将来的时间', english: 'future' }
              ],
              gameQuestions: [
                { 
                  text: '我们都生活在同一个___里。', 
                  english: 'We all live in the same ___.',
                  answer: '世界', 
                  answerEnglish: 'world',
                  options: ['世界', '友谊', '合作', '未来'],
                  optionsEnglish: ['world', 'friendship', 'cooperation', 'future']
                },
                { 
                  text: '___让世界更加美好。', 
                  english: '___ makes the world more beautiful.',
                  answer: '和平', 
                  answerEnglish: 'Peace',
                  options: ['差异', '和平', '理解', '包容'],
                  optionsEnglish: ['difference', 'peace', 'understanding', 'tolerance']
                },
                { 
                  text: '不同文化之间需要相互___。', 
                  english: 'Different cultures need to ___ each other.',
                  answer: '理解', 
                  answerEnglish: 'understand',
                  options: ['理解', '差异', '沟通', '合作'],
                  optionsEnglish: ['understand', 'difference', 'communicate', 'cooperate']
                },
                { 
                  text: '我们应该___彼此的不同。', 
                  english: 'We should ___ each other\'s differences.',
                  answer: '尊重', 
                  answerEnglish: 'respect',
                  options: ['包容', '尊重', '沟通', '合作'],
                  optionsEnglish: ['tolerate', 'respect', 'communicate', 'cooperate']
                },
                { 
                  text: '让我们一起创造美好的___。', 
                  english: 'Let\'s create a beautiful ___ together.',
                  answer: '未来', 
                  answerEnglish: 'future',
                  options: ['世界', '友谊', '未来', '和平'],
                  optionsEnglish: ['world', 'friendship', 'future', 'peace']
                }
              ],
              chineseSentences: [
                '我们生活在一个多元化的世界里。',
                '不同的国家和民族应该和平相处。',
                '友谊和合作能够促进世界的发展。',
                '我们要学会理解和尊重不同的文化。',
                '包容差异，加强沟通，是人类进步的基础。',
                '让我们携手共创美好的未来！'
              ],
              englishSentences: [
                'We live in a diverse world.',
                'Different countries and peoples should coexist peacefully.',
                'Friendship and cooperation can promote world development.',
                'We must learn to understand and respect different cultures.',
                'Embracing differences and strengthening communication is the foundation of human progress.',
                'Let us work together to create a beautiful future!'
              ]
            }
          };

          const encouragementWords = [
            '很厉害！', '你棒棒的！', '加油下一题！', '太棒了！', 
            '继续加油！', '你真聪明！', '做得很好！', '真厉害！',
            '超级棒！', '你太厉害了！'
          ];

          // Chapter titles mapping
          const chapterTitles = {
            chapter1: '第一篇：华国的办法',
            chapter2: '第二篇：好朋友', 
            chapter3: '第三篇：小汪的故事',
            chapter4: '第四篇：认真的明明',
            chapter5: '第五篇：美丽的四季',
            chapter6: '第六篇：交通安全',
            chapter7: '第七篇：健康生活',
            chapter8: '第八篇：爱护环境', 
            chapter9: '第九篇：科技时代',
            chapter10: '第十篇：传统节日',
            chapter11: '第十一篇：追求梦想',
            chapter12: '第十二篇：和谐世界'
          };

          // Chapter descriptions and icons
          const chapterInfo = {
            chapter1: { icon: '⚽', desc: '学习关于解决问题的10个词汇', engDesc: 'Learn 10 problem-solving words' },
            chapter2: { icon: '👫', desc: '学习关于友谊的10个词汇', engDesc: 'Learn 10 friendship words' },
            chapter3: { icon: '🐕', desc: '学习关于动物和关爱的10个词汇', engDesc: 'Learn 10 words about animals and care' },
            chapter4: { icon: '📚', desc: '学习关于学习态度的10个词汇', engDesc: 'Learn 10 words about study attitude' },
            chapter5: { icon: '🌸', desc: '学习关于四季变化的10个词汇', engDesc: 'Learn 10 words about seasons' },
            chapter6: { icon: '🚦', desc: '学习关于交通安全的10个词汇', engDesc: 'Learn 10 traffic safety words' },
            chapter7: { icon: '💪', desc: '学习关于健康生活的10个词汇', engDesc: 'Learn 10 healthy living words' },
            chapter8: { icon: '🌱', desc: '学习关于环境保护的10个词汇', engDesc: 'Learn 10 environmental words' },
            chapter9: { icon: '💻', desc: '学习关于科学技术的10个词汇', engDesc: 'Learn 10 technology words' },
            chapter10: { icon: '🎉', desc: '学习关于传统文化的10个词汇', engDesc: 'Learn 10 cultural tradition words' },
            chapter11: { icon: '⭐', desc: '学习关于理想抱负的10个词汇', engDesc: 'Learn 10 words about dreams and goals' },
            chapter12: { icon: '🌍', desc: '学习关于世界和谐的10个词汇', engDesc: 'Learn 10 words about world harmony' }
          };

          // 检测Apple设备
          const isAppleDevice = /iPad|iPhone|iPod|Mac/.test(navigator.userAgent);

          // 文字转语音功能
          const speakText = (text, language = 'zh-CN') => {
            if ('speechSynthesis' in window) {
              window.speechSynthesis.cancel();
              
              let cleanText = text;
              
              if (language === 'zh-CN') {
                cleanText = cleanText.replace(/\s*[\/\|]\s*[a-zA-Z].*/g, '');
              } else {
                cleanText = cleanText.replace(/[\/\|]/g, ' ');
              }
              
              cleanText = cleanText.replace(/_/g, ' ')
                                  .replace(/underscore/gi, '')
                                  .replace(/\bslash\b/gi, '')
                                  .replace(/\s+/g, ' ')
                                  .trim();
              
              const utterance = new SpeechSynthesisUtterance(cleanText);
              utterance.lang = language;
              utterance.rate = 0.8;
              utterance.pitch = 1.2;
              utterance.volume = 1.0;
              
              if (isAppleDevice) {
                utterance.volume = 1.0;
                utterance.rate = 0.7;
              }
              
              window.speechSynthesis.speak(utterance);
              return utterance;
            } else {
              if (isAppleDevice) {
                alert('Apple设备语音功能受限，请：\n1. 检查静音开关\n2. 调高音量\n3. 尝试多次点击\n4. 建议使用Chrome浏览器');
              } else {
                alert('您的浏览器不支持语音功能');
              }
              return null;
            }
          };

          const getCurrentData = () => {
            return chaptersData[currentChapter] || chaptersData.chapter1;
          };

          const resetChapterData = () => {
            setCurrentPhase('learning');
            setCurrentWordIndex(0);
            setViewedChinese(false);
            setViewedEnglish(false);
            setGameAnswers({});
            setWrongCount(0);
            setCurrentQuestion(0);
            setGameCompleted(false);
            setReadingLanguage('');
            setCurrentSentence(-1);
            setIsReading(false);
          };

          const handleChapterSelect = (chapter) => {
            setCurrentChapter(chapter);
            resetChapterData();
          };

          const backToMenu = () => {
            if ('speechSynthesis' in window) {
              window.speechSynthesis.cancel();
            }
            setCurrentChapter('menu');
            resetChapterData();
          };

          const handleViewChinese = () => {
            setViewedChinese(true);
            speakText(getCurrentData().vocabulary[currentWordIndex].chinese);
          };

          const handleViewEnglish = () => {
            setViewedEnglish(true);
            speakText(getCurrentData().vocabulary[currentWordIndex].english, 'en-US');
          };

          const handlePreviousWord = () => {
            if (currentWordIndex > 0) {
              setCurrentWordIndex(currentWordIndex - 1);
              setViewedChinese(false);
              setViewedEnglish(false);
            }
          };

          const handleNextWord = () => {
            if (currentWordIndex < getCurrentData().vocabulary.length - 1) {
              setCurrentWordIndex(currentWordIndex + 1);
              setViewedChinese(false);
              setViewedEnglish(false);
            } else {
              setCurrentPhase('game');
            }
          };

          const handleGameAnswer = (selectedAnswer) => {
            const currentQ = getCurrentData().gameQuestions[currentQuestion];
            const isCorrect = selectedAnswer === currentQ.answer;
            
            if (isCorrect) {
              const randomEncouragement = encouragementWords[Math.floor(Math.random() * encouragementWords.length)];
              alert(randomEncouragement);
              speakText(randomEncouragement);
              
              setGameAnswers({...gameAnswers, [currentQuestion]: selectedAnswer});
              setWrongCount(0);
              
              if (currentQuestion < getCurrentData().gameQuestions.length - 1) {
                setCurrentQuestion(currentQuestion + 1);
              } else {
                setGameCompleted(true);
                setCurrentPhase('reading');
              }
            } else {
              const newWrongCount = wrongCount + 1;
              setWrongCount(newWrongCount);
              
              if (newWrongCount >= 3) {
                alert('需要重新开始练习！');
                speakText('需要重新开始练习！');
                setCurrentQuestion(0);
                setGameAnswers({});
                setWrongCount(0);
              } else {
                alert('答错了，再试试！');
                speakText('答错了，再试试！');
              }
            }
          };

          const handleReading = (language) => {
            setReadingLanguage(language);
            setCurrentSentence(0);
            setIsReading(true);
            
            setTimeout(() => {
              const sentences = language === 'chinese' ? getCurrentData().chineseSentences : getCurrentData().englishSentences;
              speakText(sentences[0], language === 'chinese' ? 'zh-CN' : 'en-US');
            }, 500);
          };

          const handleNextSentence = () => {
            const sentences = readingLanguage === 'chinese' ? getCurrentData().chineseSentences : getCurrentData().englishSentences;
            if (currentSentence < sentences.length - 1) {
              const nextIndex = currentSentence + 1;
              setCurrentSentence(nextIndex);
              
              setTimeout(() => {
                speakText(sentences[nextIndex], readingLanguage === 'chinese' ? 'zh-CN' : 'en-US');
              }, 300);
            } else {
              setIsReading(false);
              alert('朗读完成！你学得很棒！');
            }
          };

          // Main render function
          if (currentChapter === 'menu') {
            return (
              <div style={{ 
                maxWidth: '1200px', 
                margin: '0 auto', 
                padding: '2rem', 
                backgroundColor: '#f8f9fa',
                minHeight: '100vh',
                fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif'
              }}>
                <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
                  <h1 style={{ 
                    fontSize: '3rem', 
                    color: '#2c3e50', 
                    marginBottom: '1rem' 
                  }}>🎓 中文学习天地</h1>
                  <p style={{ 
                    fontSize: '1.5rem', 
                    color: '#7f8c8d', 
                    marginBottom: '2rem' 
                  }}>Chinese Learning Paradise - Complete 12-Chapter Edition</p>
                </div>
                
                <div style={{ 
                  display: 'grid', 
                  gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', 
                  gap: '2rem',
                  margin: '2rem 0'
                }}>
                  {Object.keys(chaptersData).map((chapterKey, index) => {
                    const info = chapterInfo[chapterKey];
                    return (
                      <div 
                        key={chapterKey} 
                        onClick={() => handleChapterSelect(chapterKey)}
                        style={{
                          background: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%)',
                          borderRadius: '15px',
                          padding: '1.5rem',
                          textAlign: 'center',
                          cursor: 'pointer',
                          transition: 'all 0.3s ease',
                          color: '#333',
                          boxShadow: '0 4px 8px rgba(0,0,0,0.1)'
                        }}
                      >
                        <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>{info.icon}</div>
                        <h3 style={{ 
                          fontSize: '1.3rem', 
                          fontWeight: 'bold', 
                          marginBottom: '0.5rem' 
                        }}>{chapterTitles[chapterKey]}</h3>
                        <h4 style={{ 
                          fontSize: '1rem', 
                          marginBottom: '1rem',
                          opacity: 0.8 
                        }}>Chapter {index + 1}</h4>
                        <p style={{ 
                          fontSize: '0.9rem', 
                          marginBottom: '1.5rem',
                          lineHeight: 1.4 
                        }}>
                          {info.desc}<br/>
                          {info.engDesc}
                        </p>
                        <button style={{
                          background: 'linear-gradient(45deg, #667eea, #764ba2)',
                          color: 'white',
                          border: 'none',
                          padding: '0.8rem 1.5rem',
                          borderRadius: '25px',
                          fontSize: '1rem',
                          fontWeight: 'bold',
                          cursor: 'pointer',
                          transition: 'all 0.3s ease'
                        }}>开始学习 Start Learning</button>
                      </div>
                    );
                  })}
                </div>
              </div>
            );
          }

          // Learning phase
          if (currentPhase === 'learning') {
            const currentWord = getCurrentData().vocabulary[currentWordIndex];
            return (
              <div style={{ 
                maxWidth: '800px', 
                margin: '0 auto', 
                padding: '2rem',
                minHeight: '100vh',
                backgroundColor: '#f8f9fa'
              }}>
                <button 
                  onClick={backToMenu}
                  style={{
                    position: 'absolute',
                    top: '2rem',
                    right: '2rem',
                    background: '#666',
                    color: 'white',
                    border: 'none',
                    padding: '0.5rem 1rem',
                    borderRadius: '5px',
                    cursor: 'pointer'
                  }}
                >🏠 返回主页</button>
                
                <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
                  <h1 style={{ fontSize: '2.5rem', color: '#2c3e50' }}>📖 词汇学习</h1>
                  <p style={{ fontSize: '1.2rem', color: '#7f8c8d' }}>{chapterTitles[currentChapter]}</p>
                </div>
                
                <div style={{
                  background: 'white',
                  borderRadius: '20px',
                  padding: '2rem',
                  boxShadow: '0 10px 30px rgba(0,0,0,0.1)'
                }}>
                  <div style={{ 
                    textAlign: 'center', 
                    fontSize: '1.2rem', 
                    color: '#666', 
                    marginBottom: '2rem' 
                  }}>
                    第 {currentWordIndex + 1} 个词汇 / {getCurrentData().vocabulary.length} 个
                  </div>
                  
                  <div style={{
                    background: '#fff3cd',
                    padding: '2rem',
                    borderRadius: '15px',
                    textAlign: 'center',
                    marginBottom: '2rem',
                    border: '2px solid #ffc107'
                  }}>
                    <div style={{ 
                      fontSize: '3rem', 
                      fontWeight: 'bold',
                      color: '#d63384',
                      marginBottom: '1rem'
                    }}>
                      {currentWord.word}
                    </div>
                    <div style={{ 
                      fontSize: '1.5rem', 
                      color: '#6f42c1',
                      marginBottom: '1rem'
                    }}>
                      {currentWord.pinyin}
                    </div>
                  </div>
                  
                  <div style={{ 
                    display: 'flex', 
                    justifyContent: 'center',
                    gap: '1rem',
                    margin: '2rem 0',
                    flexWrap: 'wrap'
                  }}>
                    <button 
                      onClick={handleViewChinese}
                      style={{
                        background: viewedChinese ? '#28a745' : 'linear-gradient(45deg, #667eea, #764ba2)',
                        color: 'white',
                        border: 'none',
                        padding: '0.8rem 1.5rem',
                        borderRadius: '25px',
                        fontSize: '1rem',
                        fontWeight: 'bold',
                        cursor: 'pointer'
                      }}
                    >
                      🇨🇳 中文解释
                    </button>
                    <button 
                      onClick={handleViewEnglish}
                      style={{
                        background: viewedEnglish ? '#28a745' : 'linear-gradient(45deg, #667eea, #764ba2)',
                        color: 'white',
                        border: 'none',
                        padding: '0.8rem 1.5rem',
                        borderRadius: '25px',
                        fontSize: '1rem',
                        fontWeight: 'bold',
                        cursor: 'pointer'
                      }}
                    >
                      🇺🇸 英文解释
                    </button>
                  </div>
                  
                  {viewedChinese && (
                    <div style={{
                      background: '#d1ecf1',
                      padding: '1.5rem',
                      borderRadius: '10px',
                      margin: '1rem 0',
                      border: '1px solid #b6d4fe'
                    }}>
                      <strong>中文解释：</strong><br/>
                      {currentWord.chinese}
                    </div>
                  )}
                  
                  {viewedEnglish && (
                    <div style={{
                      background: '#d4edda',
                      padding: '1.5rem',
                      borderRadius: '10px',
                      margin: '1rem 0',
                      border: '1px solid #c3e6cb'
                    }}>
                      <strong>English Definition:</strong><br/>
                      {currentWord.english}
                    </div>
                  )}
                  
                  <div style={{ 
                    display: 'flex', 
                    justifyContent: 'space-between',
                    margin: '2rem 0'
                  }}>
                    <button 
                      onClick={handlePreviousWord}
                      disabled={currentWordIndex === 0}
                      style={{
                        background: currentWordIndex === 0 ? '#ccc' : '#666',
                        color: 'white',
                        border: 'none',
                        padding: '0.8rem 1.5rem',
                        borderRadius: '25px',
                        fontSize: '1rem',
                        fontWeight: 'bold',
                        cursor: currentWordIndex === 0 ? 'not-allowed' : 'pointer'
                      }}
                    >
                      ← 上一个词汇
                    </button>
                    <button 
                      onClick={handleNextWord}
                      disabled={!viewedChinese || !viewedEnglish}
                      style={{
                        background: (!viewedChinese || !viewedEnglish) ? '#ccc' : 'linear-gradient(45deg, #28a745, #20c997)',
                        color: 'white',
                        border: 'none',
                        padding: '0.8rem 1.5rem',
                        borderRadius: '25px',
                        fontSize: '1rem',
                        fontWeight: 'bold',
                        cursor: (!viewedChinese || !viewedEnglish) ? 'not-allowed' : 'pointer'
                      }}
                    >
                      {currentWordIndex === getCurrentData().vocabulary.length - 1 ? '开始游戏 →' : '下一个词汇 →'}
                    </button>
                  </div>
                </div>
              </div>
            );
          }

          // Game phase
          if (currentPhase === 'game') {
            const currentQ = getCurrentData().gameQuestions[currentQuestion];
            return (
              <div style={{ 
                maxWidth: '800px', 
                margin: '0 auto', 
                padding: '2rem',
                minHeight: '100vh',
                backgroundColor: '#f8f9fa'
              }}>
                <button 
                  onClick={backToMenu}
                  style={{
                    position: 'absolute',
                    top: '2rem',
                    right: '2rem',
                    background: '#666',
                    color: 'white',
                    border: 'none',
                    padding: '0.5rem 1rem',
                    borderRadius: '5px',
                    cursor: 'pointer'
                  }}
                >🏠 返回主页</button>
                
                <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
                  <h1 style={{ fontSize: '2.5rem', color: '#2c3e50' }}>🎮 填空游戏</h1>
                  <p style={{ fontSize: '1.2rem', color: '#7f8c8d' }}>{chapterTitles[currentChapter]}</p>
                </div>
                
                <div style={{
                  background: 'white',
                  borderRadius: '20px',
                  padding: '2rem',
                  boxShadow: '0 10px 30px rgba(0,0,0,0.1)'
                }}>
                  <div style={{ 
                    textAlign: 'center', 
                    fontSize: '1.2rem', 
                    color: '#666', 
                    marginBottom: '2rem' 
                  }}>
                    第 {currentQuestion + 1} 题 / {getCurrentData().gameQuestions.length} 题
                  </div>
                  
                  <div style={{
                    background: '#fff3cd',
                    padding: '2rem',
                    borderRadius: '15px',
                    textAlign: 'center',
                    marginBottom: '2rem',
                    border: '2px solid #ffc107'
                  }}>
                    <div style={{ 
                      fontSize: '1.3rem', 
                      lineHeight: 1.6,
                      marginBottom: '1rem',
                      color: '#333'
                    }}>
                      {currentQ.text}
                    </div>
                    <div style={{ 
                      fontSize: '1.1rem', 
                      color: '#666',
                      fontStyle: 'italic'
                    }}>
                      {currentQ.english}
                    </div>
                  </div>
                  
                  <div style={{ 
                    display: 'grid', 
                    gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', 
                    gap: '1rem',
                    margin: '2rem 0'
                  }}>
                    {currentQ.options.map((option, index) => (
                      <button 
                        key={index}
                        onClick={() => handleGameAnswer(option)}
                        style={{
                          background: 'linear-gradient(45deg, #667eea, #764ba2)',
                          color: 'white',
                          border: 'none',
                          padding: '1rem',
                          borderRadius: '15px',
                          fontSize: '1.1rem',
                          fontWeight: 'bold',
                          cursor: 'pointer',
                          transition: 'all 0.3s ease'
                        }}
                      >
                        {option}<br/>
                        <small style={{ opacity: 0.8 }}>{currentQ.optionsEnglish[index]}</small>
                      </button>
                    ))}
                  </div>
                  
                  {wrongCount > 0 && (
                    <div style={{
                      background: '#f8d7da',
                      color: '#721c24',
                      padding: '1rem',
                      borderRadius: '10px',
                      textAlign: 'center',
                      margin: '1rem 0'
                    }}>
                      已答错 {wrongCount} 次，再错 {3 - wrongCount} 次将重新开始！
                    </div>
                  )}
                  
                  <div style={{ 
                    display: 'flex', 
                    justifyContent: 'center',
                    margin: '2rem 0'
                  }}>
                    <button 
                      onClick={() => setCurrentPhase('learning')}
                      style={{
                        background: '#666',
                        color: 'white',
                        border: 'none',
                        padding: '0.8rem 1.5rem',
                        borderRadius: '25px',
                        fontSize: '1rem',
                        fontWeight: 'bold',
                        cursor: 'pointer'
                      }}
                    >
                      ← 返回词汇学习
                    </button>
                  </div>
                </div>
              </div>
            );
          }

          // Reading phase
          if (currentPhase === 'reading') {
            if (!isReading) {
              return (
                <div style={{ 
                  maxWidth: '800px', 
                  margin: '0 auto', 
                  padding: '2rem',
                  minHeight: '100vh',
                  backgroundColor: '#f8f9fa'
                }}>
                  <button 
                    onClick={backToMenu}
                    style={{
                      position: 'absolute',
                      top: '2rem',
                      right: '2rem',
                      background: '#666',
                      color: 'white',
                      border: 'none',
                      padding: '0.5rem 1rem',
                      borderRadius: '5px',
                      cursor: 'pointer'
                    }}
                  >🏠 返回主页</button>
                  
                  <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
                    <h1 style={{ fontSize: '2.5rem', color: '#2c3e50' }}>🎉 游戏完成！</h1>
                    <p style={{ fontSize: '1.2rem', color: '#7f8c8d' }}>{chapterTitles[currentChapter]}</p>
                  </div>
                  
                  <div style={{
                    background: 'white',
                    borderRadius: '20px',
                    padding: '2rem',
                    boxShadow: '0 10px 30px rgba(0,0,0,0.1)'
                  }}>
                    <div style={{ 
                      textAlign: 'center',
                      marginBottom: '2rem'
                    }}>
                      <div style={{ 
                        fontSize: '4rem',
                        marginBottom: '1rem'
                      }}>🏆</div>
                      <h2 style={{ 
                        fontSize: '2rem', 
                        color: '#28a745',
                        marginBottom: '1rem'
                      }}>恭喜完成学习！</h2>
                      <p style={{ 
                        fontSize: '1.2rem', 
                        color: '#666',
                        marginBottom: '2rem'
                      }}>选择你想要的朗读方式：</p>
                    </div>
                    
                    <div style={{ 
                      display: 'flex', 
                      justifyContent: 'center',
                      gap: '2rem',
                      margin: '2rem 0',
                      flexWrap: 'wrap'
                    }}>
                      <button 
                        onClick={() => handleReading('chinese')}
                        style={{
                          background: 'linear-gradient(45deg, #dc3545, #c82333)',
                          color: 'white',
                          border: 'none',
                          padding: '1.5rem 2rem',
                          borderRadius: '25px',
                          fontSize: '1.2rem',
                          fontWeight: 'bold',
                          cursor: 'pointer',
                          minWidth: '200px'
                        }}
                      >
                        🇨🇳 中文朗读
                      </button>
                      <button 
                        onClick={() => handleReading('english')}
                        style={{
                          background: 'linear-gradient(45deg, #007bff, #0056b3)',
                          color: 'white',
                          border: 'none',
                          padding: '1.5rem 2rem',
                          borderRadius: '25px',
                          fontSize: '1.2rem',
                          fontWeight: 'bold',
                          cursor: 'pointer',
                          minWidth: '200px'
                        }}
                      >
                        🇺🇸 英文朗读
                      </button>
                    </div>
                    
                    <div style={{ 
                      display: 'flex', 
                      justifyContent: 'center',
                      margin: '2rem 0'
                    }}>
                      <button 
                        onClick={() => resetChapterData()}
                        style={{
                          background: '#666',
                          color: 'white',
                          border: 'none',
                          padding: '0.8rem 1.5rem',
                          borderRadius: '25px',
                          fontSize: '1rem',
                          fontWeight: 'bold',
                          cursor: 'pointer'
                        }}
                      >
                        🔄 重新开始本章
                      </button>
                    </div>
                  </div>
                </div>
              );
            } else {
              const sentences = readingLanguage === 'chinese' ? getCurrentData().chineseSentences : getCurrentData().englishSentences;
              
              return (
                <div style={{ 
                  maxWidth: '800px', 
                  margin: '0 auto', 
                  padding: '2rem',
                  minHeight: '100vh',
                  backgroundColor: '#f8f9fa'
                }}>
                  <button 
                    onClick={backToMenu}
                    style={{
                      position: 'absolute',
                      top: '2rem',
                      right: '2rem',
                      background: '#666',
                      color: 'white',
                      border: 'none',
                      padding: '0.5rem 1rem',
                      borderRadius: '5px',
                      cursor: 'pointer'
                    }}
                  >🏠 返回主页</button>
                  
                  <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
                    <h1 style={{ fontSize: '2.5rem', color: '#2c3e50' }}>📖 {readingLanguage === 'chinese' ? '中文朗读' : 'English Reading'}</h1>
                    <p style={{ fontSize: '1.2rem', color: '#7f8c8d' }}>{chapterTitles[currentChapter]}</p>
                  </div>
                  
                  <div style={{
                    background: 'white',
                    borderRadius: '20px',
                    padding: '2rem',
                    boxShadow: '0 10px 30px rgba(0,0,0,0.1)'
                  }}>
                    <div style={{ 
                      textAlign: 'center',
                      fontSize: '1.2rem', 
                      color: '#666', 
                      marginBottom: '2rem' 
                    }}>
                      第 {currentSentence + 1} 句 / {sentences.length} 句
                    </div>
                    
                    <div style={{
                      background: '#fffbf0',
                      padding: '2rem',
                      borderRadius: '15px',
                      borderLeft: '4px solid #ffd700',
                      margin: '2rem 0'
                    }}>
                      {sentences.map((sentence, index) => (
                        <div 
                          key={index}
                          style={{
                            fontSize: '1.1rem',
                            lineHeight: 1.8,
                            margin: '1rem 0',
                            padding: '0.5rem',
                            borderRadius: '5px',
                            ...(index === currentSentence ? {
                              background: '#fff3cd',
                              border: '2px solid #ffc107',
                              fontWeight: 'bold',
                              color: '#856404'
                            } : {})
                          }}
                        >
                          {sentence}
                        </div>
                      ))}
                    </div>
                    
                    <div style={{ 
                      display: 'flex', 
                      justifyContent: 'center',
                      gap: '1rem',
                      margin: '2rem 0',
                      flexWrap: 'wrap'
                    }}>
                      <button 
                        onClick={() => speakText(sentences[currentSentence], readingLanguage === 'chinese' ? 'zh-CN' : 'en-US')}
                        style={{
                          background: 'linear-gradient(45deg, #667eea, #764ba2)',
                          color: 'white',
                          border: 'none',
                          padding: '0.8rem 1.5rem',
                          borderRadius: '25px',
                          fontSize: '1rem',
                          fontWeight: 'bold',
                          cursor: 'pointer'
                        }}
                      >
                        🔊 重new朗读这句
                      </button>
                      <button 
                        onClick={handleNextSentence}
                        style={{
                          background: 'linear-gradient(45deg, #667eea, #764ba2)',
                          color: 'white',
                          border: 'none',
                          padding: '0.8rem 1.5rem',
                          borderRadius: '25px',
                          fontSize: '1rem',
                          fontWeight: 'bold',
                          cursor: 'pointer'
                        }}
                      >
                        {currentSentence < sentences.length - 1 ? '下一句 →' : '完成朗读 ✅'}
                      </button>
                    </div>
                    
                    <div style={{ 
                      display: 'flex', 
                      justifyContent: 'center',
                      margin: '2rem 0'
                    }}>
                      <button 
                        onClick={() => {setIsReading(false); setReadingLanguage('');}}
                        style={{
                          background: '#666',
                          color: 'white',
                          border: 'none',
                          padding: '0.8rem 1.5rem',
                          borderRadius: '25px',
                          fontSize: '1rem',
                          fontWeight: 'bold',
                          cursor: 'pointer'
                        }}
                      >
                        ← 返回选择语言
                      </button>
                    </div>
                  </div>
                </div>
              );
            }
          }

          return null;
        };

        // Render the app with error handling
        try {
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(<ChineseLearningCompleteApp />);
        } catch (error) {
            console.error('Error rendering app:', error);
            document.getElementById('root').innerHTML = `
                <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif;">
                    <div style="text-align: center; max-width: 500px; padding: 20px;">
                        <h2 style="color: #e74c3c;">Game Loading Error</h2>
                        <p>The Chinese Learning Complete game failed to load. Please try:</p>
                        <ul style="text-align: left; margin: 20px 0;">
                            <li>Refreshing the page</li>
                            <li>Checking your internet connection</li>
                            <li>Using a different browser</li>
                        </ul>
                        <button onclick="location.reload()" style="background: #3498db; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
                            Refresh Page
                        </button>
                    </div>
                </div>
            `;
        }
    </script>
    
    <!-- Fallback script for when React/Babel fails to load -->
    <script>
        // Check if React loaded properly after a short delay
        setTimeout(function() {
            if (typeof React === 'undefined' || typeof ReactDOM === 'undefined' || typeof Babel === 'undefined') {
                document.getElementById('root').innerHTML = `
                    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; font-family: Arial, sans-serif;">
                        <div style="text-align: center; max-width: 500px; padding: 20px;">
                            <h2 style="color: #e74c3c;">Resource Loading Error</h2>
                            <p>Required resources failed to load. This might be due to:</p>
                            <ul style="text-align: left; margin: 20px 0;">
                                <li>Poor internet connection</li>
                                <li>CDN service unavailable</li>
                                <li>Browser security settings</li>
                            </ul>
                            <button onclick="location.reload()" style="background: #3498db; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px;">
                                Try Again
                            </button>
                            <button onclick="window.history.back()" style="background: #95a5a6; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
                                Go Back
                            </button>
                        </div>
                    </div>
                `;
            }
        }, 3000);
    </script>
</body>
</html>