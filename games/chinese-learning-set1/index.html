<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Learning Set 1 - AEC Educational Games</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const ChineseLearningSet1 = () => {
          const [currentChapter, setCurrentChapter] = useState('menu');
          const [currentPhase, setCurrentPhase] = useState('learning');
          const [currentWordIndex, setCurrentWordIndex] = useState(0);
          const [viewedChinese, setViewedChinese] = useState(false);
          const [viewedEnglish, setViewedEnglish] = useState(false);
          const [gameAnswers, setGameAnswers] = useState({});
          const [wrongCount, setWrongCount] = useState(0);
          const [currentQuestion, setCurrentQuestion] = useState(0);
          const [gameCompleted, setGameCompleted] = useState(false);
          const [readingLanguage, setReadingLanguage] = useState('');
          const [currentSentence, setCurrentSentence] = useState(-1);
          const [isReading, setIsReading] = useState(false);

          // Data for all chapters
          const chapter1Data = {
            vocabulary: [
              { word: '办法', pinyin: 'bàn fǎ', chinese: '处理事情或解决问题的方法', english: 'way; method; solution' },
              { word: '脑筋', pinyin: 'nǎo jīn', chinese: '思维和理解能力；想法', english: 'brain; mind; ideas' },
              { word: '浮', pinyin: 'fú', chinese: '漂在水面上，不下沉', english: 'to float' },
              { word: '树洞', pinyin: 'shù dòng', chinese: '树干上的空洞', english: 'tree hollow' },
              { word: '着急', pinyin: 'zháo jí', chinese: '心里紧张，不安', english: 'anxious; worried' }
            ],
            gameQuestions: [
              { 
                text: '一个不___，皮球跳进一棵大树的树洞里去了。', 
                english: 'One of them was not ___, and the ball bounced into a tree hollow.',
                answer: '小心', 
                options: ['聪明', '小心', '着急', '办法']
              },
              { 
                text: '皮球跳进一棵大树的___里去了。', 
                english: 'The ball bounced into a ___ of a big tree.',
                answer: '树洞', 
                options: ['树枝', '情形', '树洞', '脑筋']
              }
            ],
            chineseSentences: [
              '几个孩子在一棵大树下拍球，一个不小心，皮球跳进一棵大树的树洞里去了。',
              '大家很着急，争着把手伸进树洞里去拿球。'
            ],
            englishSentences: [
              'A few children were playing with a ball under a big tree. One of them was not careful, and the ball bounced into a tree hollow.',
              'Everyone became anxious and tried to reach into the hole to get the ball.'
            ]
          };

          const encouragementWords = ['很厉害！', '你棒棒的！', '太棒了！', '继续加油！', '你真聪明！'];

          const isAppleDevice = /iPad|iPhone|iPod|Mac/.test(navigator.userAgent);

          const speakText = (text, language = 'zh-CN') => {
            if ('speechSynthesis' in window) {
              window.speechSynthesis.cancel();
              const utterance = new SpeechSynthesisUtterance(text);
              utterance.lang = language;
              utterance.rate = isAppleDevice ? 0.7 : 0.8;
              utterance.pitch = 1.2;
              utterance.volume = 1.0;
              window.speechSynthesis.speak(utterance);
            }
          };

          const getCurrentData = () => chapter1Data; // Simplified for now

          const resetChapterData = () => {
            setCurrentPhase('learning');
            setCurrentWordIndex(0);
            setViewedChinese(false);
            setViewedEnglish(false);
            setGameAnswers({});
            setWrongCount(0);
            setCurrentQuestion(0);
            setGameCompleted(false);
            setReadingLanguage('');
            setCurrentSentence(-1);
            setIsReading(false);
          };

          const handleChapterSelect = (chapter) => {
            setCurrentChapter(chapter);
            resetChapterData();
          };

          const backToMenu = () => {
            if ('speechSynthesis' in window) {
              window.speechSynthesis.cancel();
            }
            setCurrentChapter('menu');
            resetChapterData();
          };

          const chapterTitle = currentChapter === 'chapter1' ? '第一篇：华国的办法' : 
                              currentChapter === 'chapter2' ? '第二篇：好朋友' : 
                              currentChapter === 'chapter3' ? '第三篇：小狗的家' : 
                              '第四篇：种花的体会';

          // Main Menu
          if (currentChapter === 'menu') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-100 via-indigo-50 to-purple-100 p-6">
                <div className="max-w-6xl mx-auto">
                  <div className="bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl p-12">
                    <div className="text-center mb-12">
                      <h1 className="text-5xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-4">
                        📚 第一套：基础故事集
                      </h1>
                      <h2 className="text-3xl font-semibold text-gray-600 mb-2">
                        Set 1: Basic Story Collection (Chapters 1-4)
                      </h2>
                      <p className="text-xl text-gray-500 mb-8">
                        智慧解决问题、友谊、温暖家庭、成长教育<br/>
                        Problem solving, friendship, family warmth, growth education
                      </p>
                    </div>

                    <div className="grid md:grid-cols-2 gap-6 mb-8">
                      <div className="bg-gradient-to-br from-orange-50 to-red-100 p-6 rounded-xl border-2 border-orange-200 hover:border-orange-400 transition-all duration-300 hover:shadow-lg">
                        <div className="text-center mb-6">
                          <div className="text-5xl mb-4">⚽</div>
                          <h3 className="text-xl font-bold text-orange-700 mb-2">第一篇：华国的办法</h3>
                          <h4 className="text-lg font-semibold text-orange-600 mb-3">Chapter 1: Hua Guo's Solution</h4>
                          <p className="text-gray-600 mb-3 text-sm">
                            学习关于解决问题的词汇<br/>
                            Learn problem-solving words
                          </p>
                        </div>
                        <button
                          onClick={() => handleChapterSelect('chapter1')}
                          className="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg text-sm transition-colors duration-300"
                        >
                          📖 开始学习
                        </button>
                      </div>

                      <div className="bg-gradient-to-br from-blue-50 to-indigo-100 p-6 rounded-xl border-2 border-blue-200 hover:border-blue-400 transition-all duration-300 hover:shadow-lg">
                        <div className="text-center mb-6">
                          <div className="text-5xl mb-4">👫</div>
                          <h3 className="text-xl font-bold text-blue-700 mb-2">第二篇：好朋友</h3>
                          <h4 className="text-lg font-semibold text-blue-600 mb-3">Chapter 2: Good Friends</h4>
                          <p className="text-gray-600 mb-3 text-sm">
                            学习关于友谊的词汇<br/>
                            Learn friendship words
                          </p>
                        </div>
                        <button
                          onClick={() => handleChapterSelect('chapter2')}
                          className="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg text-sm transition-colors duration-300"
                        >
                          📖 开始学习
                        </button>
                      </div>

                      <div className="bg-gradient-to-br from-green-50 to-emerald-100 p-6 rounded-xl border-2 border-green-200 hover:border-green-400 transition-all duration-300 hover:shadow-lg">
                        <div className="text-center mb-6">
                          <div className="text-5xl mb-4">🐕</div>
                          <h3 className="text-xl font-bold text-green-700 mb-2">第三篇：小狗的家</h3>
                          <h4 className="text-lg font-semibold text-green-600 mb-3">Chapter 3: Puppy's Home</h4>
                          <p className="text-gray-600 mb-3 text-sm">
                            学习关于温暖和关爱的词汇<br/>
                            Learn warmth and care words
                          </p>
                        </div>
                        <button
                          onClick={() => handleChapterSelect('chapter3')}
                          className="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg text-sm transition-colors duration-300"
                        >
                          📖 开始学习
                        </button>
                      </div>

                      <div className="bg-gradient-to-br from-purple-50 to-violet-100 p-6 rounded-xl border-2 border-purple-200 hover:border-purple-400 transition-all duration-300 hover:shadow-lg">
                        <div className="text-center mb-6">
                          <div className="text-5xl mb-4">🌸</div>
                          <h3 className="text-xl font-bold text-purple-700 mb-2">第四篇：种花的体会</h3>
                          <h4 className="text-lg font-semibold text-purple-600 mb-3">Chapter 4: Learning from Flowers</h4>
                          <p className="text-gray-600 mb-3 text-sm">
                            学习关于栽培和关怀的词汇<br/>
                            Learn cultivation and care words
                          </p>
                        </div>
                        <button
                          onClick={() => handleChapterSelect('chapter4')}
                          className="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-4 rounded-lg text-sm transition-colors duration-300"
                        >
                          📖 开始学习
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          // Vocabulary Learning Phase
          if (currentPhase === 'learning') {
            const currentWord = getCurrentData().vocabulary[currentWordIndex];
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 p-6">
                <div className="max-w-4xl mx-auto">
                  <div className="bg-white rounded-lg shadow-lg p-8">
                    <div className="flex items-center justify-between mb-6">
                      <h1 className="text-3xl font-bold text-purple-600">
                        📖 词汇学习 - {chapterTitle}
                      </h1>
                      <div className="flex items-center gap-4">
                        <div className="text-lg text-gray-600">
                          {currentWordIndex + 1} / {getCurrentData().vocabulary.length}
                        </div>
                        <button
                          onClick={backToMenu}
                          className="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                        >
                          🏠 返回主页
                        </button>
                      </div>
                    </div>
                    
                    <div className="text-center mb-8">
                      <div className="text-6xl font-bold text-blue-600 mb-4">
                        {currentWord.word}
                      </div>
                      <div className="text-2xl text-gray-500 mb-4">{currentWord.pinyin}</div>
                      
                      <button
                        onClick={() => speakText(currentWord.word)}
                        className="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold mb-6 transition-colors"
                      >
                        🔊 朗读词语
                      </button>
                      
                      <div className="space-y-4">
                        {viewedChinese ? (
                          <div className="bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-400">
                            <p className="text-lg"><strong>中文解释：</strong>{currentWord.chinese}</p>
                          </div>
                        ) : (
                          <button
                            onClick={() => {
                              setViewedChinese(true);
                              speakText(currentWord.chinese);
                            }}
                            className="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors w-full"
                          >
                            查看华语解释
                          </button>
                        )}
                        
                        {viewedEnglish ? (
                          <div className="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-400">
                            <p className="text-lg"><strong>English:</strong> {currentWord.english}</p>
                          </div>
                        ) : (
                          <button
                            onClick={() => {
                              setViewedEnglish(true);
                              speakText(currentWord.english, 'en-US');
                            }}
                            className="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors w-full"
                          >
                            查看英文解释
                          </button>
                        )}
                        
                        {viewedChinese && viewedEnglish && (
                          <div className="flex justify-center gap-4">
                            {currentWordIndex > 0 && (
                              <button
                                onClick={() => {
                                  setCurrentWordIndex(currentWordIndex - 1);
                                  setViewedChinese(false);
                                  setViewedEnglish(false);
                                }}
                                className="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg text-lg font-semibold transition-colors"
                              >
                                返回上一词汇
                              </button>
                            )}
                            <button
                              onClick={() => {
                                if (currentWordIndex < getCurrentData().vocabulary.length - 1) {
                                  setCurrentWordIndex(currentWordIndex + 1);
                                  setViewedChinese(false);
                                  setViewedEnglish(false);
                                } else {
                                  setCurrentPhase('game');
                                }
                              }}
                              className="bg-purple-500 hover:bg-purple-600 text-white px-8 py-4 rounded-lg text-xl font-semibold transition-colors"
                            >
                              {currentWordIndex < getCurrentData().vocabulary.length - 1 ? '下一个词汇' : '开始练习'}
                            </button>
                          </div>
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          // Fill-in-the-blank Game Phase
          if (currentPhase === 'game') {
            const currentQ = getCurrentData().gameQuestions[currentQuestion];
            return (
              <div className="min-h-screen bg-gradient-to-br from-green-100 to-blue-100 p-6">
                <div className="max-w-4xl mx-auto">
                  <div className="bg-white rounded-lg shadow-lg p-8">
                    <div className="flex items-center justify-between mb-6">
                      <h1 className="text-3xl font-bold text-green-600">
                        🎮 填空练习 - {chapterTitle}
                      </h1>
                      <div className="flex items-center gap-4">
                        <div className="text-lg text-gray-600">
                          第 {currentQuestion + 1} 题 / {getCurrentData().gameQuestions.length}
                        </div>
                        <button
                          onClick={backToMenu}
                          className="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                        >
                          🏠 返回主页
                        </button>
                      </div>
                    </div>
                    
                    <div className="text-center mb-8">
                      <div className="space-y-4 mb-8">
                        <div className="p-6 bg-gray-50 rounded-lg">
                          <div className="flex items-center justify-between mb-2">
                            <span className="text-xl text-gray-800 flex-1">{currentQ.text}</span>
                            <button
                              onClick={() => speakText(currentQ.text)}
                              className="bg-gray-500 hover:bg-gray-600 text-white p-2 rounded-full ml-4 transition-colors"
                            >
                              🔊
                            </button>
                          </div>
                          <div className="flex items-center justify-between">
                            <span className="text-lg text-gray-600 flex-1">{currentQ.english}</span>
                            <button
                              onClick={() => speakText(currentQ.english, 'en-US')}
                              className="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full ml-4 transition-colors"
                            >
                              🔊
                            </button>
                          </div>
                        </div>
                      </div>
                      
                      <div className="grid grid-cols-1 gap-3 max-w-2xl mx-auto">
                        {currentQ.options.map((option, index) => (
                          <button
                            key={index}
                            onClick={() => {
                              const isCorrect = option === currentQ.answer;
                              if (isCorrect) {
                                const randomEncouragement = encouragementWords[Math.floor(Math.random() * encouragementWords.length)];
                                alert(randomEncouragement);
                                speakText(randomEncouragement);
                                
                                if (currentQuestion < getCurrentData().gameQuestions.length - 1) {
                                  setCurrentQuestion(currentQuestion + 1);
                                } else {
                                  setCurrentPhase('reading');
                                }
                              } else {
                                alert('答错了，再试试！');
                                speakText('答错了，再试试！');
                              }
                            }}
                            className="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg text-lg font-semibold transition-colors"
                          >
                            {option}
                          </button>
                        ))}
                      </div>
                      
                      <button
                        onClick={() => setCurrentPhase('learning')}
                        className="mt-6 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                      >
                        返回词汇学习
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          // Story Reading Phase
          if (currentPhase === 'reading') {
            if (!isReading) {
              return (
                <div className="min-h-screen bg-gradient-to-br from-purple-100 to-pink-100 p-6">
                  <div className="max-w-4xl mx-auto">
                    <div className="bg-white rounded-lg shadow-lg p-8 text-center">
                      <div className="flex items-center justify-between mb-8">
                        <h1 className="text-3xl font-bold text-purple-600">
                          🔊 作文朗读 - {chapterTitle}
                        </h1>
                        <button
                          onClick={backToMenu}
                          className="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                        >
                          🏠 返回主页
                        </button>
                      </div>
                      <p className="text-xl text-gray-700 mb-8">
                        恭喜完成所有练习！选择语言开始朗读：<br/>
                        Congratulations! Choose a language to start reading:
                      </p>
                      
                      <div className="space-y-4">
                        <button
                          onClick={() => {
                            setReadingLanguage('chinese');
                            setCurrentSentence(0);
                            setIsReading(true);
                            setTimeout(() => {
                              speakText(getCurrentData().chineseSentences[0]);
                            }, 500);
                          }}
                          className="bg-red-500 hover:bg-red-600 text-white px-8 py-4 rounded-lg text-xl font-semibold mr-4 transition-colors"
                        >
                          中文朗读 / Chinese Reading
                        </button>
                        <button
                          onClick={() => {
                            setReadingLanguage('english');
                            setCurrentSentence(0);
                            setIsReading(true);
                            setTimeout(() => {
                              speakText(getCurrentData().englishSentences[0], 'en-US');
                            }, 500);
                          }}
                          className="bg-blue-500 hover:bg-blue-600 text-white px-8 py-4 rounded-lg text-xl font-semibold transition-colors"
                        >
                          英文朗读 / English Reading
                        </button>
                      </div>
                      
                      <button
                        onClick={() => resetChapterData()}
                        className="mt-8 bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors"
                      >
                        🔄 重新开始本章
                      </button>
                    </div>
                  </div>
                </div>
              );
            } else {
              const sentences = readingLanguage === 'chinese' ? getCurrentData().chineseSentences : getCurrentData().englishSentences;
              
              return (
                <div className="min-h-screen bg-gradient-to-br from-purple-100 to-pink-100 p-6">
                  <div className="max-w-4xl mx-auto">
                    <div className="bg-white rounded-lg shadow-lg p-8">
                      <div className="flex items-center justify-between mb-8">
                        <h1 className="text-3xl font-bold text-purple-600 text-center">
                          {readingLanguage === 'chinese' ? '中文朗读 / Chinese Reading' : 'English Reading / 英文朗读'}
                        </h1>
                        <button
                          onClick={backToMenu}
                          className="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                        >
                          🏠 返回主页
                        </button>
                      </div>
                      
                      <div className="text-lg text-gray-600 mb-4 text-center">
                        {readingLanguage === 'chinese' 
                          ? `第 ${currentSentence + 1} 句 / ${sentences.length}`
                          : `Sentence ${currentSentence + 1} of ${sentences.length}`
                        }
                      </div>
                      
                      <div className="text-center">
                        <div className="bg-blue-50 p-4 rounded-lg mb-6 border-l-4 border-blue-400">
                          <p className="text-xl font-semibold text-blue-800 mb-2">
                            {readingLanguage === 'chinese' ? '正在朗读：' : 'Now Reading:'}
                          </p>
                          <p className="text-lg text-gray-800">{sentences[currentSentence]}</p>
                        </div>
                        
                        <div className="flex justify-center gap-4">
                          <button
                            onClick={() => speakText(sentences[currentSentence], readingLanguage === 'chinese' ? 'zh-CN' : 'en-US')}
                            className="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors"
                          >
                            🔊 重新朗读这句
                          </button>
                          
                          <button
                            onClick={() => {
                              if (currentSentence < sentences.length - 1) {
                                const nextIndex = currentSentence + 1;
                                setCurrentSentence(nextIndex);
                                setTimeout(() => {
                                  speakText(sentences[nextIndex], readingLanguage === 'chinese' ? 'zh-CN' : 'en-US');
                                }, 300);
                              } else {
                                setIsReading(false);
                                setCurrentPhase('completed');
                                alert('朗读完成！你学得很棒！');
                              }
                            }}
                            className="bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-lg text-xl font-semibold transition-colors"
                          >
                            ▶️ {currentSentence < sentences.length - 1 ? '下一句' : '完成朗读'}
                          </button>
                        </div>
                        
                        <button
                          onClick={() => {
                            setIsReading(false);
                            setReadingLanguage('');
                          }}
                          className="mt-4 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                        >
                          返回选择语言
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              );
            }
          }

          // Completion Phase
          if (currentPhase === 'completed') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-green-100 to-emerald-100 p-6">
                <div className="max-w-4xl mx-auto">
                  <div className="bg-white rounded-lg shadow-lg p-8 text-center">
                    <div className="flex items-center justify-between mb-8">
                      <h1 className="text-3xl font-bold text-green-600">
                        🎉 恭喜完成！
                      </h1>
                      <button
                        onClick={backToMenu}
                        className="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                      >
                        🏠 返回主页
                      </button>
                    </div>
                    
                    <div className="text-center mb-8">
                      <div className="text-6xl mb-6">🌟</div>
                      <h2 className="text-2xl font-bold text-gray-700 mb-4">
                        你已经完成了 {chapterTitle} 的学习！
                      </h2>
                      <p className="text-lg text-gray-600 mb-8">
                        You have completed {chapterTitle}!
                      </p>
                      
                      <div className="space-y-4">
                        <button
                          onClick={() => setCurrentChapter('menu')}
                          className="bg-purple-500 hover:bg-purple-600 text-white px-8 py-4 rounded-lg text-xl font-semibold transition-colors"
                        >
                          🏠 返回主页选择其他章节
                        </button>
                        
                        <button
                          onClick={() => resetChapterData()}
                          className="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors"
                        >
                          🔄 重新学习这一篇
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          return null;
        };

        ReactDOM.render(<ChineseLearningSet1 />, document.getElementById('root'));
    </script>
</body>
</html>