<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Learning Set 1 - AEC Educational Games</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        const { BookOpen, Play, Volume2, RotateCcw, Gamepad2, Speaker, Home, ArrowLeft } = LucideReact;

        const ChineseLearningSet1 = () => {
          const [currentChapter, setCurrentChapter] = useState('menu'); // 'menu', 'chapter1', 'chapter2', 'chapter3', 'chapter4'
          const [currentPhase, setCurrentPhase] = useState('learning');
          const [currentWordIndex, setCurrentWordIndex] = useState(0);
          const [viewedChinese, setViewedChinese] = useState(false);
          const [viewedEnglish, setViewedEnglish] = useState(false);
          const [gameAnswers, setGameAnswers] = useState({});
          const [wrongCount, setWrongCount] = useState(0);
          const [currentQuestion, setCurrentQuestion] = useState(0);
          const [gameCompleted, setGameCompleted] = useState(false);
          const [readingLanguage, setReadingLanguage] = useState('');
          const [currentSentence, setCurrentSentence] = useState(-1);
          const [isReading, setIsReading] = useState(false);

          // ç¬¬ä¸€ç¯‡æ•°æ®
          const chapter1Data = {
            vocabulary: [
              { word: 'åŠæ³•', pinyin: 'bÃ n fÇ', chinese: 'å¤„ç†äº‹æƒ…æˆ–è§£å†³é—®é¢˜çš„æ–¹æ³•', english: 'way; method; solution' },
              { word: 'è„‘ç­‹', pinyin: 'nÇo jÄ«n', chinese: 'æ€ç»´å’Œç†è§£èƒ½åŠ›ï¼›æƒ³æ³•', english: 'brain; mind; ideas' },
              { word: 'æµ®', pinyin: 'fÃº', chinese: 'æ¼‚åœ¨æ°´é¢ä¸Šï¼Œä¸ä¸‹æ²‰', english: 'to float' },
              { word: 'æ ‘æ´', pinyin: 'shÃ¹ dÃ²ng', chinese: 'æ ‘å¹²ä¸Šçš„ç©ºæ´', english: 'tree hollow' },
              { word: 'ç€æ€¥', pinyin: 'zhÃ¡o jÃ­', chinese: 'å¿ƒé‡Œç´§å¼ ï¼Œä¸å®‰', english: 'anxious; worried' },
              { word: 'æƒ…å½¢', pinyin: 'qÃ­ng xÃ­ng', chinese: 'äº‹æƒ…çš„çŠ¶å†µæˆ–æ ·å­', english: 'situation; condition' },
              { word: 'å°å¿ƒ', pinyin: 'xiÇo xÄ«n', chinese: 'æ³¨æ„ï¼Œè°¨æ…ï¼Œä¸ç²—å¿ƒ', english: 'careful; cautious' },
              { word: 'æ ‘æ', pinyin: 'shÃ¹ zhÄ«', chinese: 'æ ‘ä¸Šçš„ææ¡', english: 'tree branch' },
              { word: 'èªæ˜', pinyin: 'cÅng mÃ­ng', chinese: 'å¤´è„‘çµæ´»ï¼Œç†è§£åŠ›å¼º', english: 'clever; smart' },
              { word: 'æ', pinyin: 'tÃ­', chinese: 'ç”¨æ‰‹æ‹¿ç€ï¼ˆå‚ä¸‹çš„ä¸œè¥¿ï¼‰', english: 'to carry (by hand); to lift' }
            ],
            gameQuestions: [
              { 
                text: 'ä¸€ä¸ªä¸___ï¼Œçš®çƒè·³è¿›ä¸€æ£µå¤§æ ‘çš„æ ‘æ´é‡Œå»äº†ã€‚', 
                english: 'One of them was not ___, and the ball bounced into a tree hollow.',
                answer: 'å°å¿ƒ', 
                answerEnglish: 'careful',
                options: ['èªæ˜', 'å°å¿ƒ', 'ç€æ€¥', 'åŠæ³•'],
                optionsEnglish: ['clever', 'careful', 'anxious', 'method']
              },
              { 
                text: 'çš®çƒè·³è¿›ä¸€æ£µå¤§æ ‘çš„___é‡Œå»äº†ã€‚', 
                english: 'The ball bounced into a ___ of a big tree.',
                answer: 'æ ‘æ´', 
                answerEnglish: 'tree hollow',
                options: ['æ ‘æ', 'æƒ…å½¢', 'æ ‘æ´', 'è„‘ç­‹'],
                optionsEnglish: ['tree branch', 'situation', 'tree hollow', 'brain']
              },
              { 
                text: 'å¤§å®¶å¾ˆ___ï¼Œäº‰ç€æŠŠæ‰‹ä¼¸è¿›æ ‘æ´é‡Œå»æ‹¿çƒã€‚', 
                english: 'Everyone became ___ and tried to reach into the hole to get the ball.',
                answer: 'ç€æ€¥', 
                answerEnglish: 'anxious',
                options: ['å°å¿ƒ', 'èªæ˜', 'æµ®', 'ç€æ€¥'],
                optionsEnglish: ['careful', 'clever', 'float', 'anxious']
              },
              { 
                text: 'æœ‰äººæ‰¾æ¥ä¸€æ ¹___ï¼Œä¼¸è¿›æ ‘æ´é‡Œå»æ‹¿çƒã€‚', 
                english: 'Someone brought a ___ and tried to reach the ball.',
                answer: 'æ ‘æ', 
                answerEnglish: 'tree branch',
                options: ['æ ‘æ', 'æ ‘æ´', 'åŠæ³•', 'æ'],
                optionsEnglish: ['tree branch', 'tree hollow', 'method', 'carry']
              },
              { 
                text: 'ä¹Ÿæ²¡æœ‰___æŠŠå®ƒæ‹¿ä¸Šæ¥ã€‚', 
                english: 'They still had no ___ to get it out.',
                answer: 'åŠæ³•', 
                answerEnglish: 'solution',
                options: ['æƒ…å½¢', 'è„‘ç­‹', 'æµ®', 'åŠæ³•'],
                optionsEnglish: ['situation', 'brain', 'float', 'solution']
              },
              { 
                text: 'åå›½æ˜¯ä¸ª___çš„å­©å­ã€‚', 
                english: 'Hua Guo was a ___ child.',
                answer: 'èªæ˜', 
                answerEnglish: 'clever',
                options: ['å°å¿ƒ', 'èªæ˜', 'ç€æ€¥', 'æµ®'],
                optionsEnglish: ['careful', 'clever', 'anxious', 'float']
              },
              { 
                text: 'å¹³æ—¶æœ€çˆ±åŠ¨___ã€‚', 
                english: 'He loved using his ___ .',
                answer: 'è„‘ç­‹', 
                answerEnglish: 'brain',
                options: ['åŠæ³•', 'æ', 'è„‘ç­‹', 'æ ‘æ'],
                optionsEnglish: ['method', 'carry', 'brain', 'tree branch']
              },
              { 
                text: 'ä»–çœ‹åˆ°è¿™ç§___ï¼Œåªè§ä»–çœ¼ç å­ä¸€è½¬ã€‚', 
                english: 'When he saw the ___, his eyes turned.',
                answer: 'æƒ…å½¢', 
                answerEnglish: 'situation',
                options: ['æƒ…å½¢', 'æ ‘æ´', 'å°å¿ƒ', 'èªæ˜'],
                optionsEnglish: ['situation', 'tree hollow', 'careful', 'clever']
              },
              { 
                text: 'ä¸ä¹…ï¼Œ___æ¥äº†ä¸€æ¡¶æ°´ã€‚', 
                english: 'Soon he ___ a bucket of water.',
                answer: 'æ', 
                answerEnglish: 'carried',
                options: ['æµ®', 'æ', 'åŠæ³•', 'è„‘ç­‹'],
                optionsEnglish: ['float', 'carried', 'method', 'brain']
              },
              { 
                text: 'çš®çƒ___äº†ä¸Šæ¥ã€‚', 
                english: 'The ball ___ up.',
                answer: 'æµ®', 
                answerEnglish: 'floated',
                options: ['ç€æ€¥', 'æ ‘æ', 'æ', 'æµ®'],
                optionsEnglish: ['anxious', 'tree branch', 'carry', 'floated']
              }
            ],
            chineseSentences: [
              'å‡ ä¸ªå­©å­åœ¨ä¸€æ£µå¤§æ ‘ä¸‹æ‹çƒï¼Œä¸€ä¸ªä¸å°å¿ƒï¼Œçš®çƒè·³è¿›ä¸€æ£µå¤§æ ‘çš„æ ‘æ´é‡Œå»äº†ã€‚',
              'å¤§å®¶å¾ˆç€æ€¥ï¼Œäº‰ç€æŠŠæ‰‹ä¼¸è¿›æ ‘æ´é‡Œå»æ‹¿çƒã€‚',
              'å¯æ˜¯ï¼Œä»–ä»¬çš„æ‰‹å¤ªçŸ­äº†ï¼Œæ²¡æœ‰äººèƒ½æŠŠçš®çƒæ‹¿ä¸Šæ¥ã€‚',
              'æœ‰äººæ‰¾æ¥ä¸€æ ¹æ ‘æï¼Œä¼¸è¿›æ ‘æ´é‡Œå»æ‹¿çƒï¼Œå¯æ˜¯çƒå¤ªæ»‘äº†ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•æŠŠå®ƒæ‹¿ä¸Šæ¥ã€‚',
              'å¤§å®¶æ€¥å¾—å¿«å“­å‡ºæ¥äº†ã€‚',
              'åå›½æ˜¯ä¸ªèªæ˜çš„å­©å­ï¼Œå¹³æ—¶æœ€çˆ±åŠ¨è„‘ç­‹ã€‚',
              'ä»–çœ‹åˆ°è¿™ç§æƒ…å½¢ï¼Œåªè§ä»–çœ¼ç å­ä¸€è½¬ï¼Œå°±æƒ³åˆ°åŠæ³•äº†ã€‚',
              'ä»–è·‘å›å®¶å»ï¼Œä¸ä¹…ï¼Œææ¥äº†ä¸€æ¡¶æ°´ã€‚',
              'ä»–æŠŠæ°´å€’è¿›æ ‘æ´é‡Œï¼Œçš®çƒæµ®äº†ä¸Šæ¥ã€‚',
              'ä»–å°±è½»æ˜“åœ°æ‹¿åˆ°çƒäº†ã€‚'
            ],
            englishSentences: [
              'A few children were playing with a ball under a big tree. One of them was not careful, and the ball bounced into a tree hollow.',
              'Everyone became anxious and tried to reach into the hole to get the ball.',
              'But their arms were too shortâ€”no one could get the ball out.',
              'Someone brought a tree branch and tried to reach the ball, but it was too slippery, and they still had no solution.',
              'The children were about to cry.',
              'Hua Guo was a clever child who loved using his brain.',
              'When he saw the situation, his eyes turned and he came up with an idea.',
              'He ran home, and soon carried a bucket of water.',
              'He poured the water into the tree hollow, and the ball floated up.',
              'He easily picked it up.'
            ]
          };

          // ç¬¬äºŒç¯‡æ•°æ®
          const chapter2Data = {
            vocabulary: [
              { word: 'éª„å‚²', pinyin: 'jiÄo Ã o', chinese: 'çœ‹ä¸èµ·åˆ«äººï¼›ä¹Ÿå¯æŒ‡æ„Ÿåˆ°è‡ªè±ª', english: 'arrogant / proud' },
              { word: 'å­¦ä¹ ', pinyin: 'xuÃ© xÃ­', chinese: 'é€šè¿‡è¯»ä¹¦æˆ–ç»ƒä¹ æ¥è·å¾—çŸ¥è¯†æˆ–æŠ€èƒ½', english: 'to study / to learn' },
              { word: 'å›å®¶', pinyin: 'huÃ­ jiÄ', chinese: 'ä»å¤–é¢è¿”å›è‡ªå·±çš„å®¶é‡Œ', english: 'to go home' },
              { word: 'å‚åŠ ', pinyin: 'cÄn jiÄ', chinese: 'å‚ä¸æ´»åŠ¨æˆ–ç»„ç»‡', english: 'to participate / to join' },
              { word: 'ç¯®çƒ', pinyin: 'lÃ¡n qiÃº', chinese: 'ä¸€ç§ç”¨æ‰‹æ‹æ‰“çƒå¹¶æŠ•è¿›ç¯®ç­çš„è¿åŠ¨', english: 'basketball' },
              { word: 'å¸®åŠ©', pinyin: 'bÄng zhÃ¹', chinese: 'ååŠ©åˆ«äººè§£å†³å›°éš¾æˆ–å®Œæˆä»»åŠ¡', english: 'to help / to assist' },
              { word: 'æ¯”èµ›', pinyin: 'bÇ sÃ i', chinese: 'ä¸ºäº‰å–èƒœåˆ©è€Œè¿›è¡Œçš„ç«èµ›æ´»åŠ¨', english: 'competition / match' },
              { word: 'åŒç­', pinyin: 'tÃ³ng bÄn', chinese: 'åœ¨åŒä¸€ä¸ªç­çº§', english: 'same class' },
              { word: 'é«˜å…´', pinyin: 'gÄo xÃ¬ng', chinese: 'å¿ƒæƒ…æ„‰å¿«ï¼Œå¿«ä¹', english: 'happy / glad' },
              { word: 'è¦å¥½', pinyin: 'yÃ o hÇo', chinese: 'æ„Ÿæƒ…å¥½ï¼Œå…³ç³»äº²å¯†', english: 'close (in relationship) / good friends' }
            ],
            gameQuestions: [
              { 
                text: 'æˆ‘æœ‰å¾ˆå¤šæœ‹å‹,æ–‡é”¦å’Œæˆ‘æœ€___ã€‚', 
                english: 'I have many friends, and Wen Jin and I are the ___.',
                answer: 'è¦å¥½', 
                answerEnglish: 'closest',
                options: ['éª„å‚²', 'è¦å¥½', 'é«˜å…´', 'å¸®åŠ©'],
                optionsEnglish: ['arrogant', 'closest', 'happy', 'help']
              },
              { 
                text: 'æˆ‘ä»¬æ˜¯___åŒå­¦', 
                english: 'We are ___ classmates',
                answer: 'åŒç­', 
                answerEnglish: 'same class',
                options: ['æ¯”èµ›', 'ç¯®çƒ', 'åŒç­', 'å‚åŠ '],
                optionsEnglish: ['competition', 'basketball', 'same class', 'participate']
              },
              { 
                text: 'ç»å¸¸ä¸€èµ·ä¸Šå­¦,ä¸€èµ·___ã€‚', 
                english: 'We often go to school and ___ together.',
                answer: 'å›å®¶', 
                answerEnglish: 'go home',
                options: ['å­¦ä¹ ', 'éª„å‚²', 'å¸®åŠ©', 'å›å®¶'],
                optionsEnglish: ['study', 'arrogant', 'help', 'go home']
              },
              { 
                text: 'ä½†ä»–ä¸€ç‚¹ä¹Ÿä¸___', 
                english: 'But he is not ___ at all',
                answer: 'éª„å‚²', 
                answerEnglish: 'arrogant',
                options: ['é«˜å…´', 'éª„å‚²', 'è¦å¥½', 'åŒç­'],
                optionsEnglish: ['happy', 'arrogant', 'close', 'same class']
              },
              { 
                text: 'è¿˜å¸¸å¸¸___åŠŸè¯¾å·®çš„åŒå­¦ã€‚', 
                english: 'He often ___ classmates who are weak in their schoolwork.',
                answer: 'å¸®åŠ©', 
                answerEnglish: 'helps',
                options: ['æ¯”èµ›', 'å‚åŠ ', 'å­¦ä¹ ', 'å¸®åŠ©'],
                optionsEnglish: ['competition', 'participate', 'study', 'helps']
              },
              { 
                text: 'ä»–ä¹Ÿæ—¶å¸¸___è¯¾å¤–æ´»åŠ¨ã€‚', 
                english: 'He often ___ in extracurricular activities.',
                answer: 'å‚åŠ ', 
                answerEnglish: 'participates',
                options: ['å‚åŠ ', 'å¸®åŠ©', 'å›å®¶', 'éª„å‚²'],
                optionsEnglish: ['participates', 'helps', 'go home', 'arrogant']
              },
              { 
                text: 'ä»–çš„___æ‰“å¾—å¾ˆå¥½', 
                english: 'He plays ___ very well',
                answer: 'ç¯®çƒ', 
                answerEnglish: 'basketball',
                options: ['æ¯”èµ›', 'å­¦ä¹ ', 'ç¯®çƒ', 'é«˜å…´'],
                optionsEnglish: ['competition', 'study', 'basketball', 'happy']
              },
              { 
                text: 'æ—¶å¸¸å‚åŠ ___ã€‚', 
                english: 'He often joins ___.',
                answer: 'æ¯”èµ›', 
                answerEnglish: 'competitions',
                options: ['ç¯®çƒ', 'åŒç­', 'è¦å¥½', 'æ¯”èµ›'],
                optionsEnglish: ['basketball', 'same class', 'close', 'competitions']
              },
              { 
                text: 'æˆ‘å¾ˆ___æœ‰æ–‡é”¦è¿™ä¹ˆä¸€ä¸ªå¥½æœ‹å‹', 
                english: 'I feel very ___ to have such a good friend like Wen Jin',
                answer: 'é«˜å…´', 
                answerEnglish: 'happy',
                options: ['éª„å‚²', 'å¸®åŠ©', 'é«˜å…´', 'å‚åŠ '],
                optionsEnglish: ['arrogant', 'help', 'happy', 'participate']
              },
              { 
                text: 'æˆ‘ä¹Ÿè¦å‘ä»–å¤š___ã€‚', 
                english: 'I want to ___ from him more.',
                answer: 'å­¦ä¹ ', 
                answerEnglish: 'learn',
                options: ['å›å®¶', 'å­¦ä¹ ', 'æ¯”èµ›', 'ç¯®çƒ'],
                optionsEnglish: ['go home', 'learn', 'competition', 'basketball']
              }
            ],
            chineseSentences: [
              'æˆ‘æœ‰å¾ˆå¤šæœ‹å‹ï¼Œæ–‡é”¦å’Œæˆ‘æœ€è¦å¥½ã€‚',
              'æˆ‘ä»¬æ˜¯åŒç­åŒå­¦ï¼Œç»å¸¸ä¸€èµ·ä¸Šå­¦ï¼Œä¸€èµ·å›å®¶ã€‚',
              'æ–‡é”¦çš„åŠŸè¯¾å¾ˆå¥½ï¼Œä½†ä»–ä¸€ç‚¹ä¹Ÿä¸éª„å‚²ï¼Œè¿˜å¸¸å¸¸å¸®åŠ©åŠŸè¯¾å·®çš„åŒå­¦ã€‚',
              'æ­¤å¤–ï¼Œä»–ä¹Ÿæ—¶å¸¸å‚åŠ è¯¾å¤–æ´»åŠ¨ã€‚',
              'ä»–çš„ç¯®çƒæ‰“å¾—å¾ˆå¥½ï¼Œæ—¶å¸¸å‚åŠ æ¯”èµ›ã€‚',
              'æˆ‘å¾ˆé«˜å…´æœ‰æ–‡é”¦è¿™ä¹ˆä¸€ä¸ªå¥½æœ‹å‹ï¼Œæˆ‘ä¹Ÿè¦å‘ä»–å¤šå­¦ä¹ ã€‚'
            ],
            englishSentences: [
              'I have many friends, and Wen Jin and I are the closest.',
              'We are in the same class, and we often go to school and go home together.',
              'Wen Jin does well in his studies, but he is not proud at all. He often helps classmates who are weak in their schoolwork.',
              'In addition, he often takes part in extracurricular activities.',
              'He plays basketball very well and often joins competitions.',
              'I feel very happy to have such a good friend like Wen Jin, and I want to learn from him more.'
            ]
          };

          // ç¬¬ä¸‰ç¯‡æ•°æ®
          const chapter3Data = {
            vocabulary: [
              { word: 'èˆ’æœ', pinyin: 'shÅ« fu', chinese: 'æ„Ÿåˆ°è½»æ¾è‡ªåœ¨ï¼Œæ²¡æœ‰ä¸é€‚', english: 'comfortable' },
              { word: 'å¥”', pinyin: 'bÄ“n', chinese: 'å¿«é€Ÿåœ°è·‘å‘æŸä¸ªæ–¹å‘', english: 'to rush; to run quickly' },
              { word: 'æ¸©æš–', pinyin: 'wÄ“n nuÇn', chinese: 'æ¸©å’Œæš–å’Œï¼›ä¹Ÿæ¯”å–»ä»¤äººæ„Ÿåˆ°å…³çˆ±', english: 'warm; warmth' },
              { word: 'æ£‰è¢«', pinyin: 'miÃ¡n bÃ¨i', chinese: 'ç”¨æ£‰èŠ±åšçš„è¢«å­', english: 'quilt; cotton blanket' },
              { word: 'å¹¸ç¦', pinyin: 'xÃ¬ng fÃº', chinese: 'ç”Ÿæ´»ç¾å¥½ï¼Œå¿ƒé‡Œæ»¡è¶³', english: 'happy; blissful' },
              { word: 'ç…§é¡¾', pinyin: 'zhÃ o gÃ¹', chinese: 'å…³å¿ƒã€å¸®åŠ©ä»–äººç”Ÿæ´»èµ·å±…', english: 'to take care of' },
              { word: 'è¿å¿™', pinyin: 'liÃ¡n mÃ¡ng', chinese: 'ç«‹åˆ»ï¼Œèµ¶å¿«åšæŸäº‹', english: 'promptly; at once' },
              { word: 'å¹´å¹¼', pinyin: 'niÃ¡n yÃ²u', chinese: 'å¹´çºªå°ï¼Œå¹´é¾„è¿˜å°', english: 'young; little' },
              { word: 'æœªæ›¾', pinyin: 'wÃ¨i cÃ©ng', chinese: 'ä»¥å‰ä»æ¥æ²¡æœ‰', english: 'never before' },
              { word: 'è½¯å¼±', pinyin: 'ruÇn ruÃ²', chinese: 'èº«ä½“æ²¡æœ‰åŠ›æ°”æˆ–æ€§æ ¼ä¸åšå¼º', english: 'weak; frail' }
            ],
            gameQuestions: [
              { 
                text: 'è‡ªä»ä¸€ä¸ªå°ä¸»äººæ”¶ç•™äº†æˆ‘ï¼Œæˆ‘å°±è¿‡ç€___çš„æ—¥å­ã€‚', 
                english: 'Since a kind little boy took me in, I\'ve been living a ___ life.',
                answer: 'å¹¸ç¦', 
                answerEnglish: 'happy',
                options: ['æ¸©æš–', 'å¹¸ç¦', 'èˆ’æœ', 'è½¯å¼±'],
                optionsEnglish: ['warm', 'happy', 'comfortable', 'weak']
              },
              { 
                text: 'åœ¨æˆ‘___çš„æ—¶å€™ï¼Œçˆ¸çˆ¸å¦ˆå¦ˆå°±è¢«äººæ‰èµ°äº†ã€‚', 
                english: 'When I was still ___, my father and mother were taken away.',
                answer: 'å¹´å¹¼', 
                answerEnglish: 'young',
                options: ['è½¯å¼±', 'èˆ’æœ', 'å¹´å¹¼', 'æ¸©æš–'],
                optionsEnglish: ['weak', 'comfortable', 'young', 'warm']
              },
              { 
                text: 'æˆ‘é¥¿å¾—___æ— åŠ›çš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªå°å­©èµ°äº†è¿‡æ¥ã€‚', 
                english: 'When I was so hungry and ___ that I couldn\'t move, a child came over.',
                answer: 'è½¯å¼±', 
                answerEnglish: 'weak',
                options: ['å¹´å¹¼', 'æœªæ›¾', 'è½¯å¼±', 'è¿å¿™'],
                optionsEnglish: ['young', 'never before', 'weak', 'promptly']
              },
              { 
                text: 'ä»–è½»è½»åœ°æŠŠæˆ‘æŠ±èµ·ï¼Œç›´å¾€ä¸€æ‰€æˆ¿å­___å»ã€‚', 
                english: 'He gently picked me up and ___ straight toward a house.',
                answer: 'å¥”', 
                answerEnglish: 'ran',
                options: ['å¥”', 'ç…§é¡¾', 'è¿å¿™', 'æœªæ›¾'],
                optionsEnglish: ['ran', 'take care of', 'promptly', 'never before']
              },
              { 
                text: 'å°å­©æŠŠæˆ‘æ”¾è¿›ä¸€ä¸ªçº¸ç®±å­é‡Œï¼Œåˆ___ç»™æˆ‘ç›–ä¸Šäº†ä¸€æ¡æ£‰è¢«ã€‚', 
                english: 'The child put me in a cardboard box and ___ covered me with a cotton blanket.',
                answer: 'è¿å¿™', 
                answerEnglish: 'promptly',
                options: ['ç…§é¡¾', 'æ¸©æš–', 'è¿å¿™', 'èˆ’æœ'],
                optionsEnglish: ['take care of', 'warm', 'promptly', 'comfortable']
              },
              { 
                text: 'åˆè¿å¿™ç»™æˆ‘ç›–ä¸Šäº†ä¸€æ¡___ã€‚', 
                english: 'And promptly covered me with a ___ .',
                answer: 'æ£‰è¢«', 
                answerEnglish: 'cotton blanket',
                options: ['æ£‰è¢«', 'æ¸©æš–', 'å¹¸ç¦', 'å¥”'],
                optionsEnglish: ['cotton blanket', 'warm', 'happy', 'rush']
              },
              { 
                text: 'æˆ‘___å–è¿‡é‚£ä¹ˆå¥½å–çš„ä¹³æ±ã€‚', 
                english: 'I had ___ tasted such delicious milk.',
                answer: 'æœªæ›¾', 
                answerEnglish: 'never before',
                options: ['å¹´å¹¼', 'æœªæ›¾', 'è½¯å¼±', 'ç…§é¡¾'],
                optionsEnglish: ['young', 'never before', 'weak', 'take care of']
              },
              { 
                text: 'æˆ‘å¾ˆä¹…æ²¡æœ‰æ„Ÿè§‰é‚£ä¹ˆ___äº†ã€‚', 
                english: 'I hadn\'t felt so ___ in a long time.',
                answer: 'èˆ’æœ', 
                answerEnglish: 'comfortable',
                options: ['è¿å¿™', 'å¹¸ç¦', 'èˆ’æœ', 'æ£‰è¢«'],
                optionsEnglish: ['promptly', 'happy', 'comfortable', 'cotton blanket']
              },
              { 
                text: 'ä»–ä»¬ç»†å¿ƒåœ°___æˆ‘ã€‚', 
                english: 'They took great ___ of me.',
                answer: 'ç…§é¡¾', 
                answerEnglish: 'care',
                options: ['å¥”', 'ç…§é¡¾', 'æœªæ›¾', 'å¹´å¹¼'],
                optionsEnglish: ['rush', 'care', 'never before', 'young']
              },
              { 
                text: 'æˆ‘æœ‰äº†ä¸€ä¸ª___çš„å®¶ã€‚', 
                english: 'I now have a ___ home.',
                answer: 'æ¸©æš–', 
                answerEnglish: 'warm',
                options: ['è½¯å¼±', 'èˆ’æœ', 'è¿å¿™', 'æ¸©æš–'],
                optionsEnglish: ['weak', 'comfortable', 'promptly', 'warm']
              }
            ],
            chineseSentences: [
              'æˆ‘æ˜¯ä¸€åªå°ç‹—ï¼Œè‡ªä»ä¸€ä¸ªå°ä¸»äººæ”¶ç•™äº†æˆ‘ï¼Œæˆ‘å°±è¿‡ç€å¹¸ç¦çš„æ—¥å­ã€‚',
              'æˆ‘å«å°æ±ªï¼Œå‡ºç”Ÿåœ¨ä¸€ä¸ªè§’è½é‡Œã€‚',
              'åœ¨æˆ‘å¹´å¹¼çš„æ—¶å€™ï¼Œçˆ¸çˆ¸å¦ˆå¦ˆå°±è¢«äººæ‰èµ°äº†ã€‚',
              'æœ‰ä¸€å¤©ï¼Œæˆ‘é¥¿å¾—è½¯å¼±æ— åŠ›çš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªå°å­©èµ°äº†è¿‡æ¥ï¼Œä»–è½»è½»åœ°æŠŠæˆ‘æŠ±èµ·ï¼Œç›´å¾€ä¸€æ‰€æˆ¿å­å¥”å»ã€‚',
              'å°å­©æŠŠæˆ‘æ”¾è¿›ä¸€ä¸ªçº¸ç®±å­é‡Œï¼Œåˆè¿å¿™ç»™æˆ‘ç›–ä¸Šäº†ä¸€æ¡æ£‰è¢«ã€‚',
              'ä¸ä¹…ï¼Œæˆ‘å—…åˆ°äº†ä¸€è‚¡é¦™å‘³ï¼ŒåŸæ¥ä¸€ä½å¦‡äººæ³¡äº†ä¸€ç¢—ç‰›å¥¶ç»™æˆ‘ã€‚',
              'æˆ‘æœªæ›¾å–è¿‡é‚£ä¹ˆå¥½å–çš„ä¹³æ±ï¼Œå¾ˆå¿«åœ°å°±å–å…‰äº†ã€‚',
              'å¥¹å’Œå°å­©çœ‹åˆ°æˆ‘é‚£è´ªåƒçš„æ ·å­ï¼Œéƒ½ç¬‘äº†ã€‚ä»–ä»¬çš„ç¬‘å£°æ˜¯é‚£ä¹ˆåœ°å¥½å¬ã€‚',
              'æˆ‘å¾ˆä¹…æ²¡æœ‰æ„Ÿè§‰é‚£ä¹ˆèˆ’æœäº†ï¼Œä¸çŸ¥ä¸è§‰å°±ç¡ç€å•¦ã€‚',
              'åæ¥ï¼Œæˆ‘æ‰çŸ¥é“æˆ‘é‚£å–„è‰¯çš„å°ä¸»äººå«åšå°èªï¼Œæ…ˆç¥¥çš„å¦‡äººæ˜¯å°èªçš„å¦ˆå¦ˆï¼Œä»–ä»¬ç»†å¿ƒåœ°ç…§é¡¾æˆ‘ã€‚',
              'æˆ‘æœ‰äº†ä¸€ä¸ªæ¸©æš–çš„å®¶ï¼Œå¦‚æœçˆ¸çˆ¸å¦ˆå¦ˆçŸ¥é“äº†ï¼Œå®ƒä»¬ä¸€å®šä¼šå¾ˆå¼€å¿ƒçš„ã€‚'
            ],
            englishSentences: [
              'I am a little puppy. Since a kind little boy took me in, I\'ve been living a happy life.',
              'My name is Little Woof. I was born in a corner.',
              'When I was still young, my father and mother were taken away.',
              'One day, when I was so hungry and weak that I couldn\'t move, a child came over, gently picked me up, and ran straight toward a house.',
              'The child put me in a cardboard box and promptly covered me with a cotton blanket.',
              'Soon, I smelled something fragrantâ€”it was a kind woman who had made me a bowl of milk.',
              'I had never before tasted such delicious milk, and I finished it quickly.',
              'The woman and the boy laughed when they saw how greedy I looked. Their laughter was so pleasant to hear.',
              'I hadn\'t felt so comfortable in a long time, and before I knew it, I had fallen asleep.',
              'Later, I found out that my kind little master\'s name is Xiaocong, and the kind woman is his mother. They took great care of me.',
              'I now have a warm home. If my mom and dad knew, they would surely be very happy too.'
            ]
          };

          // ç¬¬å››ç¯‡æ•°æ®
          const chapter4Data = {
            vocabulary: [
              { word: 'ç­”åº”', pinyin: 'dÄ yÃ¬ng', chinese: 'åŒæ„åˆ«äººçš„è¯·æ±‚æˆ–è¦æ±‚', english: 'to agree; to promise' },
              { word: 'èŒå£®', pinyin: 'zhuÃ³ zhuÃ ng', chinese: 'å¥åº·å¼ºå£®åœ°æˆé•¿', english: 'strong and healthy; vigorous' },
              { word: 'æ ½åŸ¹', pinyin: 'zÄi pÃ©i', chinese: 'ç§æ¤å¹¶ç»†å¿ƒç…§æ–™æ¤ç‰©ï¼›ä¹ŸæŒ‡åŸ¹å…»äººæ‰', english: 'to plant and nurture; to cultivate' },
              { word: 'æ³¥åœŸ', pinyin: 'nÃ­ tÇ”', chinese: 'æ½®æ¹¿çš„åœŸï¼›æ³¥å·´', english: 'soil; earth; dirt' },
              { word: 'åŸ¹æ¤', pinyin: 'pÃ©i zhÃ­', chinese: 'åŸ¹å…»ç§æ¤æ¤ç‰©æˆ–åŸ¹å…»äººæ‰', english: 'to cultivate; to foster' },
              { word: 'å…³æ€€', pinyin: 'guÄn huÃ¡i', chinese: 'å…³å¿ƒå¹¶ç…§é¡¾', english: 'care and concern' },
              { word: 'èŠ±ç›†', pinyin: 'huÄ pÃ©n', chinese: 'ç§èŠ±ç”¨çš„å™¨çš¿', english: 'flower pot' },
              { word: 'åº­é™¢', pinyin: 'tÃ­ng yuÃ n', chinese: 'æˆ¿å±‹å‰æˆ–å±‹å†…çš„å°é™¢å­', english: 'courtyard; yard' },
              { word: 'å¬è¯', pinyin: 'tÄ«ng huÃ ', chinese: 'å¬ä»æ•™å¯¼ï¼Œä¸é¡¶å˜´', english: 'obedient' },
              { word: 'ç§èŠ±', pinyin: 'zhÃ²ng huÄ', chinese: 'æŠŠèŠ±ç§ä¸‹å¹¶ç…§é¡¾å®ƒç”Ÿé•¿', english: 'to plant flowers' }
            ],
            gameQuestions: [
              { 
                text: 'æˆ‘å®¶çš„å±‹å‰æœ‰ä¸€ä¸ªå°___ã€‚', 
                english: 'In front of our house is a small ___.',
                answer: 'åº­é™¢', 
                answerEnglish: 'courtyard',
                options: ['èŠ±ç›†', 'åº­é™¢', 'æ³¥åœŸ', 'æ ½åŸ¹'],
                optionsEnglish: ['flower pot', 'courtyard', 'soil', 'cultivate']
              },
              { 
                text: 'æˆ‘è¯·å©†å©†æ•™æˆ‘___ã€‚', 
                english: 'I asked Grandma to teach me how to ___.',
                answer: 'ç§èŠ±', 
                answerEnglish: 'plant flowers',
                options: ['ç­”åº”', 'ç§èŠ±', 'å…³æ€€', 'åŸ¹æ¤'],
                optionsEnglish: ['agree', 'plant flowers', 'care', 'foster']
              },
              { 
                text: 'å©†å©†é«˜å…´åœ°ä¸€å£___äº†ã€‚', 
                english: 'She happily ___ right away.',
                answer: 'ç­”åº”', 
                answerEnglish: 'agreed',
                options: ['èŒå£®', 'å¬è¯', 'ç­”åº”', 'æ ½åŸ¹'],
                optionsEnglish: ['vigorous', 'obedient', 'agreed', 'cultivate']
              },
              { 
                text: 'å¥¹å…ˆé€ç»™æˆ‘ä¸€ä¸ªå°___ã€‚', 
                english: 'First, she gave me a small ___.',
                answer: 'èŠ±ç›†', 
                answerEnglish: 'flower pot',
                options: ['èŠ±ç›†', 'åº­é™¢', 'ç§èŠ±', 'æ³¥åœŸ'],
                optionsEnglish: ['flower pot', 'courtyard', 'plant flowers', 'soil']
              },
              { 
                text: 'å¥¹è¦æˆ‘è‡ªå·±å»æ‰¾æ¥ä¸€äº›___ã€‚', 
                english: 'She told me to find some ___.',
                answer: 'æ³¥åœŸ', 
                answerEnglish: 'soil',
                options: ['å…³æ€€', 'åŸ¹æ¤', 'å¬è¯', 'æ³¥åœŸ'],
                optionsEnglish: ['care', 'foster', 'obedient', 'soil']
              },
              { 
                text: 'æˆ‘ç»†å¿ƒåœ°___æˆ‘çš„èŠ±è‹—ã€‚', 
                english: 'I carefully ___ my flower sprout.',
                answer: 'æ ½åŸ¹', 
                answerEnglish: 'nurtured',
                options: ['èŒå£®', 'æ ½åŸ¹', 'ç­”åº”', 'åº­é™¢'],
                optionsEnglish: ['vigorous', 'nurtured', 'agree', 'courtyard']
              },
              { 
                text: 'çˆ¶æ¯å°±æ˜¯é‚£___èŠ±è‹—çš„å›­ä¸ã€‚', 
                english: 'Parents are the gardeners who ___ us.',
                answer: 'åŸ¹æ¤', 
                answerEnglish: 'cultivate',
                options: ['ç§èŠ±', 'èŠ±ç›†', 'åŸ¹æ¤', 'æ³¥åœŸ'],
                optionsEnglish: ['plant flowers', 'flower pot', 'cultivate', 'soil']
              },
              { 
                text: 'æ²¡æœ‰å›­ä¸çš„ä»˜å‡ºåŠ___ã€‚', 
                english: 'Without their effort and ___.',
                answer: 'å…³æ€€', 
                answerEnglish: 'care',
                options: ['å…³æ€€', 'èŒå£®', 'æ ½åŸ¹', 'å¬è¯'],
                optionsEnglish: ['care', 'vigorous', 'cultivate', 'obedient']
              },
              { 
                text: 'èŠ±è‹—æ€èƒ½___é•¿å¤§å‘¢ï¼Ÿ', 
                english: 'How could a seedling ___ ?',
                answer: 'èŒå£®', 
                answerEnglish: 'grow strong and healthy',
                options: ['ç­”åº”', 'åŸ¹æ¤', 'èŒå£®', 'åº­é™¢'],
                optionsEnglish: ['agree', 'foster', 'grow strong and healthy', 'courtyard']
              },
              { 
                text: 'æˆ‘è¦åšä¸ª___ä¸Šè¿›çš„å¥½å­©å­ã€‚', 
                english: 'I want to be an ___ and motivated child.',
                answer: 'å¬è¯', 
                answerEnglish: 'obedient',
                options: ['ç§èŠ±', 'å…³æ€€', 'èŠ±ç›†', 'å¬è¯'],
                optionsEnglish: ['plant flowers', 'care', 'flower pot', 'obedient']
              }
            ],
            chineseSentences: [
              'æˆ‘å®¶çš„å±‹å‰æœ‰ä¸€ä¸ªå°åº­é™¢ï¼Œå©†å©†åœ¨é‚£å„¿ç§äº†è®¸å¤šç›†ç¾ä¸½çš„èŠ±ã€‚',
              'æœ‰ä¸€å¤©ï¼Œæˆ‘è¯·å©†å©†æ•™æˆ‘ç§èŠ±ï¼Œå©†å©†é«˜å…´åœ°ä¸€å£ç­”åº”äº†ã€‚',
              'é¦–å…ˆï¼Œå¥¹å…ˆé€ç»™æˆ‘ä¸€ä¸ªå°èŠ±ç›†ï¼Œå¥¹è¦æˆ‘è‡ªå·±å»æ‰¾æ¥ä¸€äº›æ³¥åœŸï¼Œç„¶åå¡«å…¥ç›†é‡Œã€‚',
              'å¥¹å†é€æˆ‘ä¸€äº›èŠ±ç§å­ï¼Œæˆ‘å­¦ç€å©†å©†çš„æ‰‹æ³•æŠŠå°ç§å­åŸ‹å…¥æ³¥ä¸­ã€‚',
              'æ—¥å­ä¸€å¤©å¤©è¿‡å»äº†ï¼Œç»ˆäºï¼Œæˆ‘çš„å°èŠ±è‹—å†’å‡ºæ³¥åœŸäº†ï¼Œæˆ‘å¼€å¿ƒæäº†ã€‚',
              'æˆ‘ç»†å¿ƒåœ°æ ½åŸ¹æˆ‘çš„èŠ±è‹—ï¼Œå®ƒç»ˆäºé•¿å¤§äº†ã€‚',
              'å©†å©†å‘Šè¯‰æˆ‘ï¼Œæˆ‘å°±å¥½æ¯”è¿™èŠ±è‹—ï¼Œçˆ¶æ¯å°±æ˜¯é‚£åŸ¹æ¤èŠ±è‹—çš„å›­ä¸ã€‚',
              'æ²¡æœ‰å›­ä¸çš„ä»˜å‡ºåŠå…³æ€€ï¼ŒèŠ±è‹—æ€èƒ½èŒå£®é•¿å¤§å‘¢ï¼Ÿ',
              'æˆ‘çŸ¥é“çˆ¶æ¯çš„ç”¨å¿ƒè‰¯è‹¦ï¼Œæˆ‘è¦åšä¸ªå¬è¯ä¸Šè¿›çš„å¥½å­©å­ã€‚'
            ],
            englishSentences: [
              'In front of our house is a small courtyard, where Grandma planted many pots of beautiful flowers.',
              'One day, I asked Grandma to teach me how to plant flowers. She happily agreed right away.',
              'First, she gave me a small flower pot and told me to find some soil to fill it.',
              'Then, she gave me some flower seeds. I copied Grandma\'s way of burying the seeds in the soil.',
              'Day by day, time passed, and finally, my little flower sprout broke through the soil. I was thrilled.',
              'I carefully nurtured my flower sprout, and it eventually grew up.',
              'Grandma told me that I am just like that flower sprout, and parents are the gardeners who cultivate us.',
              'Without their effort and care, how could a seedling grow strong and healthy?',
              'I understood how hard my parents work for me, and I want to be an obedient and motivated child.'
            ]
          };

          const encouragementWords = [
            'å¾ˆå‰å®³ï¼', 'ä½ æ£’æ£’çš„ï¼', 'åŠ æ²¹ä¸‹ä¸€é¢˜ï¼', 'å¤ªæ£’äº†ï¼', 
            'ç»§ç»­åŠ æ²¹ï¼', 'ä½ çœŸèªæ˜ï¼', 'åšå¾—å¾ˆå¥½ï¼', 'çœŸå‰å®³ï¼',
            'è¶…çº§æ£’ï¼', 'ä½ å¤ªå‰å®³äº†ï¼'
          ];

          // æ£€æµ‹Appleè®¾å¤‡
          const isAppleDevice = /iPad|iPhone|iPod|Mac/.test(navigator.userAgent);

          // æ–‡å­—è½¬è¯­éŸ³åŠŸèƒ½
          const speakText = (text, language = 'zh-CN') => {
            if ('speechSynthesis' in window) {
              window.speechSynthesis.cancel();
              
              let cleanText = text;
              
              if (language === 'zh-CN') {
                cleanText = cleanText.replace(/\s*[\/\|]\s*[a-zA-Z].*/g, '');
              } else {
                cleanText = cleanText.replace(/[\/\|]/g, ' ');
              }
              
              cleanText = cleanText.replace(/_/g, ' ')
                                  .replace(/underscore/gi, '')
                                  .replace(/\bslash\b/gi, '')
                                  .replace(/\s+/g, ' ')
                                  .trim();
              
              const utterance = new SpeechSynthesisUtterance(cleanText);
              utterance.lang = language;
              utterance.rate = 0.8;
              utterance.pitch = 1.2;
              utterance.volume = 1.0;
              
              if (isAppleDevice) {
                utterance.volume = 1.0;
                utterance.rate = 0.7;
              }
              
              window.speechSynthesis.speak(utterance);
              return utterance;
            } else {
              if (isAppleDevice) {
                alert('Appleè®¾å¤‡è¯­éŸ³åŠŸèƒ½å—é™ï¼Œè¯·ï¼š\n1. æ£€æŸ¥é™éŸ³å¼€å…³\n2. è°ƒé«˜éŸ³é‡\n3. å°è¯•å¤šæ¬¡ç‚¹å‡»\n4. å»ºè®®ä½¿ç”¨Chromeæµè§ˆå™¨');
              } else {
                alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åŠŸèƒ½');
              }
              return null;
            }
          };

          // åŒè¯­æœ—è¯»åŠŸèƒ½
          const speakBilingual = (chineseText, englishText) => {
            if ('speechSynthesis' in window) {
              window.speechSynthesis.cancel();
              
              let cleanChineseText = chineseText.replace(/\s*[\/\|]\s*[a-zA-Z].*/g, '')
                                                .replace(/_/g, ' ')
                                                .replace(/underscore/gi, '')
                                                .replace(/\bslash\b/gi, '')
                                                .replace(/\s+/g, ' ')
                                                .trim();
              
              let cleanEnglishText = englishText.replace(/[\/\|]/g, ' ')
                                                .replace(/_/g, ' ')
                                                .replace(/underscore/gi, '')
                                                .replace(/\bslash\b/gi, '')
                                                .replace(/\s+/g, ' ')
                                                .trim();
              
              const chineseUtterance = new SpeechSynthesisUtterance(cleanChineseText);
              chineseUtterance.lang = 'zh-CN';
              chineseUtterance.rate = isAppleDevice ? 0.7 : 0.8;
              chineseUtterance.pitch = 1.2;
              chineseUtterance.volume = 1.0;
              
              chineseUtterance.onend = () => {
                const englishUtterance = new SpeechSynthesisUtterance(cleanEnglishText);
                englishUtterance.lang = 'en-US';
                englishUtterance.rate = isAppleDevice ? 0.7 : 0.8;
                englishUtterance.pitch = 1.2;
                englishUtterance.volume = 1.0;
                window.speechSynthesis.speak(englishUtterance);
              };
              
              window.speechSynthesis.speak(chineseUtterance);
            }
          };

          const getCurrentData = () => {
            if (currentChapter === 'chapter1') return chapter1Data;
            if (currentChapter === 'chapter2') return chapter2Data;
            if (currentChapter === 'chapter3') return chapter3Data;
            return chapter4Data;
          };

          const resetChapterData = () => {
            setCurrentPhase('learning');
            setCurrentWordIndex(0);
            setViewedChinese(false);
            setViewedEnglish(false);
            setGameAnswers({});
            setWrongCount(0);
            setCurrentQuestion(0);
            setGameCompleted(false);
            setReadingLanguage('');
            setCurrentSentence(-1);
            setIsReading(false);
          };

          const handleChapterSelect = (chapter) => {
            setCurrentChapter(chapter);
            resetChapterData();
          };

          const backToMenu = () => {
            if ('speechSynthesis' in window) {
              window.speechSynthesis.cancel();
            }
            setCurrentChapter('menu');
            resetChapterData();
          };

          const chapterTitle = currentChapter === 'chapter1' ? 'ç¬¬ä¸€ç¯‡ï¼šåå›½çš„åŠæ³•' : 
                              currentChapter === 'chapter2' ? 'ç¬¬äºŒç¯‡ï¼šå¥½æœ‹å‹' : 
                              currentChapter === 'chapter3' ? 'ç¬¬ä¸‰ç¯‡ï¼šå°ç‹—çš„å®¶' : 
                              'ç¬¬å››ç¯‡ï¼šç§èŠ±çš„ä½“ä¼š';

          const handleViewChinese = () => {
            setViewedChinese(true);
            speakText(getCurrentData().vocabulary[currentWordIndex].chinese);
          };

          const handleViewEnglish = () => {
            setViewedEnglish(true);
            speakText(getCurrentData().vocabulary[currentWordIndex].english, 'en-US');
          };

          const handlePreviousWord = () => {
            if (currentWordIndex > 0) {
              setCurrentWordIndex(currentWordIndex - 1);
              setViewedChinese(false);
              setViewedEnglish(false);
            }
          };

          const handleNextWord = () => {
            if (currentWordIndex < getCurrentData().vocabulary.length - 1) {
              setCurrentWordIndex(currentWordIndex + 1);
              setViewedChinese(false);
              setViewedEnglish(false);
            } else {
              setCurrentPhase('game');
            }
          };

          const handleGameAnswer = (selectedAnswer) => {
            const currentQ = getCurrentData().gameQuestions[currentQuestion];
            const isCorrect = selectedAnswer === currentQ.answer;
            
            if (isCorrect) {
              const randomEncouragement = encouragementWords[Math.floor(Math.random() * encouragementWords.length)];
              alert(randomEncouragement);
              speakText(randomEncouragement);
              
              setGameAnswers({...gameAnswers, [currentQuestion]: selectedAnswer});
              setWrongCount(0);
              
              if (currentQuestion < getCurrentData().gameQuestions.length - 1) {
                setCurrentQuestion(currentQuestion + 1);
              } else {
                setGameCompleted(true);
                setCurrentPhase('reading');
              }
            } else {
              const newWrongCount = wrongCount + 1;
              setWrongCount(newWrongCount);
              
              if (newWrongCount >= 3) {
                alert('éœ€è¦é‡æ–°å¼€å§‹ç»ƒä¹ ï¼');
                speakText('éœ€è¦é‡æ–°å¼€å§‹ç»ƒä¹ ï¼');
                setCurrentQuestion(0);
                setGameAnswers({});
                setWrongCount(0);
              } else {
                alert('ç­”é”™äº†ï¼Œå†è¯•è¯•ï¼');
                speakText('ç­”é”™äº†ï¼Œå†è¯•è¯•ï¼');
              }
            }
          };

          const handleReading = (language) => {
            setReadingLanguage(language);
            setCurrentSentence(0);
            setIsReading(true);
            
            setTimeout(() => {
              const sentences = language === 'chinese' ? getCurrentData().chineseSentences : getCurrentData().englishSentences;
              speakText(sentences[0], language === 'chinese' ? 'zh-CN' : 'en-US');
            }, 500);
          };

          const handleNextSentence = () => {
            const sentences = readingLanguage === 'chinese' ? getCurrentData().chineseSentences : getCurrentData().englishSentences;
            if (currentSentence < sentences.length - 1) {
              const nextIndex = currentSentence + 1;
              setCurrentSentence(nextIndex);
              
              setTimeout(() => {
                speakText(sentences[nextIndex], readingLanguage === 'chinese' ? 'zh-CN' : 'en-US');
              }, 300);
            } else {
              setIsReading(false);
              setCurrentPhase('completed'); // æ”¹ä¸ºcompletedé˜¶æ®µ
              alert('æœ—è¯»å®Œæˆï¼ä½ å­¦å¾—å¾ˆæ£’ï¼');
            }
          };

          const handleNextChapter = () => {
            const chapters = ['chapter1', 'chapter2', 'chapter3', 'chapter4'];
            const currentIndex = chapters.indexOf(currentChapter);
            
            if (currentIndex < chapters.length - 1) {
              setCurrentChapter(chapters[currentIndex + 1]);
              resetChapterData();
            } else {
              alert('æ­å–œå®Œæˆç¬¬ä¸€å¥—æ‰€æœ‰ä½œæ–‡ï¼ğŸ‰');
              setCurrentChapter('menu');
              resetChapterData();
            }
          };

          // ä¸»èœå•é¡µé¢
          if (currentChapter === 'menu') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-100 via-indigo-50 to-purple-100 p-6">
                <div className="max-w-6xl mx-auto">
                  <div className="bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl p-12">
                    <div className="text-center mb-12">
                      <h1 className="text-5xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-4">
                        ğŸ“š ç¬¬ä¸€å¥—ï¼šåŸºç¡€æ•…äº‹é›†
                      </h1>
                      <h2 className="text-3xl font-semibold text-gray-600 mb-2">
                        Set 1: Basic Story Collection (Chapters 1-4)
                      </h2>
                      <p className="text-xl text-gray-500 mb-8">
                        æ™ºæ…§è§£å†³é—®é¢˜ã€å‹è°Šã€æ¸©æš–å®¶åº­ã€æˆé•¿æ•™è‚²<br/>
                        Problem solving, friendship, family warmth, growth education
                      </p>

                      {/* Appleè®¾å¤‡ç‰¹åˆ«è¯´æ˜ */}
                      <div className="bg-blue-50 p-6 rounded-xl border-2 border-blue-200 mb-8">
                        <h3 className="text-xl font-semibold text-blue-700 mb-3 flex items-center justify-center gap-2">
                          ğŸ Appleè®¾å¤‡ç”¨æˆ·ä¸“ç”¨æŒ‡å— / Apple Device User Guide
                        </h3>
                        <div className="text-blue-800 text-left max-w-4xl mx-auto space-y-3">
                          <div className="bg-white p-4 rounded-lg">
                            <h4 className="font-bold text-lg mb-2">ğŸ“± å¦‚æœå¬ä¸åˆ°å£°éŸ³ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤ï¼š</h4>
                            <ul className="space-y-2 text-sm">
                              <li>â€¢ <strong>ğŸ”‡ æ£€æŸ¥é™éŸ³å¼€å…³</strong>ï¼šiPhone/iPadä¾§è¾¹çš„æ©™è‰²å¼€å…³è¦å…³é—­</li>
                              <li>â€¢ <strong>ğŸ”Š è°ƒé«˜éŸ³é‡</strong>ï¼šæŒ‰éŸ³é‡+é”®ï¼Œç¡®ä¿åª’ä½“éŸ³é‡å¼€å¯</li>
                              <li>â€¢ <strong>ğŸ‘† å¤šæ¬¡ç‚¹å‡»</strong>ï¼šæœ—è¯»æŒ‰é’®å¯èƒ½éœ€è¦ç‚¹å‡»2-3æ¬¡æ‰èƒ½æ¿€æ´»</li>
                              <li>â€¢ <strong>ğŸŒ æ¢æµè§ˆå™¨</strong>ï¼šå¼ºçƒˆå»ºè®®ä¸‹è½½<strong>Chromeæµè§ˆå™¨</strong>ä½¿ç”¨</li>
                            </ul>
                          </div>
                          <div className="bg-white p-4 rounded-lg">
                            <h4 className="font-bold text-lg mb-2">ğŸŒ If you can't hear audio, please follow these steps:</h4>
                            <ul className="space-y-2 text-sm">
                              <li>â€¢ <strong>ğŸ”‡ Check silent switch</strong>: Turn off the orange switch on iPhone/iPad side</li>
                              <li>â€¢ <strong>ğŸ”Š Turn up volume</strong>: Press volume+ button, ensure media volume is on</li>
                              <li>â€¢ <strong>ğŸ‘† Click multiple times</strong>: Audio buttons may need 2-3 clicks to activate</li>
                              <li>â€¢ <strong>ğŸŒ Switch browser</strong>: Strongly recommend downloading <strong>Chrome browser</strong></li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div className="grid md:grid-cols-2 gap-6 mb-8">
                      {/* ç¬¬ä¸€ç¯‡ */}
                      <div className="bg-gradient-to-br from-orange-50 to-red-100 p-6 rounded-xl border-2 border-orange-200 hover:border-orange-400 transition-all duration-300 hover:shadow-lg">
                        <div className="text-center mb-6">
                          <div className="text-5xl mb-4">âš½</div>
                          <h3 className="text-xl font-bold text-orange-700 mb-2">ç¬¬ä¸€ç¯‡ï¼šåå›½çš„åŠæ³•</h3>
                          <h4 className="text-lg font-semibold text-orange-600 mb-3">Chapter 1: Hua Guo's Solution</h4>
                          <p className="text-gray-600 mb-3 text-sm">
                            å­¦ä¹ å…³äºè§£å†³é—®é¢˜çš„10ä¸ªè¯æ±‡<br/>
                            Learn 10 problem-solving words
                          </p>
                          <div className="text-xs text-gray-500 mb-4">
                            <strong>ä¸»é¢˜:</strong> èªæ˜è§£å†³é—®é¢˜<br/>
                            <strong>Theme:</strong> Smart problem solving
                          </div>
                        </div>
                        <button
                          onClick={() => handleChapterSelect('chapter1')}
                          className="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg text-sm transition-colors duration-300 flex items-center justify-center gap-2"
                        >
                          <BookOpen className="w-5 h-5" />
                          å¼€å§‹å­¦ä¹ 
                        </button>
                      </div>

                      {/* ç¬¬äºŒç¯‡ */}
                      <div className="bg-gradient-to-br from-blue-50 to-indigo-100 p-6 rounded-xl border-2 border-blue-200 hover:border-blue-400 transition-all duration-300 hover:shadow-lg">
                        <div className="text-center mb-6">
                          <div className="text-5xl mb-4">ğŸ‘«</div>
                          <h3 className="text-xl font-bold text-blue-700 mb-2">ç¬¬äºŒç¯‡ï¼šå¥½æœ‹å‹</h3>
                          <h4 className="text-lg font-semibold text-blue-600 mb-3">Chapter 2: Good Friends</h4>
                          <p className="text-gray-600 mb-3 text-sm">
                            å­¦ä¹ å…³äºå‹è°Šçš„10ä¸ªè¯æ±‡<br/>
                            Learn 10 friendship words
                          </p>
                          <div className="text-xs text-gray-500 mb-4">
                            <strong>ä¸»é¢˜:</strong> å‹è°Šå’Œå¸®åŠ©<br/>
                            <strong>Theme:</strong> Friendship and helping
                          </div>
                        </div>
                        <button
                          onClick={() => handleChapterSelect('chapter2')}
                          className="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg text-sm transition-colors duration-300 flex items-center justify-center gap-2"
                        >
                          <BookOpen className="w-5 h-5" />
                          å¼€å§‹å­¦ä¹ 
                        </button>
                      </div>

                      {/* ç¬¬ä¸‰ç¯‡ */}
                      <div className="bg-gradient-to-br from-green-50 to-emerald-100 p-6 rounded-xl border-2 border-green-200 hover:border-green-400 transition-all duration-300 hover:shadow-lg">
                        <div className="text-center mb-6">
                          <div className="text-5xl mb-4">ğŸ•</div>
                          <h3 className="text-xl font-bold text-green-700 mb-2">ç¬¬ä¸‰ç¯‡ï¼šå°ç‹—çš„å®¶</h3>
                          <h4 className="text-lg font-semibold text-green-600 mb-3">Chapter 3: Puppy's Home</h4>
                          <p className="text-gray-600 mb-3 text-sm">
                            å­¦ä¹ å…³äºæ¸©æš–å’Œå…³çˆ±çš„10ä¸ªè¯æ±‡<br/>
                            Learn 10 warmth and care words
                          </p>
                          <div className="text-xs text-gray-500 mb-4">
                            <strong>ä¸»é¢˜:</strong> å®¶åº­æ¸©æš–<br/>
                            <strong>Theme:</strong> Family warmth
                          </div>
                        </div>
                        <button
                          onClick={() => handleChapterSelect('chapter3')}
                          className="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg text-sm transition-colors duration-300 flex items-center justify-center gap-2"
                        >
                          <BookOpen className="w-5 h-5" />
                          å¼€å§‹å­¦ä¹ 
                        </button>
                      </div>

                      {/* ç¬¬å››ç¯‡ */}
                      <div className="bg-gradient-to-br from-purple-50 to-violet-100 p-6 rounded-xl border-2 border-purple-200 hover:border-purple-400 transition-all duration-300 hover:shadow-lg">
                        <div className="text-center mb-6">
                          <div className="text-5xl mb-4">ğŸŒ¸</div>
                          <h3 className="text-xl font-bold text-purple-700 mb-2">ç¬¬å››ç¯‡ï¼šç§èŠ±çš„ä½“ä¼š</h3>
                          <h4 className="text-lg font-semibold text-purple-600 mb-3">Chapter 4: Learning from Flowers</h4>
                          <p className="text-gray-600 mb-3 text-sm">
                            å­¦ä¹ å…³äºæ ½åŸ¹å’Œå…³æ€€çš„10ä¸ªè¯æ±‡<br/>
                            Learn 10 cultivation and care words
                          </p>
                          <div className="text-xs text-gray-500 mb-4">
                            <strong>ä¸»é¢˜:</strong> æˆé•¿å’Œæ•™å¯¼<br/>
                            <strong>Theme:</strong> Growth and guidance
                          </div>
                        </div>
                        <button
                          onClick={() => handleChapterSelect('chapter4')}
                          className="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-4 rounded-lg text-sm transition-colors duration-300 flex items-center justify-center gap-2"
                        >
                          <BookOpen className="w-5 h-5" />
                          å¼€å§‹å­¦ä¹ 
                        </button>
                      </div>
                    </div>

                    <div className="text-center">
                      <div className="bg-gray-50 p-6 rounded-xl border-2 border-gray-200">
                        <h3 className="text-xl font-semibold text-gray-700 mb-3">
                          ğŸ’¡ å­¦ä¹ è¯´æ˜ / Learning Instructions
                        </h3>
                        <div className="text-gray-600 text-left max-w-4xl mx-auto space-y-2">
                          <p>â€¢ ğŸ“š <strong>è¯æ±‡å­¦ä¹ </strong>ï¼šå­¦ä¹ æ–°è¯æ±‡çš„å‘éŸ³å’Œå«ä¹‰ / <strong>Vocabulary Learning</strong>: Learn pronunciation and meaning</p>
                          <p>â€¢ ğŸ® <strong>å¡«ç©ºç»ƒä¹ </strong>ï¼šé€šè¿‡ç»ƒä¹ é¢˜å·©å›ºå­¦ä¹  / <strong>Fill-in-the-blank</strong>: Reinforce learning with exercises</p>
                          <p>â€¢ ğŸ“– <strong>ä½œæ–‡æœ—è¯»</strong>ï¼šæœ—è¯»å®Œæ•´æ•…äº‹æé«˜ç†è§£ / <strong>Essay Reading</strong>: Read complete stories for comprehension</p>
                          <p>â€¢ ğŸµ <strong>è¯­éŸ³åŠŸèƒ½</strong>ï¼šæ‰€æœ‰å†…å®¹éƒ½å¯ä»¥æœ—è¯» / <strong>Audio Feature</strong>: All content can be read aloud</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          // ä»¥ä¸‹æ˜¯å­¦ä¹ ç¨‹åºçš„ä»£ç 
          const currentData = getCurrentData();

          // è¯æ±‡å­¦ä¹ é˜¶æ®µ
          if (currentPhase === 'learning') {
            const currentWord = currentData.vocabulary[currentWordIndex];
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 p-6">
                <div className="max-w-4xl mx-auto">
                  <div className="bg-white rounded-lg shadow-lg p-8">
                    <div className="flex items-center justify-between mb-6">
                      <h1 className="text-3xl font-bold text-purple-600 flex items-center gap-2">
                        <BookOpen className="w-8 h-8" />
                        è¯æ±‡å­¦ä¹  - {chapterTitle}
                      </h1>
                      <div className="flex items-center gap-4">
                        <div className="text-lg text-gray-600">
                          {currentWordIndex + 1} / {currentData.vocabulary.length}
                        </div>
                        <button
                          onClick={backToMenu}
                          className="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-colors"
                        >
                          <Home className="w-5 h-5" />
                          è¿”å›ä¸»é¡µ
                        </button>
                      </div>
                    </div>
                    
                    <div className="text-center mb-8">
                      <div className="text-6xl font-bold text-blue-600 mb-4">
                        {currentWord.word}
                      </div>
                      <div className="text-2xl text-gray-500 mb-4">{currentWord.pinyin}</div>
                      
                      <button
                        onClick={() => speakText(currentWord.word)}
                        className="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold mb-6 transition-colors"
                      >
                        æœ—è¯»è¯è¯­
                      </button>
                      
                      <div className="space-y-4">
                        {viewedChinese ? (
                          <div className="bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-400">
                            <p className="text-lg"><strong>ä¸­æ–‡è§£é‡Šï¼š</strong>{currentWord.chinese}</p>
                          </div>
                        ) : (
                          <button
                            onClick={handleViewChinese}
                            className="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors w-full"
                          >
                            æŸ¥çœ‹åè¯­è§£é‡Š
                          </button>
                        )}
                        
                        {viewedEnglish ? (
                          <div className="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-400">
                            <p className="text-lg"><strong>English:</strong> {currentWord.english}</p>
                          </div>
                        ) : (
                          <button
                            onClick={handleViewEnglish}
                            className="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors w-full"
                          >
                            æŸ¥çœ‹è‹±æ–‡è§£é‡Š
                          </button>
                        )}
                        
                        {viewedChinese && viewedEnglish ? (
                          <div className="flex justify-center gap-4">
                            {currentWordIndex > 0 && (
                              <button
                                onClick={handlePreviousWord}
                                className="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg text-lg font-semibold transition-colors"
                              >
                                è¿”å›ä¸Šä¸€è¯æ±‡
                              </button>
                            )}
                            <button
                              onClick={handleNextWord}
                              className="bg-purple-500 hover:bg-purple-600 text-white px-8 py-4 rounded-lg text-xl font-semibold transition-colors"
                            >
                              {currentWordIndex < currentData.vocabulary.length - 1 ? 'ä¸‹ä¸€ä¸ªè¯æ±‡' : 'å¼€å§‹ç»ƒä¹ '}
                            </button>
                          </div>
                        ) : (
                          <div className="text-center py-4">
                            <p className="text-gray-500">è¯·å…ˆæŸ¥çœ‹åè¯­å’Œè‹±æ–‡è§£é‡Š</p>
                            {currentWordIndex > 0 && (
                              <button
                                onClick={handlePreviousWord}
                                className="mt-2 bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                              >
                                è¿”å›ä¸Šä¸€è¯æ±‡
                              </button>
                            )}
                          </div>
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          // å¡«ç©ºç»ƒä¹ é˜¶æ®µ
          if (currentPhase === 'game') {
            const currentQ = currentData.gameQuestions[currentQuestion];
            return (
              <div className="min-h-screen bg-gradient-to-br from-green-100 to-blue-100 p-6">
                <div className="max-w-4xl mx-auto">
                  <div className="bg-white rounded-lg shadow-lg p-8">
                    <div className="flex items-center justify-between mb-6">
                      <h1 className="text-3xl font-bold text-green-600 flex items-center gap-2">
                        <Gamepad2 className="w-8 h-8" />
                        å¡«ç©ºç»ƒä¹  - {chapterTitle}
                      </h1>
                      <div className="flex items-center gap-4">
                        <div className="text-lg text-gray-600">
                          ç¬¬ {currentQuestion + 1} é¢˜ / {currentData.gameQuestions.length}
                        </div>
                        <button
                          onClick={backToMenu}
                          className="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-colors"
                        >
                          <Home className="w-5 h-5" />
                          è¿”å›ä¸»é¡µ
                        </button>
                      </div>
                    </div>
                    
                    <div className="text-center mb-8">
                      <div className="space-y-4 mb-8">
                        <div className="p-6 bg-gray-50 rounded-lg">
                          <div className="flex items-center justify-between mb-2">
                            <span className="text-xl text-gray-800 flex-1">{currentQ.text}</span>
                            <button
                              onClick={() => speakText(currentQ.text)}
                              className="bg-gray-500 hover:bg-gray-600 text-white p-2 rounded-full ml-4 transition-colors"
                              title="æœ—è¯»ä¸­æ–‡é¢˜ç›®"
                            >
                              <Speaker className="w-5 h-5" />
                            </button>
                          </div>
                          <div className="flex items-center justify-between">
                            <span className="text-lg text-gray-600 flex-1">{currentQ.english}</span>
                            <button
                              onClick={() => speakText(currentQ.english, 'en-US')}
                              className="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full ml-4 transition-colors"
                              title="æœ—è¯»è‹±æ–‡é¢˜ç›®"
                            >
                              <Speaker className="w-5 h-5" />
                            </button>
                          </div>
                        </div>
                      </div>
                      
                      <div className="grid grid-cols-1 gap-3 max-w-2xl mx-auto">
                        {currentQ.options.map((option, index) => (
                          <div key={index} className="flex items-center justify-between bg-white p-3 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors">
                            <button
                              onClick={() => handleGameAnswer(option)}
                              className="flex-1 text-left bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg text-lg font-semibold transition-colors"
                            >
                              {option} ({currentQ.optionsEnglish[index]})
                            </button>
                            <button
                              onClick={() => speakBilingual(option, currentQ.optionsEnglish[index])}
                              className="bg-green-500 hover:bg-green-600 text-white p-2 rounded-full ml-3 transition-colors"
                              title="æœ—è¯»é€‰é¡¹"
                            >
                              <Speaker className="w-5 h-5" />
                            </button>
                          </div>
                        ))}
                      </div>
                      
                      {wrongCount > 0 && (
                        <div className="mt-4 text-red-500 font-semibold">
                          é”™è¯¯æ¬¡æ•°: {wrongCount}/3
                        </div>
                      )}
                      
                      <button
                        onClick={() => setCurrentPhase('learning')}
                        className="mt-6 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                      >
                        è¿”å›è¯æ±‡å­¦ä¹ 
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          // ä½œæ–‡æœ—è¯»é˜¶æ®µ
          if (currentPhase === 'reading') {
            if (!isReading) {
              return (
                <div className="min-h-screen bg-gradient-to-br from-purple-100 to-pink-100 p-6">
                  <div className="max-w-4xl mx-auto">
                    <div className="bg-white rounded-lg shadow-lg p-8 text-center">
                      <div className="flex items-center justify-between mb-8">
                        <h1 className="text-3xl font-bold text-purple-600 flex items-center gap-2">
                          <Volume2 className="w-8 h-8" />
                          ä½œæ–‡æœ—è¯» - {chapterTitle}
                        </h1>
                        <button
                          onClick={backToMenu}
                          className="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-colors"
                        >
                          <Home className="w-5 h-5" />
                          è¿”å›ä¸»é¡µ
                        </button>
                      </div>
                      <p className="text-xl text-gray-700 mb-8">
                        æ­å–œå®Œæˆæ‰€æœ‰ç»ƒä¹ ï¼é€‰æ‹©è¯­è¨€å¼€å§‹æœ—è¯»ï¼š<br/>
                        Congratulations on completing all exercises! Choose a language to start reading:
                      </p>
                      
                      <div className="space-y-4">
                        <button
                          onClick={() => handleReading('chinese')}
                          className="bg-red-500 hover:bg-red-600 text-white px-8 py-4 rounded-lg text-xl font-semibold mr-4 transition-colors"
                        >
                          ä¸­æ–‡æœ—è¯» / Chinese Reading
                        </button>
                        <button
                          onClick={() => handleReading('english')}
                          className="bg-blue-500 hover:bg-blue-600 text-white px-8 py-4 rounded-lg text-xl font-semibold transition-colors"
                        >
                          è‹±æ–‡æœ—è¯» / English Reading
                        </button>
                      </div>
                      
                      <button
                        onClick={() => resetChapterData()}
                        className="mt-8 bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 mx-auto transition-colors"
                      >
                        <RotateCcw className="w-5 h-5" />
                        é‡æ–°å¼€å§‹æœ¬ç«  / Restart Chapter
                      </button>
                    </div>
                  </div>
                </div>
              );
            } else {
              const sentences = readingLanguage === 'chinese' ? currentData.chineseSentences : currentData.englishSentences;
              
              return (
                <div className="min-h-screen bg-gradient-to-br from-purple-100 to-pink-100 p-6">
                  <div className="max-w-4xl mx-auto">
                    <div className="bg-white rounded-lg shadow-lg p-8">
                      <div className="flex items-center justify-between mb-8">
                        <h1 className="text-3xl font-bold text-purple-600 text-center">
                          {readingLanguage === 'chinese' ? 'ä¸­æ–‡æœ—è¯» / Chinese Reading' : 'English Reading / è‹±æ–‡æœ—è¯»'}
                        </h1>
                        <button
                          onClick={backToMenu}
                          className="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-colors"
                        >
                          <Home className="w-5 h-5" />
                          è¿”å›ä¸»é¡µ
                        </button>
                      </div>
                      
                      <div className="text-lg text-gray-600 mb-4 text-center">
                        {readingLanguage === 'chinese' 
                          ? `ç¬¬ ${currentSentence + 1} å¥ / ${sentences.length} | Sentence ${currentSentence + 1} of ${sentences.length}`
                          : `Sentence ${currentSentence + 1} of ${sentences.length} | ç¬¬ ${currentSentence + 1} å¥ / ${sentences.length}`
                        }
                      </div>
                      
                      <div className="mb-8">
                        <h3 className="text-xl font-semibold mb-4 text-center text-gray-700">
                          {readingLanguage === 'chinese' ? 'å®Œæ•´ä½œæ–‡ï¼š' : 'Complete Essay:'}
                        </h3>
                        <div className="bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-400">
                          {sentences.map((sentence, index) => (
                            <p 
                              key={index} 
                              className={`text-lg mb-3 ${
                                index === currentSentence 
                                  ? 'bg-yellow-200 p-2 rounded font-semibold text-blue-800' 
                                  : 'text-gray-700'
                              }`}
                            >
                              {sentence}
                            </p>
                          ))}
                        </div>
                      </div>
                      
                      <div className="text-center">
                        <div className="bg-blue-50 p-4 rounded-lg mb-6 border-l-4 border-blue-400">
                          <p className="text-xl font-semibold text-blue-800 mb-2">
                            {readingLanguage === 'chinese' ? 'æ­£åœ¨æœ—è¯»ï¼šNow Reading:' : 'Now Reading: æ­£åœ¨æœ—è¯»ï¼š'}
                          </p>
                          <p className="text-lg text-gray-800">{sentences[currentSentence]}</p>
                        </div>
                        
                        <div className="flex justify-center gap-4">
                          <button
                            onClick={() => speakText(sentences[currentSentence], readingLanguage === 'chinese' ? 'zh-CN' : 'en-US')}
                            className="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 transition-colors"
                          >
                            <Speaker className="w-5 h-5" />
                            {readingLanguage === 'chinese' ? 'é‡æ–°æœ—è¯»è¿™å¥ / Repeat This Sentence' : 'Repeat This Sentence / é‡æ–°æœ—è¯»è¿™å¥'}
                          </button>
                          
                          <button
                            onClick={handleNextSentence}
                            className="bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-lg text-xl font-semibold transition-colors flex items-center gap-2"
                          >
                            <Play className="w-6 h-6" />
                            {currentSentence < sentences.length - 1 
                              ? (readingLanguage === 'chinese' ? 'ä¸‹ä¸€å¥ / Next Sentence' : 'Next Sentence / ä¸‹ä¸€å¥')
                              : (readingLanguage === 'chinese' ? 'å®Œæˆæœ—è¯» / Complete Reading' : 'Complete Reading / å®Œæˆæœ—è¯»')
                            }
                          </button>
                        </div>
                        
                        <button
                          onClick={() => {
                            setIsReading(false);
                            setReadingLanguage('');
                          }}
                          className="mt-4 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                        >
                          {readingLanguage === 'chinese' ? 'è¿”å›é€‰æ‹©è¯­è¨€ / Back to Language Selection' : 'Back to Language Selection / è¿”å›é€‰æ‹©è¯­è¨€'}
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              );
            }
          }

          // å®Œæˆæœ—è¯»é˜¶æ®µ - æ˜¾ç¤ºä¸‹ä¸€ç¯‡æŒ‰é’®
          if (currentPhase === 'completed') {
            const chapters = ['chapter1', 'chapter2', 'chapter3', 'chapter4'];
            const currentIndex = chapters.indexOf(currentChapter);
            const isLastChapter = currentIndex === chapters.length - 1;
            
            return (
              <div className="min-h-screen bg-gradient-to-br from-green-100 to-emerald-100 p-6">
                <div className="max-w-4xl mx-auto">
                  <div className="bg-white rounded-lg shadow-lg p-8 text-center">
                    <div className="flex items-center justify-between mb-8">
                      <h1 className="text-3xl font-bold text-green-600 flex items-center gap-2">
                        ğŸ‰ æ­å–œå®Œæˆï¼
                      </h1>
                      <button
                        onClick={backToMenu}
                        className="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-colors"
                      >
                        <Home className="w-5 h-5" />
                        è¿”å›ä¸»é¡µ
                      </button>
                    </div>
                    
                    <div className="text-center mb-8">
                      <div className="text-6xl mb-6">ğŸŒŸ</div>
                      <h2 className="text-2xl font-bold text-gray-700 mb-4">
                        ä½ å·²ç»å®Œæˆäº† {chapterTitle} çš„å­¦ä¹ ï¼
                      </h2>
                      <p className="text-lg text-gray-600 mb-8">
                        You have completed {chapterTitle}!
                      </p>
                      
                      {!isLastChapter ? (
                        <div className="space-y-4">
                          <button
                            onClick={handleNextChapter}
                            className="bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-lg text-2xl font-semibold transition-colors flex items-center gap-3 mx-auto"
                          >
                            <BookOpen className="w-8 h-8" />
                            ä¸‹ä¸€ç¯‡ä½œæ–‡ / Next Chapter
                          </button>
                          <p className="text-sm text-gray-500">
                            ç»§ç»­å­¦ä¹ ï¼š{chapters[currentIndex + 1] === 'chapter2' ? 'ç¬¬äºŒç¯‡ï¼šå¥½æœ‹å‹' : 
                                      chapters[currentIndex + 1] === 'chapter3' ? 'ç¬¬ä¸‰ç¯‡ï¼šå°ç‹—çš„å®¶' : 
                                      'ç¬¬å››ç¯‡ï¼šç§èŠ±çš„ä½“ä¼š'}
                          </p>
                        </div>
                      ) : (
                        <div className="space-y-4">
                          <div className="bg-yellow-50 p-6 rounded-xl border-2 border-yellow-300">
                            <h3 className="text-xl font-bold text-yellow-700 mb-2">ğŸ† å®Œæˆç¬¬ä¸€å¥—æ‰€æœ‰ä½œæ–‡ï¼</h3>
                            <p className="text-lg text-yellow-600">
                              Congratulations! You've completed all Set 1 chapters!
                            </p>
                          </div>
                          <button
                            onClick={() => setCurrentChapter('menu')}
                            className="bg-purple-500 hover:bg-purple-600 text-white px-8 py-4 rounded-lg text-xl font-semibold transition-colors flex items-center gap-2 mx-auto"
                          >
                            <Home className="w-6 h-6" />
                            è¿”å›ä¸»é¡µé€‰æ‹©å…¶ä»–å¥—è£… / Back to Menu
                          </button>
                        </div>
                      )}
                      
                      <div className="mt-8 space-x-4">
                        <button
                          onClick={() => resetChapterData()}
                          className="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors"
                        >
                          é‡æ–°å­¦ä¹ è¿™ä¸€ç¯‡ / Restart This Chapter
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          }
        };

        ReactDOM.render(<ChineseLearningSet1 />, document.getElementById('root'));
    </script>
</body>
</html>