<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Learning Set 3 - AEC Educational Games</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            min-height: 100vh;
            padding: 1.5rem;
        }

        .max-w-6xl {
            max-width: 72rem;
            margin: 0 auto;
        }

        .max-w-4xl {
            max-width: 56rem;
            margin: 0 auto;
        }

        .bg-white {
            background-color: white;
        }

        .bg-white-90 {
            background-color: rgba(255, 255, 255, 0.9);
        }

        .backdrop-blur {
            backdrop-filter: blur(10px);
        }

        .rounded-lg {
            border-radius: 0.5rem;
        }

        .rounded-xl {
            border-radius: 0.75rem;
        }

        .rounded-2xl {
            border-radius: 1rem;
        }

        .shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .shadow-2xl {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .p-8 { padding: 2rem; }
        .p-12 { padding: 3rem; }

        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .px-8 { padding-left: 2rem; padding-right: 2rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }

        .m-4 { margin: 1rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mb-12 { margin-bottom: 3rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-6 { margin-top: 1.5rem; }
        .mt-8 { margin-top: 2rem; }
        .ml-3 { margin-left: 0.75rem; }
        .ml-4 { margin-left: 1rem; }
        .mr-4 { margin-right: 1rem; }

        .text-center { text-align: center; }
        .text-left { text-align: left; }

        .text-xs { font-size: 0.75rem; }
        .text-sm { font-size: 0.875rem; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .text-5xl { font-size: 3rem; }
        .text-6xl { font-size: 3.75rem; }

        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }

        .text-gray-500 { color: #6b7280; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-700 { color: #374151; }
        .text-gray-800 { color: #1f2937; }
        .text-blue-600 { color: #2563eb; }
        .text-blue-700 { color: #1d4ed8; }
        .text-blue-800 { color: #1e40af; }
        .text-green-600 { color: #16a34a; }
        .text-green-700 { color: #15803d; }
        .text-purple-600 { color: #9333ea; }
        .text-red-500 { color: #ef4444; }
        .text-white { color: white; }
        .text-orange-600 { color: #ea580c; }
        .text-orange-700 { color: #c2410c; }
        .text-indigo-600 { color: #4f46e5; }
        .text-indigo-700 { color: #4338ca; }
        .text-red-600 { color: #dc2626; }
        .text-red-700 { color: #b91c1c; }
        .text-lime-600 { color: #65a30d; }
        .text-lime-700 { color: #4d7c0f; }
        .text-amber-600 { color: #d97706; }
        .text-amber-700 { color: #b45309; }

        .bg-blue-50 { background-color: #eff6ff; }
        .bg-blue-200 { background-color: #bfdbfe; }
        .bg-blue-500 { background-color: #3b82f6; }
        .bg-blue-600 { background-color: #2563eb; }
        .bg-gray-50 { background-color: #f9fafb; }
        .bg-gray-200 { background-color: #e5e7eb; }
        .bg-gray-400 { background-color: #9ca3af; }
        .bg-gray-500 { background-color: #6b7280; }
        .bg-gray-600 { background-color: #4b5563; }
        .bg-green-500 { background-color: #22c55e; }
        .bg-green-600 { background-color: #16a34a; }
        .bg-purple-500 { background-color: #a855f7; }
        .bg-purple-600 { background-color: #9333ea; }
        .bg-red-500 { background-color: #ef4444; }
        .bg-red-600 { background-color: #dc2626; }
        .bg-yellow-50 { background-color: #fefce8; }
        .bg-yellow-200 { background-color: #fde047; }
        .bg-yellow-400 { background-color: #facc15; }
        .bg-yellow-500 { background-color: #eab308; }
        .bg-yellow-600 { background-color: #ca8a04; }
        .bg-orange-500 { background-color: #f97316; }
        .bg-orange-600 { background-color: #ea580c; }
        .bg-indigo-500 { background-color: #6366f1; }
        .bg-indigo-600 { background-color: #4f46e5; }
        .bg-lime-500 { background-color: #84cc16; }
        .bg-lime-600 { background-color: #65a30d; }
        .bg-amber-500 { background-color: #f59e0b; }
        .bg-amber-600 { background-color: #d97706; }

        .border-2 { border-width: 2px; }
        .border-l-4 { border-left-width: 4px; }
        .border-blue-200 { border-color: #bfdbfe; }
        .border-blue-300 { border-color: #93c5fd; }
        .border-blue-400 { border-color: #60a5fa; }
        .border-gray-200 { border-color: #e5e7eb; }
        .border-yellow-300 { border-color: #fde047; }
        .border-yellow-400 { border-color: #facc15; }
        .border-orange-200 { border-color: #fed7aa; }
        .border-orange-400 { border-color: #fb923c; }
        .border-indigo-200 { border-color: #c7d2fe; }
        .border-indigo-400 { border-color: #818cf8; }
        .border-green-200 { border-color: #bbf7d0; }
        .border-green-400 { border-color: #4ade80; }
        .border-purple-200 { border-color: #e9d5ff; }
        .border-purple-400 { border-color: #c084fc; }
        .border-red-200 { border-color: #fecaca; }
        .border-red-400 { border-color: #f87171; }
        .border-lime-200 { border-color: #d9f99d; }
        .border-lime-400 { border-color: #a3e635; }
        .border-amber-200 { border-color: #fde68a; }
        .border-amber-400 { border-color: #fbbf24; }

        .grid { display: grid; }
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }

        .flex { display: flex; }
        .flex-1 { flex: 1 1 0%; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }

        .space-y-2 > * + * { margin-top: 0.5rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .space-x-4 > * + * { margin-left: 1rem; }

        .w-5 { width: 1.25rem; }
        .w-6 { width: 1.5rem; }
        .w-8 { width: 2rem; }
        .h-5 { height: 1.25rem; }
        .h-6 { height: 1.5rem; }
        .h-8 { height: 2rem; }
        .w-full { width: 100%; }

        .max-w-2xl { max-width: 42rem; margin: 0 auto; }
        .max-w-4xl-mx { max-width: 56rem; margin: 0 auto; }

        .cursor-pointer { cursor: pointer; }

        .transition-colors { transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out; }
        .transition-all { transition: all 0.3s ease; }

        .hover\:bg-blue-600:hover { background-color: #2563eb; }
        .hover\:bg-gray-500:hover { background-color: #6b7280; }
        .hover\:bg-gray-600:hover { background-color: #4b5563; }
        .hover\:bg-green-600:hover { background-color: #16a34a; }
        .hover\:bg-purple-600:hover { background-color: #9333ea; }
        .hover\:bg-red-600:hover { background-color: #dc2626; }
        .hover\:bg-yellow-600:hover { background-color: #ca8a04; }
        .hover\:bg-orange-600:hover { background-color: #ea580c; }
        .hover\:bg-indigo-600:hover { background-color: #4f46e5; }
        .hover\:bg-lime-600:hover { background-color: #65a30d; }
        .hover\:bg-amber-600:hover { background-color: #d97706; }
        .hover\:border-blue-300:hover { border-color: #93c5fd; }
        .hover\:border-orange-400:hover { border-color: #fb923c; }
        .hover\:border-indigo-400:hover { border-color: #818cf8; }
        .hover\:border-green-400:hover { border-color: #4ade80; }
        .hover\:border-purple-400:hover { border-color: #c084fc; }
        .hover\:border-red-400:hover { border-color: #f87171; }
        .hover\:border-lime-400:hover { border-color: #a3e635; }
        .hover\:border-amber-400:hover { border-color: #fbbf24; }
        .hover\:shadow-lg:hover { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }

        .hidden { display: none; }

        .bg-gradient-to-br {
            background-image: linear-gradient(to bottom right, var(--tw-gradient-stops));
        }
        .bg-gradient-to-r {
            background-image: linear-gradient(to right, var(--tw-gradient-stops));
        }
        .from-purple-100 { --tw-gradient-from: #f3e8ff; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(243, 232, 255, 0)); }
        .via-violet-50 { --tw-gradient-stops: var(--tw-gradient-from), #f5f3ff, var(--tw-gradient-to, rgba(245, 243, 255, 0)); }
        .to-pink-100 { --tw-gradient-to: #fce7f3; }
        .from-purple-600 { --tw-gradient-from: #9333ea; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(147, 51, 234, 0)); }
        .to-violet-600 { --tw-gradient-to: #7c3aed; }
        .from-red-50 { --tw-gradient-from: #fef2f2; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(254, 242, 242, 0)); }
        .to-orange-100 { --tw-gradient-to: #ffedd5; }
        .from-indigo-50 { --tw-gradient-from: #eef2ff; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(238, 242, 255, 0)); }
        .to-blue-100 { --tw-gradient-to: #dbeafe; }
        .from-lime-50 { --tw-gradient-from: #f7fee7; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(247, 254, 231, 0)); }
        .to-green-100 { --tw-gradient-to: #dcfce7; }
        .from-amber-50 { --tw-gradient-from: #fffbeb; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(255, 251, 235, 0)); }
        .to-yellow-100 { --tw-gradient-to: #fef3c7; }
        .from-blue-100 { --tw-gradient-from: #dbeafe; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(219, 234, 254, 0)); }
        .from-green-100 { --tw-gradient-from: #dcfce7; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(220, 252, 231, 0)); }

        .bg-clip-text {
            -webkit-background-clip: text;
            background-clip: text;
        }
        .text-transparent {
            color: transparent;
        }

        .rounded-full { border-radius: 9999px; }

        button {
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            transform: translateY(-1px);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .chapter-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
            border-radius: 1rem;
            padding: 1.5rem;
            margin: 1rem;
            border: 2px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .chapter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            border-color: rgba(255,255,255,0.6);
        }

        .chapter-emoji {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        @media (max-width: 768px) {
            .container { padding: 1rem; }
            .p-12 { padding: 2rem; }
            .text-5xl { font-size: 2rem; }
            .text-3xl { font-size: 1.5rem; }
            .grid-cols-2 { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div id="app" class="container">
        <!-- Content will be dynamically loaded here -->
    </div>

    <script>
        // Game state management
        let currentChapter = 'menu';
        let currentPhase = 'learning';
        let currentWordIndex = 0;
        let viewedChinese = false;
        let viewedEnglish = false;
        let gameAnswers = {};
        let wrongCount = 0;
        let currentQuestion = 0;
        let gameCompleted = false;
        let readingLanguage = '';
        let currentSentence = -1;
        let isReading = false;

        // Game data
        const chapter9Data = {
            vocabulary: [
                { word: '敬爱', pinyin: 'jìng ài', chinese: '尊敬并热爱', english: 'respect and love' },
                { word: '责任感', pinyin: 'zé rèn gǎn', chinese: '对应尽义务的态度', english: 'sense of responsibility' },
                { word: '活泼', pinyin: 'huó pō', chinese: '生动，有生气', english: 'lively; active' },
                { word: '吸引', pinyin: 'xī yǐn', chinese: '把注意力引过来', english: 'attract' },
                { word: '耐心', pinyin: 'nài xīn', chinese: '不急躁，能容忍', english: 'patience' },
                { word: '劝导', pinyin: 'quàn dǎo', chinese: '开导劝说', english: 'advise and guide' },
                { word: '体罚', pinyin: 'tǐ fá', chinese: '用身体受苦来惩罚', english: 'corporal punishment' },
                { word: '老师', pinyin: 'lǎo shī', chinese: '教育学生的人', english: 'teacher' },
                { word: '欢乐', pinyin: 'huān lè', chinese: '快乐和欢喜', english: 'joy; happiness' },
                { word: '恩惠', pinyin: 'ēn huì', chinese: '别人的关爱和好处', english: 'kindness; favor' }
            ],
            gameQuestions: [
                { 
                    text: '那就是我最___的老师——陈梅桦老师。', 
                    english: 'That is my most ___ teacher — Ms. Chen Meihua.',
                    answer: '敬爱', 
                    answerEnglish: 'respected and beloved',
                    options: ['敬爱', '责任感', '活泼', '吸引'],
                    optionsEnglish: ['respected and beloved', 'sense of responsibility', 'lively', 'attract']
                },
                { 
                    text: '她教学认真又有___。', 
                    english: 'She teaches seriously and has a strong ___.',
                    answer: '责任感', 
                    answerEnglish: 'sense of responsibility',
                    options: ['耐心', '责任感', '劝导', '体罚'],
                    optionsEnglish: ['patience', 'sense of responsibility', 'advise and guide', 'corporal punishment']
                },
                { 
                    text: '陈老师的教学方式生动___。', 
                    english: 'Her teaching style is lively and ___.',
                    answer: '活泼', 
                    answerEnglish: 'energetic',
                    options: ['老师', '欢乐', '恩惠', '活泼'],
                    optionsEnglish: ['teacher', 'happiness', 'kindness', 'energetic']
                },
                { 
                    text: '用我们周围的东西来___我们的注意力。', 
                    english: 'Uses things around us to ___ our attention.',
                    answer: '吸引', 
                    answerEnglish: 'attract',
                    options: ['敬爱', '责任感', '吸引', '活泼'],
                    optionsEnglish: ['respect and love', 'sense of responsibility', 'attract', 'lively']
                },
                { 
                    text: '她会___地教导我们。', 
                    english: 'She teaches us with ___.',
                    answer: '耐心', 
                    answerEnglish: 'patience',
                    options: ['劝导', '体罚', '耐心', '老师'],
                    optionsEnglish: ['advise and guide', 'corporal punishment', 'patience', 'teacher']
                },
                { 
                    text: '她便加以___，尽量避免使用体罚。', 
                    english: 'She ___ them instead of using corporal punishment.',
                    answer: '劝导', 
                    answerEnglish: 'advises and guides',
                    options: ['欢乐', '恩惠', '吸引', '劝导'],
                    optionsEnglish: ['happiness', 'kindness', 'attract', 'advises and guides']
                },
                { 
                    text: '尽量避免使用___，因此我们都很尊敬她。', 
                    english: 'Avoids using ___, so we all respect her deeply.',
                    answer: '体罚', 
                    answerEnglish: 'corporal punishment',
                    options: ['体罚', '敬爱', '责任感', '活泼'],
                    optionsEnglish: ['corporal punishment', 'respect and love', 'sense of responsibility', 'lively']
                },
                { 
                    text: '陈老师是一位有爱心的好___。', 
                    english: 'Ms. Chen is a caring ___.',
                    answer: '老师', 
                    answerEnglish: 'teacher',
                    options: ['耐心', '劝导', '老师', '欢乐'],
                    optionsEnglish: ['patience', 'advise and guide', 'teacher', 'happiness']
                },
                { 
                    text: '使我的生活充满___。', 
                    english: 'Fills my life with ___.',
                    answer: '欢乐', 
                    answerEnglish: 'happiness',
                    options: ['恩惠', '吸引', '体罚', '欢乐'],
                    optionsEnglish: ['kindness', 'attract', 'corporal punishment', 'happiness']
                },
                { 
                    text: '我要努力读书以报答陈老师的___。', 
                    english: 'I want to study hard to repay Ms. Chen for her ___.',
                    answer: '恩惠', 
                    answerEnglish: 'kindness',
                    options: ['敬爱', '责任感', '活泼', '恩惠'],
                    optionsEnglish: ['respect and love', 'sense of responsibility', 'lively', 'kindness']
                }
            ],
            chineseSentences: [
                '一头灰白的头发、一双明亮的眼睛、一个高高的鼻子、一张樱桃小嘴和一双小耳朵，那就是我最敬爱的老师——陈梅桦老师。',
                '陈老师是我的华文老师，她教学认真又有责任感。',
                '陈老师的教学方式生动活泼。',
                '她会说一些笑话、唱一些歌曲或用我们周围的东西来吸引我们的注意力。',
                '当我们有不明白的地方时，她会耐心地教导我们。',
                '如果有同学犯了错，她便加以劝导，尽量避免使用体罚，因此我们都很尊敬她。',
                '陈老师是一位有爱心的好老师，她令我感受到上学的乐趣。',
                '使我的生活充满欢乐。',
                '我要努力读书以报答陈老师的恩惠。'
            ],
            englishSentences: [
                'With gray hair, bright eyes, a high nose, a small cherry mouth, and a pair of small ears, that is my most respected and beloved teacher — Ms. Chen Meihua.',
                'Ms. Chen is my Chinese teacher. She teaches seriously and has a strong sense of responsibility.',
                'Her teaching style is lively and energetic.',
                'She tells jokes, sings songs, or uses things around us to attract our attention.',
                'When we don\'t understand something, she teaches us with patience.',
                'If a student makes a mistake, she advises and guides them instead of using corporal punishment, so we all respect her deeply.',
                'Ms. Chen is a caring teacher. She makes me feel the joy of going to school.',
                'And fills my life with happiness.',
                'I want to study hard to repay Ms. Chen for her kindness.'
            ]
        };

        const chapter10Data = {
            vocabulary: [
                { word: '大排长龙', pinyin: 'dà pái cháng lóng', chinese: '排队排得很长', english: 'long queues' },
                { word: '回家', pinyin: 'huí jiā', chinese: '回到自己的家', english: 'go home' },
                { word: '种族', pinyin: 'zhǒng zú', chinese: '人类的不同族群', english: 'race; ethnicity' },
                { word: '参观', pinyin: 'cān guān', chinese: '实地观看学习', english: 'visit; tour' },
                { word: '琳琅满目', pinyin: 'lín láng mǎn mù', chinese: '美好的事物很多，看不过来', english: 'a dazzling array' },
                { word: '受益不浅', pinyin: 'shòu yì bù qiǎn', chinese: '得到的好处很多', english: 'benefit a lot' },
                { word: '翻阅', pinyin: 'fān yuè', chinese: '翻开书籍阅读', english: 'browse; read' },
                { word: '书展', pinyin: 'shū zhǎn', chinese: '展览和售卖书籍的活动', english: 'book fair' },
                { word: '参考书', pinyin: 'cān kǎo shū', chinese: '辅助学习用的书籍', english: 'reference book' },
                { word: '人山人海', pinyin: 'rén shān rén hǎi', chinese: '人特别多', english: 'a sea of people; crowded' }
            ],
            gameQuestions: [
                { 
                    text: '放学___后，我如常地翻阅报纸。', 
                    english: 'After school, I ___ and read the newspaper as usual.',
                    answer: '回家', 
                    answerEnglish: 'went home',
                    options: ['回家', '种族', '参观', '琳琅满目'],
                    optionsEnglish: ['went home', 'race', 'visit', 'dazzling array']
                },
                { 
                    text: '萌起了___的念头。', 
                    english: 'Had the idea to ___ it.',
                    answer: '参观', 
                    answerEnglish: 'visit',
                    options: ['受益不浅', '翻阅', '参观', '书展'],
                    optionsEnglish: ['benefit a lot', 'browse', 'visit', 'book fair']
                },
                { 
                    text: '于是便和妈妈一起去___。', 
                    english: 'So I went with my mother to the ___.',
                    answer: '书展', 
                    answerEnglish: 'book fair',
                    options: ['参考书', '人山人海', '大排长龙', '书展'],
                    optionsEnglish: ['reference book', 'sea of people', 'long queues', 'book fair']
                },
                { 
                    text: '到达民众会堂时，只见___。', 
                    english: 'When we arrived at the community hall, there was a ___.',
                    answer: '人山人海', 
                    answerEnglish: 'sea of people',
                    options: ['回家', '种族', '人山人海', '参观'],
                    optionsEnglish: ['go home', 'race', 'sea of people', 'visit']
                },
                { 
                    text: '参观书展的人不分男女老少及___。', 
                    english: 'Visitors to the book fair included people of all ages and ___.',
                    answer: '种族', 
                    answerEnglish: 'races',
                    options: ['琳琅满目', '受益不浅', '翻阅', '种族'],
                    optionsEnglish: ['dazzling array', 'benefit a lot', 'browse', 'races']
                },
                { 
                    text: '书架上所摆卖的书___。', 
                    english: 'The books displayed on the shelves were ___.',
                    answer: '琳琅满目', 
                    answerEnglish: 'a dazzling array',
                    options: ['书展', '参考书', '琳琅满目', '人山人海'],
                    optionsEnglish: ['book fair', 'reference book', 'a dazzling array', 'sea of people']
                },
                { 
                    text: '柜台处更是___呢！', 
                    english: 'At the counters, there were even ___!',
                    answer: '大排长龙', 
                    answerEnglish: 'long queues',
                    options: ['大排长龙', '回家', '种族', '参观'],
                    optionsEnglish: ['long queues', 'go home', 'race', 'visit']
                },
                { 
                    text: '我买了一套《西游记》和几本应付考试的___。', 
                    english: 'I bought a set of Journey to the West and several ___ for exams.',
                    answer: '参考书', 
                    answerEnglish: 'reference books',
                    options: ['琳琅满目', '受益不浅', '翻阅', '参考书'],
                    optionsEnglish: ['dazzling array', 'benefit a lot', 'browse', 'reference books']
                },
                { 
                    text: '付了钱便高高兴兴地和妈妈___。', 
                    english: 'After paying, I happily ___ them with my mother.',
                    answer: '翻阅', 
                    answerEnglish: 'browsed through',
                    options: ['书展', '翻阅', '人山人海', '大排长龙'],
                    optionsEnglish: ['book fair', 'browsed through', 'sea of people', 'long queues']
                },
                { 
                    text: '这次的书展令我___。', 
                    english: 'This book fair truly made me ___.',
                    answer: '受益不浅', 
                    answerEnglish: 'benefit a lot',
                    options: ['回家', '种族', '参观', '受益不浅'],
                    optionsEnglish: ['go home', 'race', 'visit', 'benefit a lot']
                }
            ],
            chineseSentences: [
                '放学回家后，我如常地翻阅报纸。',
                '突然，我看到一则书展的广告，萌起了参观的念头，于是便和妈妈一起去书展。',
                '到达民众会堂时，只见人山人海，场面热闹得很。',
                '参观书展的人不分男女老少及种族。',
                '书架上所摆卖的书琳琅满目，柜台处更是大排长龙呢！',
                '我买了一套《西游记》和几本应付考试的参考书，付了钱便高高兴兴地和妈妈翻阅。',
                '所谓"百闻不如一见"，这次的书展令我受益不浅。'
            ],
            englishSentences: [
                'After school, I went home and read the newspaper as usual.',
                'Suddenly, I saw an advertisement for a book fair and had the idea to visit it, so I went with my mother to the book fair.',
                'When we arrived at the community hall, there was a sea of people, and the atmosphere was very lively.',
                'Visitors to the book fair included people of all ages and races.',
                'The books displayed on the shelves were a dazzling array, and at the counters, there were even long queues!',
                'I bought a set of Journey to the West and several reference books for exams. After paying, I happily browsed through them with my mother.',
                'As the saying goes, "Seeing once is better than hearing a hundred times." This book fair truly made me benefit a lot.'
            ]
        };

        const chapter11Data = {
            vocabulary: [
                { word: '足球', pinyin: 'zú qiú', chinese: '一种用脚踢的球类运动', english: 'football; soccer' },
                { word: '踢球', pinyin: 'tī qiú', chinese: '用脚踢球', english: 'play football' },
                { word: '不偏不倚', pinyin: 'bù piān bù yǐ', chinese: '正好，不偏向任何一方', english: 'right in the middle; exactly' },
                { word: '道歉', pinyin: 'dào qiàn', chinese: '表示对过错的歉意', english: 'apologize' },
                { word: '偏寻不获', pinyin: 'piān xún bù huò', chinese: '怎么找也找不到', english: 'searched but couldn\'t find' },
                { word: '难过', pinyin: 'nán guò', chinese: '心情悲伤、不舒服', english: 'sad; upset' },
                { word: '认定', pinyin: 'rèn dìng', chinese: '确定地认为', english: 'firmly believe' },
                { word: '理论', pinyin: 'lǐ lùn', chinese: '争辩、讲理', english: 'argue' },
                { word: '连忙', pinyin: 'lián máng', chinese: '立刻，赶快', english: 'hurriedly' },
                { word: '快乐', pinyin: 'kuài lè', chinese: '高兴，愉快', english: 'happy' }
            ],
            gameQuestions: [
                { 
                    text: '我今年的生日礼物是一个___。', 
                    english: 'My birthday gift this year was a ___.',
                    answer: '足球', 
                    answerEnglish: 'football',
                    options: ['足球', '踢球', '不偏不倚', '道歉'],
                    optionsEnglish: ['football', 'play football', 'right in the middle', 'apologize']
                },
                { 
                    text: '约几个好朋友到球场去___。', 
                    english: 'Ask a few friends to go to the field to ___.',
                    answer: '踢球', 
                    answerEnglish: 'play football',
                    options: ['偏寻不获', '难过', '踢球', '认定'],
                    optionsEnglish: ['searched but couldn\'t find', 'sad', 'play football', 'firmly believe']
                },
                { 
                    text: '球竟然直飞向游乐场旁的明强，___，正打在他的脸上。', 
                    english: 'The ball suddenly flew straight toward Mingqiang, landing ___ on his face.',
                    answer: '不偏不倚', 
                    answerEnglish: 'right in the middle',
                    options: ['理论', '连忙', '快乐', '不偏不倚'],
                    optionsEnglish: ['argue', 'hurriedly', 'happy', 'right in the middle']
                },
                { 
                    text: '我连忙跑过去，连声___。', 
                    english: 'I hurriedly ran over and kept ___.',
                    answer: '道歉', 
                    answerEnglish: 'apologizing',
                    options: ['足球', '踢球', '道歉', '偏寻不获'],
                    optionsEnglish: ['football', 'play football', 'apologizing', 'searched but couldn\'t find']
                },
                { 
                    text: '当我回到球场找球时，我___。', 
                    english: 'When I went back to the field to look for it, I ___.',
                    answer: '偏寻不获', 
                    answerEnglish: 'searched but couldn\'t find it',
                    options: ['难过', '认定', '偏寻不获', '理论'],
                    optionsEnglish: ['sad', 'firmly believe', 'searched but couldn\'t find it', 'argue']
                },
                { 
                    text: '心里十分___。', 
                    english: 'Which made me even more ___.',
                    answer: '难过', 
                    answerEnglish: 'upset',
                    options: ['连忙', '快乐', '难过', '不偏不倚'],
                    optionsEnglish: ['hurriedly', 'happy', 'upset', 'right in the middle']
                },
                { 
                    text: '心里___明强拿了我的球。', 
                    english: 'I ___ he had taken my ball.',
                    answer: '认定', 
                    answerEnglish: 'firmly believed',
                    options: ['道歉', '偏寻不获', '认定', '理论'],
                    optionsEnglish: ['apologize', 'searched but couldn\'t find', 'firmly believed', 'argue']
                },
                { 
                    text: '正想冲过去找他___。', 
                    english: 'And was about to ___ with him.',
                    answer: '理论', 
                    answerEnglish: 'argue',
                    options: ['理论', '连忙', '快乐', '足球'],
                    optionsEnglish: ['argue', 'hurriedly', 'happy', 'football']
                },
                { 
                    text: '我___捡起我的球。', 
                    english: 'I ___ picked up my ball.',
                    answer: '连忙', 
                    answerEnglish: 'quickly',
                    options: ['踢球', '不偏不倚', '难过', '连忙'],
                    optionsEnglish: ['play football', 'right in the middle', 'sad', 'quickly']
                },
                { 
                    text: '我们___地踢起球来。', 
                    english: 'And together we ___ played football again.',
                    answer: '快乐', 
                    answerEnglish: 'happily',
                    options: ['认定', '偏寻不获', '道歉', '快乐'],
                    optionsEnglish: ['firmly believe', 'searched but couldn\'t find', 'apologize', 'happily']
                }
            ],
            chineseSentences: [
                '我今年的生日礼物是一个足球。',
                '我总喜欢在做完功课的下午，约几个好朋友到球场去踢球。',
                '今天，正当我们踢得好不快乐时，球竟然直飞向游乐场旁的明强，不偏不倚，正打在他的脸上。',
                '我连忙跑过去，连声道歉，明强满脸不高兴地走了，我心里有点难过。',
                '当我拖着疲倦的身体走回家，我才想起忘了把足球带回家。',
                '当我回到球场找球时，我偏寻不获，心里十分难过。',
                '第二天，我又来到球场，只见明强正在踢球，心里认定明强拿了我的球。',
                '正想冲过去找他理论时，我走过沟渠，看见我的球正躺在那里。',
                '这时，明强正喊着我的名字，我连忙捡起我的球，飞快地跑向明强。',
                '我们快乐地踢起球来。'
            ],
            englishSentences: [
                'My birthday gift this year was a football.',
                'I always liked to, after finishing my homework in the afternoon, ask a few friends to go to the field to play football.',
                'Today, while we were playing happily, the ball suddenly flew straight toward Mingqiang at the playground, landing right in the middle on his face.',
                'I hurriedly ran over and kept apologizing. Mingqiang, looking upset, walked away, leaving me feeling sad.',
                'When I dragged my tired body home, I realized I had forgotten to bring my football.',
                'When I went back to the field to look for it, I searched but couldn\'t find it, which made me even more upset.',
                'The next day, I came to the field again and saw Mingqiang playing. I firmly believed he had taken my ball.',
                'I was about to argue with him, but as I passed a drain, I saw my ball lying there.',
                'At that moment, Mingqiang called my name. I quickly picked up my ball and ran to him.',
                'Together we happily played football again.'
            ]
        };

        const chapter12Data = {
            vocabulary: [
                { word: '快乐', pinyin: 'kuài lè', chinese: '高兴，愉快', english: 'happy' },
                { word: '缺陷', pinyin: 'quē xiàn', chinese: '不完整或不足的地方', english: 'defect' },
                { word: '生活', pinyin: 'shēng huó', chinese: '日常过日子', english: 'life' },
                { word: '旱季', pinyin: 'hàn jì', chinese: '少雨或无雨的季节', english: 'dry season' },
                { word: '逃命', pinyin: 'táo mìng', chinese: '为保命而逃跑', english: 'escape for one\'s life' },
                { word: '指路', pinyin: 'zhǐ lù', chinese: '指引道路', english: 'give directions' },
                { word: '帮助', pinyin: 'bāng zhù', chinese: '协助，给予支持', english: 'help' },
                { word: '道谢', pinyin: 'dào xiè', chinese: '表示感谢', english: 'give thanks' },
                { word: '珍惜', pinyin: 'zhēn xī', chinese: '重视，爱护', english: 'cherish' },
                { word: '可贵', pinyin: 'kě guì', chinese: '非常珍重', english: 'valuable; precious' }
            ],
            gameQuestions: [
                { 
                    text: '它们___地生活在一起。', 
                    english: 'They lived together ___.',
                    answer: '快乐', 
                    answerEnglish: 'happily',
                    options: ['快乐', '缺陷', '生活', '旱季'],
                    optionsEnglish: ['happily', 'defect', 'life', 'dry season']
                },
                { 
                    text: '但这些___没有给它们的生活带来任何不便。', 
                    english: 'But these ___ didn\'t bring any trouble to their lives.',
                    answer: '缺陷', 
                    answerEnglish: 'defects',
                    options: ['逃命', '指路', '缺陷', '帮助'],
                    optionsEnglish: ['escape for life', 'give directions', 'defects', 'help']
                },
                { 
                    text: '没有给它们的___带来任何不便。', 
                    english: 'Didn\'t bring any trouble to their ___.',
                    answer: '生活', 
                    answerEnglish: 'lives',
                    options: ['道谢', '珍惜', '可贵', '生活'],
                    optionsEnglish: ['give thanks', 'cherish', 'precious', 'lives']
                },
                { 
                    text: '森林在一个干___发生了大火。', 
                    english: 'During a ___, a big fire broke out in the forest.',
                    answer: '旱季', 
                    answerEnglish: 'dry season',
                    options: ['快乐', '缺陷', '旱季', '逃命'],
                    optionsEnglish: ['happy', 'defect', 'dry season', 'escape for life']
                },
                { 
                    text: '森林里的每一个成员都飞快地___。', 
                    english: 'Every creature was quickly ___.',
                    answer: '逃命', 
                    answerEnglish: 'escaping for their lives',
                    options: ['指路', '帮助', '道谢', '逃命'],
                    optionsEnglish: ['give directions', 'help', 'give thanks', 'escaping for their lives']
                },
                { 
                    text: '它给狐狸___，也只有这样它们才能得救。', 
                    english: 'It would ___, so they could escape together.',
                    answer: '指路', 
                    answerEnglish: 'give directions',
                    options: ['珍惜', '可贵', '生活', '指路'],
                    optionsEnglish: ['cherish', 'precious', 'life', 'give directions']
                },
                { 
                    text: '这两位好朋友互相___。', 
                    english: 'The two good friends ___ each other.',
                    answer: '帮助', 
                    answerEnglish: 'helped',
                    options: ['旱季', '逃命', '帮助', '道谢'],
                    optionsEnglish: ['dry season', 'escape for life', 'helped', 'give thanks']
                },
                { 
                    text: '它俩互相___。', 
                    english: 'They ___ each other.',
                    answer: '道谢', 
                    answerEnglish: 'thanked',
                    options: ['快乐', '缺陷', '指路', '道谢'],
                    optionsEnglish: ['happy', 'defect', 'give directions', 'thanked']
                },
                { 
                    text: '___着这份可贵的友情。', 
                    english: '___ their precious friendship.',
                    answer: '珍惜', 
                    answerEnglish: 'cherished',
                    options: ['生活', '帮助', '珍惜', '可贵'],
                    optionsEnglish: ['life', 'help', 'cherished', 'precious']
                },
                { 
                    text: '珍惜着这份___的友情。', 
                    english: 'Cherished their ___ friendship.',
                    answer: '可贵', 
                    answerEnglish: 'precious',
                    options: ['旱季', '逃命', '指路', '可贵'],
                    optionsEnglish: ['dry season', 'escape for life', 'give directions', 'precious']
                }
            ],
            chineseSentences: [
                '从前，在一个大森林里，住了一只狐狸，它有一位好朋友——小乌龟，它们快乐地生活在一起。',
                '这只狐狸的双眼瞎了，小乌龟的前腿也在一次意外中变得跛了。',
                '但这些缺陷没有给它们的生活带来任何不便。',
                '有一天，森林在一个干旱季发生了大火，森林里的每一个成员都飞快地逃命。',
                '这时，小乌龟来到狐狸面前，请求狐狸让它坐在背上。',
                '它给狐狸指路，也只有这样它们才能得救。',
                '这两位好朋友互相帮助，安全地离开火灾现场。',
                '它俩互相道谢，珍惜着这份可贵的友情。'
            ],
            englishSentences: [
                'Once upon a time, in a big forest, there lived a fox and its good friend — a little turtle. They lived together happily.',
                'The fox was blind, and the turtle\'s front legs had become crippled in an accident.',
                'But these defects didn\'t bring any trouble to their lives.',
                'One day, during a dry season, a big fire broke out in the forest. Every creature was quickly escaping for their lives.',
                'The turtle came to the fox and asked to ride on its back.',
                'It would give directions, so they could escape together.',
                'The two good friends helped each other and safely escaped the fire.',
                'They thanked each other and cherished their precious friendship.'
            ]
        };

        const encouragementWords = [
            '很厉害！', '你棒棒的！', '加油下一题！', '太棒了！', 
            '继续加油！', '你真聪明！', '做得很好！', '真厉害！',
            '超级棒！', '你太厉害了！'
        ];

        // Text-to-speech functions
        const isAppleDevice = /iPad|iPhone|iPod|Mac/.test(navigator.userAgent);

        const speakText = (text, language = 'zh-CN') => {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                
                let cleanText = text;
                
                if (language === 'zh-CN') {
                    cleanText = cleanText.replace(/\s*[\/\|]\s*[a-zA-Z].*/g, '');
                } else {
                    cleanText = cleanText.replace(/[\/\|]/g, ' ');
                }
                
                cleanText = cleanText.replace(/_/g, ' ')
                                    .replace(/underscore/gi, '')
                                    .replace(/\bslash\b/gi, '')
                                    .replace(/\s+/g, ' ')
                                    .trim();
                
                const utterance = new SpeechSynthesisUtterance(cleanText);
                utterance.lang = language;
                utterance.rate = 0.8;
                utterance.pitch = 1.2;
                utterance.volume = 1.0;
                
                if (isAppleDevice) {
                    utterance.volume = 1.0;
                    utterance.rate = 0.7;
                }
                
                window.speechSynthesis.speak(utterance);
                return utterance;
            } else {
                if (isAppleDevice) {
                    console.log('Apple设备语音功能受限，请：\n1. 检查静音开关\n2. 调高音量\n3. 尝试多次点击\n4. 建议使用Chrome浏览器');
                } else {
                    console.log('您的浏览器不支持语音功能');
                }
                return null;
            }
        };

        const speakBilingual = (chineseText, englishText) => {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                
                let cleanChineseText = chineseText.replace(/\s*[\/\|]\s*[a-zA-Z].*/g, '')
                                                  .replace(/_/g, ' ')
                                                  .replace(/underscore/gi, '')
                                                  .replace(/\bslash\b/gi, '')
                                                  .replace(/\s+/g, ' ')
                                                  .trim();
                
                let cleanEnglishText = englishText.replace(/[\/\|]/g, ' ')
                                                  .replace(/_/g, ' ')
                                                  .replace(/underscore/gi, '')
                                                  .replace(/\bslash\b/gi, '')
                                                  .replace(/\s+/g, ' ')
                                                  .trim();
                
                const chineseUtterance = new SpeechSynthesisUtterance(cleanChineseText);
                chineseUtterance.lang = 'zh-CN';
                chineseUtterance.rate = isAppleDevice ? 0.7 : 0.8;
                chineseUtterance.pitch = 1.2;
                chineseUtterance.volume = 1.0;
                
                chineseUtterance.onend = () => {
                    const englishUtterance = new SpeechSynthesisUtterance(cleanEnglishText);
                    englishUtterance.lang = 'en-US';
                    englishUtterance.rate = isAppleDevice ? 0.7 : 0.8;
                    englishUtterance.pitch = 1.2;
                    englishUtterance.volume = 1.0;
                    window.speechSynthesis.speak(englishUtterance);
                };
                
                window.speechSynthesis.speak(chineseUtterance);
            }
        };

        // Utility functions
        const getCurrentData = () => {
            if (currentChapter === 'chapter9') return chapter9Data;
            if (currentChapter === 'chapter10') return chapter10Data;
            if (currentChapter === 'chapter11') return chapter11Data;
            return chapter12Data;
        };

        const resetChapterData = () => {
            currentPhase = 'learning';
            currentWordIndex = 0;
            viewedChinese = false;
            viewedEnglish = false;
            gameAnswers = {};
            wrongCount = 0;
            currentQuestion = 0;
            gameCompleted = false;
            readingLanguage = '';
            currentSentence = -1;
            isReading = false;
        };

        const handleChapterSelect = (chapter) => {
            currentChapter = chapter;
            resetChapterData();
            render();
        };

        const backToMenu = () => {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
            }
            currentChapter = 'menu';
            resetChapterData();
            render();
        };

        const getChapterTitle = () => {
            return currentChapter === 'chapter9' ? '第九篇：我敬爱的老师' : 
                   currentChapter === 'chapter10' ? '第十篇：热闹的书展' : 
                   currentChapter === 'chapter11' ? '第十一篇：足球与友情' : 
                   '第十二篇：狐狸与乌龟的友情';
        };

        const handleViewChinese = () => {
            viewedChinese = true;
            speakText(getCurrentData().vocabulary[currentWordIndex].chinese);
            render();
        };

        const handleViewEnglish = () => {
            viewedEnglish = true;
            speakText(getCurrentData().vocabulary[currentWordIndex].english, 'en-US');
            render();
        };

        const handlePreviousWord = () => {
            if (currentWordIndex > 0) {
                currentWordIndex--;
                viewedChinese = false;
                viewedEnglish = false;
                render();
            }
        };

        const handleNextWord = () => {
            if (currentWordIndex < getCurrentData().vocabulary.length - 1) {
                currentWordIndex++;
                viewedChinese = false;
                viewedEnglish = false;
                render();
            } else {
                currentPhase = 'game';
                render();
            }
        };

        const handleGameAnswer = (selectedAnswer) => {
            const currentQ = getCurrentData().gameQuestions[currentQuestion];
            const isCorrect = selectedAnswer === currentQ.answer;
            
            if (isCorrect) {
                const randomEncouragement = encouragementWords[Math.floor(Math.random() * encouragementWords.length)];
                // Speech-only feedback - no alert popup
                speakText(randomEncouragement);
                
                gameAnswers[currentQuestion] = selectedAnswer;
                wrongCount = 0;
                
                if (currentQuestion < getCurrentData().gameQuestions.length - 1) {
                    currentQuestion++;
                } else {
                    gameCompleted = true;
                    currentPhase = 'reading';
                }
                render();
            } else {
                wrongCount++;
                
                if (wrongCount >= 3) {
                    // Speech-only feedback - no alert popup
                    speakText('需要重新开始练习！');
                    currentQuestion = 0;
                    gameAnswers = {};
                    wrongCount = 0;
                } else {
                    // Speech-only feedback - no alert popup
                    speakText('答错了，再试试！');
                }
                render();
            }
        };

        const handleReading = (language) => {
            readingLanguage = language;
            currentSentence = 0;
            isReading = true;
            
            setTimeout(() => {
                const sentences = language === 'chinese' ? getCurrentData().chineseSentences : getCurrentData().englishSentences;
                speakText(sentences[0], language === 'chinese' ? 'zh-CN' : 'en-US');
            }, 500);
            render();
        };

        const handleNextSentence = () => {
            const sentences = readingLanguage === 'chinese' ? getCurrentData().chineseSentences : getCurrentData().englishSentences;
            if (currentSentence < sentences.length - 1) {
                const nextIndex = currentSentence + 1;
                currentSentence = nextIndex;
                
                setTimeout(() => {
                    speakText(sentences[nextIndex], readingLanguage === 'chinese' ? 'zh-CN' : 'en-US');
                }, 300);
                render();
            } else {
                isReading = false;
                currentPhase = 'completed';
                // Speech-only feedback - no alert popup
                speakText('朗读完成！你学得很棒！');
                render();
            }
        };

        const handleNextChapter = () => {
            const chapters = ['chapter9', 'chapter10', 'chapter11', 'chapter12'];
            const currentIndex = chapters.indexOf(currentChapter);
            
            if (currentIndex < chapters.length - 1) {
                currentChapter = chapters[currentIndex + 1];
                resetChapterData();
            } else {
                // Speech-only feedback - no alert popup
                speakText('恭喜完成第三套所有作文！');
                currentChapter = 'menu';
                resetChapterData();
            }
            render();
        };

        // Render functions
        const renderMenu = () => {
            return `
                <div class="min-h-screen bg-gradient-to-br from-purple-100 via-violet-50 to-pink-100 p-6">
                    <div class="max-w-6xl mx-auto">
                        <div class="bg-white-90 backdrop-blur rounded-2xl shadow-2xl p-12">
                            <div class="text-center mb-12">
                                <h1 class="text-5xl font-bold bg-gradient-to-r from-purple-600 to-violet-600 bg-clip-text text-transparent mb-4">
                                    🌟 第三套：社交故事集
                                </h1>
                                <h2 class="text-3xl font-semibold text-gray-600 mb-2">
                                    Set 3: Social Story Collection (Chapters 9-12)
                                </h2>
                                <p class="text-xl text-gray-500 mb-8">
                                    师生情、文化体验、误解和解、互助友情<br/>
                                    Teacher-student bond, culture experience, reconciliation, mutual assistance
                                </p>

                                <!-- Apple设备特别说明 -->
                                <div class="bg-blue-50 p-6 rounded-xl border-2 border-blue-200 mb-8">
                                    <h3 class="text-xl font-semibold text-blue-700 mb-3 flex items-center justify-center gap-2">
                                        🍎 Apple设备用户专用指南 / Apple Device User Guide
                                    </h3>
                                    <div class="text-blue-800 text-left max-w-4xl mx-auto space-y-3">
                                        <div class="bg-white p-4 rounded-lg">
                                            <h4 class="font-bold text-lg mb-2">📱 如果听不到声音，请按以下步骤：</h4>
                                            <ul class="space-y-2 text-sm">
                                                <li>• <strong>🔇 检查静音开关</strong>：iPhone/iPad侧边的橙色开关要关闭</li>
                                                <li>• <strong>🔊 调高音量</strong>：按音量+键，确保媒体音量开启</li>
                                                <li>• <strong>👆 多次点击</strong>：朗读按钮可能需要点击2-3次才能激活</li>
                                                <li>• <strong>🌐 换浏览器</strong>：强烈建议下载<strong>Chrome浏览器</strong>使用</li>
                                            </ul>
                                        </div>
                                        <div class="bg-white p-4 rounded-lg">
                                            <h4 class="font-bold text-lg mb-2">🌐 If you can't hear audio, please follow these steps:</h4>
                                            <ul class="space-y-2 text-sm">
                                                <li>• <strong>🔇 Check silent switch</strong>: Turn off the orange switch on iPhone/iPad side</li>
                                                <li>• <strong>🔊 Turn up volume</strong>: Press volume+ button, ensure media volume is on</li>
                                                <li>• <strong>👆 Click multiple times</strong>: Audio buttons may need 2-3 clicks to activate</li>
                                                <li>• <strong>🌐 Switch browser</strong>: Strongly recommend downloading <strong>Chrome browser</strong></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-6 mb-8">
                                <!-- 第九篇 -->
                                <div class="bg-gradient-to-br from-red-50 to-orange-100 p-6 rounded-xl border-2 border-red-200 hover:border-red-400 transition-all hover:shadow-lg">
                                    <div class="text-center mb-6">
                                        <div class="text-5xl mb-4">👩‍🏫</div>
                                        <h3 class="text-xl font-bold text-red-700 mb-2">第九篇：我敬爱的老师</h3>
                                        <h4 class="text-lg font-semibold text-red-600 mb-3">Chapter 9: My Beloved Teacher</h4>
                                        <p class="text-gray-600 mb-3 text-sm">
                                            学习关于师生情谊的10个词汇<br/>
                                            Learn 10 teacher-student relationship words
                                        </p>
                                        <div class="text-xs text-gray-500 mb-4">
                                            <strong>主题:</strong> 感恩与尊敬<br/>
                                            <strong>Theme:</strong> Gratitude and respect
                                        </div>
                                    </div>
                                    <button
                                        onclick="handleChapterSelect('chapter9')"
                                        class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg text-sm transition-colors flex items-center justify-center gap-2"
                                    >
                                        📖 开始学习
                                    </button>
                                </div>

                                <!-- 第十篇 -->
                                <div class="bg-gradient-to-br from-indigo-50 to-blue-100 p-6 rounded-xl border-2 border-indigo-200 hover:border-indigo-400 transition-all hover:shadow-lg">
                                    <div class="text-center mb-6">
                                        <div class="text-5xl mb-4">📚</div>
                                        <h3 class="text-xl font-bold text-indigo-700 mb-2">第十篇：热闹的书展</h3>
                                        <h4 class="text-lg font-semibold text-indigo-600 mb-3">Chapter 10: Lively Book Fair</h4>
                                        <p class="text-gray-600 mb-3 text-sm">
                                            学习关于活动和文化的10个词汇<br/>
                                            Learn 10 activity and culture words
                                        </p>
                                        <div class="text-xs text-gray-500 mb-4">
                                            <strong>主题:</strong> 文化体验<br/>
                                            <strong>Theme:</strong> Cultural experience
                                        </div>
                                    </div>
                                    <button
                                        onclick="handleChapterSelect('chapter10')"
                                        class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg text-sm transition-colors flex items-center justify-center gap-2"
                                    >
                                        📖 开始学习
                                    </button>
                                </div>

                                <!-- 第十一篇 -->
                                <div class="bg-gradient-to-br from-lime-50 to-green-100 p-6 rounded-xl border-2 border-lime-200 hover:border-lime-400 transition-all hover:shadow-lg">
                                    <div class="text-center mb-6">
                                        <div class="text-5xl mb-4">⚽</div>
                                        <h3 class="text-xl font-bold text-lime-700 mb-2">第十一篇：足球与友情</h3>
                                        <h4 class="text-lg font-semibold text-lime-600 mb-3">Chapter 11: Football and Friendship</h4>
                                        <p class="text-gray-600 mb-3 text-sm">
                                            学习关于运动和友谊的10个词汇<br/>
                                            Learn 10 sports and friendship words
                                        </p>
                                        <div class="text-xs text-gray-500 mb-4">
                                            <strong>主题:</strong> 误解与和解<br/>
                                            <strong>Theme:</strong> Misunderstanding and reconciliation
                                        </div>
                                    </div>
                                    <button
                                        onclick="handleChapterSelect('chapter11')"
                                        class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg text-sm transition-colors flex items-center justify-center gap-2"
                                    >
                                        📖 开始学习
                                    </button>
                                </div>

                                <!-- 第十二篇 -->
                                <div class="bg-gradient-to-br from-amber-50 to-yellow-100 p-6 rounded-xl border-2 border-amber-200 hover:border-amber-400 transition-all hover:shadow-lg">
                                    <div class="text-center mb-6">
                                        <div class="text-5xl mb-4">🦊🐢</div>
                                        <h3 class="text-xl font-bold text-amber-700 mb-2">第十二篇：狐狸与乌龟的友情</h3>
                                        <h4 class="text-lg font-semibold text-amber-600 mb-3">Chapter 12: Fox and Turtle Friendship</h4>
                                        <p class="text-gray-600 mb-3 text-sm">
                                            学习关于互助和友情的10个词汇<br/>
                                            Learn 10 mutual help and friendship words
                                        </p>
                                        <div class="text-xs text-gray-500 mb-4">
                                            <strong>主题:</strong> 互相帮助<br/>
                                            <strong>Theme:</strong> Mutual assistance
                                        </div>
                                    </div>
                                    <button
                                        onclick="handleChapterSelect('chapter12')"
                                        class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg text-sm transition-colors flex items-center justify-center gap-2"
                                    >
                                        📖 开始学习
                                    </button>
                                </div>
                            </div>

                            <div class="text-center">
                                <div class="bg-gray-50 p-6 rounded-xl border-2 border-gray-200">
                                    <h3 class="text-xl font-semibold text-gray-700 mb-3">
                                        💡 学习说明 / Learning Instructions
                                    </h3>
                                    <div class="text-gray-600 text-left max-w-4xl mx-auto space-y-2">
                                        <p>• 📚 <strong>词汇学习</strong>：学习新词汇的发音和含义 / <strong>Vocabulary Learning</strong>: Learn pronunciation and meaning</p>
                                        <p>• 🎮 <strong>填空练习</strong>：通过练习题巩固学习 / <strong>Fill-in-the-blank</strong>: Reinforce learning with exercises</p>
                                        <p>• 📖 <strong>作文朗读</strong>：朗读完整故事提高理解 / <strong>Essay Reading</strong>: Read complete stories for comprehension</p>
                                        <p>• 🎵 <strong>语音功能</strong>：所有内容都可以朗读 / <strong>Audio Feature</strong>: All content can be read aloud</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        const renderLearningPhase = () => {
            const currentData = getCurrentData();
            const currentWord = currentData.vocabulary[currentWordIndex];
            return `
                <div class="min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 p-6">
                    <div class="max-w-4xl mx-auto">
                        <div class="bg-white rounded-lg shadow-lg p-8">
                            <div class="flex items-center justify-between mb-6">
                                <h1 class="text-3xl font-bold text-purple-600 flex items-center gap-2">
                                    📖 词汇学习 - ${getChapterTitle()}
                                </h1>
                                <div class="flex items-center gap-4">
                                    <div class="text-lg text-gray-600">
                                        ${currentWordIndex + 1} / ${currentData.vocabulary.length}
                                    </div>
                                    <button
                                        onclick="backToMenu()"
                                        class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-colors"
                                    >
                                        🏠 返回主页
                                    </button>
                                </div>
                            </div>
                            
                            <div class="text-center mb-8">
                                <div class="text-6xl font-bold text-blue-600 mb-4">
                                    ${currentWord.word}
                                </div>
                                <div class="text-2xl text-gray-500 mb-4">${currentWord.pinyin}</div>
                                
                                <button
                                    onclick="speakText('${currentWord.word}')"
                                    class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold mb-6 transition-colors"
                                >
                                    朗读词语
                                </button>
                                
                                <div class="space-y-4">
                                    ${viewedChinese ? `
                                        <div class="bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-400">
                                            <p class="text-lg"><strong>中文解释：</strong>${currentWord.chinese}</p>
                                        </div>
                                    ` : `
                                        <button
                                            onclick="handleViewChinese()"
                                            class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors w-full"
                                        >
                                            查看华语解释
                                        </button>
                                    `}
                                    
                                    ${viewedEnglish ? `
                                        <div class="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-400">
                                            <p class="text-lg"><strong>English:</strong> ${currentWord.english}</p>
                                        </div>
                                    ` : `
                                        <button
                                            onclick="handleViewEnglish()"
                                            class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors w-full"
                                        >
                                            查看英文解释
                                        </button>
                                    `}
                                    
                                    ${viewedChinese && viewedEnglish ? `
                                        <div class="flex justify-center gap-4">
                                            ${currentWordIndex > 0 ? `
                                                <button
                                                    onclick="handlePreviousWord()"
                                                    class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg text-lg font-semibold transition-colors"
                                                >
                                                    返回上一词汇
                                                </button>
                                            ` : ''}
                                            <button
                                                onclick="handleNextWord()"
                                                class="bg-purple-500 hover:bg-purple-600 text-white px-8 py-4 rounded-lg text-xl font-semibold transition-colors"
                                            >
                                                ${currentWordIndex < currentData.vocabulary.length - 1 ? '下一个词汇' : '开始练习'}
                                            </button>
                                        </div>
                                    ` : `
                                        <div class="text-center py-4">
                                            <p class="text-gray-500">请先查看华语和英文解释</p>
                                            ${currentWordIndex > 0 ? `
                                                <button
                                                    onclick="handlePreviousWord()"
                                                    class="mt-2 bg-gray-400 hover:bg-gray-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                                                >
                                                    返回上一词汇
                                                </button>
                                            ` : ''}
                                        </div>
                                    `}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        const renderGamePhase = () => {
            const currentData = getCurrentData();
            const currentQ = currentData.gameQuestions[currentQuestion];
            return `
                <div class="min-h-screen bg-gradient-to-br from-green-100 to-blue-100 p-6">
                    <div class="max-w-4xl mx-auto">
                        <div class="bg-white rounded-lg shadow-lg p-8">
                            <div class="flex items-center justify-between mb-6">
                                <h1 class="text-3xl font-bold text-green-600 flex items-center gap-2">
                                    🎮 填空练习 - ${getChapterTitle()}
                                </h1>
                                <div class="flex items-center gap-4">
                                    <div class="text-lg text-gray-600">
                                        第 ${currentQuestion + 1} 题 / ${currentData.gameQuestions.length}
                                    </div>
                                    <button
                                        onclick="backToMenu()"
                                        class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-colors"
                                    >
                                        🏠 返回主页
                                    </button>
                                </div>
                            </div>
                            
                            <div class="text-center mb-8">
                                <div class="space-y-4 mb-8">
                                    <div class="p-6 bg-gray-50 rounded-lg">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-xl text-gray-800 flex-1">${currentQ.text}</span>
                                            <button
                                                onclick="speakText('${currentQ.text.replace(/'/g, '\\\'')}')"
                                                class="bg-gray-500 hover:bg-gray-600 text-white p-2 rounded-full ml-4 transition-colors"
                                                title="朗读中文题目"
                                            >
                                                🔊
                                            </button>
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <span class="text-lg text-gray-600 flex-1">${currentQ.english}</span>
                                            <button
                                                onclick="speakText('${currentQ.english.replace(/'/g, '\\\'')}', 'en-US')"
                                                class="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full ml-4 transition-colors"
                                                title="朗读英文题目"
                                            >
                                                🔊
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 gap-3 max-w-2xl mx-auto">
                                    ${currentQ.options.map((option, index) => `
                                        <div class="flex items-center justify-between bg-white p-3 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-colors">
                                            <button
                                                onclick="handleGameAnswer('${option}')"
                                                class="flex-1 text-left bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg text-lg font-semibold transition-colors"
                                            >
                                                ${option} (${currentQ.optionsEnglish[index]})
                                            </button>
                                            <button
                                                onclick="speakBilingual('${option}', '${currentQ.optionsEnglish[index]}')"
                                                class="bg-green-500 hover:bg-green-600 text-white p-2 rounded-full ml-3 transition-colors"
                                                title="朗读选项"
                                            >
                                                🔊
                                            </button>
                                        </div>
                                    `).join('')}
                                </div>
                                
                                ${wrongCount > 0 ? `
                                    <div class="mt-4 text-red-500 font-semibold">
                                        错误次数: ${wrongCount}/3
                                    </div>
                                ` : ''}
                                
                                <button
                                    onclick="currentPhase = 'learning'; render();"
                                    class="mt-6 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                                >
                                    返回词汇学习
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        const renderReadingPhase = () => {
            if (!isReading) {
                return `
                    <div class="min-h-screen bg-gradient-to-br from-purple-100 to-pink-100 p-6">
                        <div class="max-w-4xl mx-auto">
                            <div class="bg-white rounded-lg shadow-lg p-8 text-center">
                                <div class="flex items-center justify-between mb-8">
                                    <h1 class="text-3xl font-bold text-purple-600 flex items-center gap-2">
                                        🔊 作文朗读 - ${getChapterTitle()}
                                    </h1>
                                    <button
                                        onclick="backToMenu()"
                                        class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-colors"
                                    >
                                        🏠 返回主页
                                    </button>
                                </div>
                                <p class="text-xl text-gray-700 mb-8">
                                    恭喜完成所有练习！选择语言开始朗读：<br/>
                                    Congratulations on completing all exercises! Choose a language to start reading:
                                </p>
                                
                                <div class="space-y-4">
                                    <button
                                        onclick="handleReading('chinese')"
                                        class="bg-red-500 hover:bg-red-600 text-white px-8 py-4 rounded-lg text-xl font-semibold mr-4 transition-colors"
                                    >
                                        中文朗读 / Chinese Reading
                                    </button>
                                    <button
                                        onclick="handleReading('english')"
                                        class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-4 rounded-lg text-xl font-semibold transition-colors"
                                    >
                                        英文朗读 / English Reading
                                    </button>
                                </div>
                                
                                <button
                                    onclick="resetChapterData(); render();"
                                    class="mt-8 bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 mx-auto transition-colors"
                                >
                                    🔄 重新开始本章 / Restart Chapter
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                const sentences = readingLanguage === 'chinese' ? getCurrentData().chineseSentences : getCurrentData().englishSentences;
                
                return `
                    <div class="min-h-screen bg-gradient-to-br from-purple-100 to-pink-100 p-6">
                        <div class="max-w-4xl mx-auto">
                            <div class="bg-white rounded-lg shadow-lg p-8">
                                <div class="flex items-center justify-between mb-8">
                                    <h1 class="text-3xl font-bold text-purple-600 text-center">
                                        ${readingLanguage === 'chinese' ? '中文朗读 / Chinese Reading' : 'English Reading / 英文朗读'}
                                    </h1>
                                    <button
                                        onclick="backToMenu()"
                                        class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-colors"
                                    >
                                        🏠 返回主页
                                    </button>
                                </div>
                                
                                <div class="text-lg text-gray-600 mb-4 text-center">
                                    ${readingLanguage === 'chinese' 
                                        ? `第 ${currentSentence + 1} 句 / ${sentences.length} | Sentence ${currentSentence + 1} of ${sentences.length}`
                                        : `Sentence ${currentSentence + 1} of ${sentences.length} | 第 ${currentSentence + 1} 句 / ${sentences.length}`
                                    }
                                </div>
                                
                                <div class="mb-8">
                                    <h3 class="text-xl font-semibold mb-4 text-center text-gray-700">
                                        ${readingLanguage === 'chinese' ? '完整作文：' : 'Complete Essay:'}
                                    </h3>
                                    <div class="bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-400">
                                        ${sentences.map((sentence, index) => `
                                            <p class="text-lg mb-3 ${
                                                index === currentSentence 
                                                    ? 'bg-yellow-200 p-2 rounded font-semibold text-blue-800' 
                                                    : 'text-gray-700'
                                            }">
                                                ${sentence}
                                            </p>
                                        `).join('')}
                                    </div>
                                </div>
                                
                                <div class="text-center">
                                    <div class="bg-blue-50 p-4 rounded-lg mb-6 border-l-4 border-blue-400">
                                        <p class="text-xl font-semibold text-blue-800 mb-2">
                                            ${readingLanguage === 'chinese' ? '正在朗读：Now Reading:' : 'Now Reading: 正在朗读：'}
                                        </p>
                                        <p class="text-lg text-gray-800">${sentences[currentSentence]}</p>
                                    </div>
                                    
                                    <div class="flex justify-center gap-4">
                                        <button
                                            onclick="speakText('${sentences[currentSentence].replace(/'/g, '\\\'')}', '${readingLanguage === 'chinese' ? 'zh-CN' : 'en-US'}')"
                                            class="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 transition-colors"
                                        >
                                            🔊 ${readingLanguage === 'chinese' ? '重新朗读这句 / Repeat This Sentence' : 'Repeat This Sentence / 重新朗读这句'}
                                        </button>
                                        
                                        <button
                                            onclick="handleNextSentence()"
                                            class="bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-lg text-xl font-semibold transition-colors flex items-center gap-2"
                                        >
                                            ▶️ ${currentSentence < sentences.length - 1 
                                                ? (readingLanguage === 'chinese' ? '下一句 / Next Sentence' : 'Next Sentence / 下一句')
                                                : (readingLanguage === 'chinese' ? '完成朗读 / Complete Reading' : 'Complete Reading / 完成朗读')
                                            }
                                        </button>
                                    </div>
                                    
                                    <button
                                        onclick="isReading = false; readingLanguage = ''; render();"
                                        class="mt-4 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors"
                                    >
                                        ${readingLanguage === 'chinese' ? '返回选择语言 / Back to Language Selection' : 'Back to Language Selection / 返回选择语言'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
        };

        const renderCompletedPhase = () => {
            return `
                <div class="min-h-screen bg-gradient-to-br from-green-100 to-emerald-100 p-6">
                    <div class="max-w-4xl mx-auto">
                        <div class="bg-white rounded-lg shadow-lg p-8 text-center">
                            <div class="flex items-center justify-between mb-8">
                                <h1 class="text-3xl font-bold text-green-600 flex items-center gap-2">
                                    🎉 章节完成 - ${getChapterTitle()}
                                </h1>
                                <button
                                    onclick="backToMenu()"
                                    class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition-colors"
                                >
                                    🏠 返回主页
                                </button>
                            </div>
                            
                            <div class="text-6xl mb-6">🌟</div>
                            <h2 class="text-2xl font-bold text-gray-700 mb-4">恭喜完成本章学习！</h2>
                            <p class="text-xl text-gray-600 mb-8">
                                Congratulations on completing this chapter!
                            </p>
                            
                            <div class="space-y-4">
                                <button
                                    onclick="handleNextChapter()"
                                    class="bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-lg text-xl font-semibold mr-4 transition-colors"
                                >
                                    ${currentChapter === 'chapter12' ? '返回主菜单 / Return to Menu' : '下一章 / Next Chapter'}
                                </button>
                                
                                <button
                                    onclick="resetChapterData(); render();"
                                    class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors"
                                >
                                    🔄 重新学习本章 / Restart This Chapter
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        // Main render function
        const render = () => {
            const app = document.getElementById('app');
            
            if (currentChapter === 'menu') {
                app.innerHTML = renderMenu();
            } else if (currentPhase === 'learning') {
                app.innerHTML = renderLearningPhase();
            } else if (currentPhase === 'game') {
                app.innerHTML = renderGamePhase();
            } else if (currentPhase === 'reading') {
                app.innerHTML = renderReadingPhase();
            } else if (currentPhase === 'completed') {
                app.innerHTML = renderCompletedPhase();
            }
        };

        // Initialize the game
        render();
    </script>
</body>
</html>